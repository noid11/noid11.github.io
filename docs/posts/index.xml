<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
	<channel>
		<title>Posts on noid11.github.io</title>
		<link>https://noid11.github.io/posts/</link>
		<description>Recent content in Posts on noid11.github.io</description>
		<generator>Hugo -- gohugo.io</generator>
		<language>ja-jp</language>
		<copyright>&amp;#169; noid11</copyright>
		<lastBuildDate>Mon, 01 Feb 2021 21:47:26 +0900</lastBuildDate>
		<atom:link href="https://noid11.github.io/posts/index.xml" rel="self" type="application/rss+xml" />
		
		<item>
			<title>AWS STS における GetCallerIdentity API に許可は必要ないという話</title>
			<link>https://noid11.github.io/posts/no-need-permission-sts-get-caller-identity/</link>
			<pubDate>Mon, 01 Feb 2021 21:47:26 +0900</pubDate>
			
			<guid>https://noid11.github.io/posts/no-need-permission-sts-get-caller-identity/</guid>
			<description>&lt;ul&gt;
&lt;li&gt;AWS STS には GetCallerIdentity API という、使用しているクレデンシャルから AWS アカウントや IAM User, IAM Role 情報を取得する API がある&lt;/li&gt;
&lt;li&gt;この API は自分が想定した IAM User, IAM Role のクレデンシャルを取得できているのか確認するのに便利だが、使用する IAM Policy に sts:GetCallerIdentity アクションを Allow しなくても使用することが可能&lt;/li&gt;
&lt;li&gt;API Reference に書いてある&lt;/li&gt;
&lt;/ul&gt;</description>
			<content type="html"><![CDATA[<ul>
<li>AWS STS には GetCallerIdentity API という、使用しているクレデンシャルから AWS アカウントや IAM User, IAM Role 情報を取得する API がある</li>
<li>この API は自分が想定した IAM User, IAM Role のクレデンシャルを取得できているのか確認するのに便利だが、使用する IAM Policy に sts:GetCallerIdentity アクションを Allow しなくても使用することが可能</li>
<li>API Reference に書いてある</li>
</ul>
<h2 id="api-reference-を確認">API Reference を確認</h2>
<p>GetCallerIdentity - AWS Security Token Service<br>
<a href="https://docs.aws.amazon.com/STS/latest/APIReference/API_GetCallerIdentity.html">https://docs.aws.amazon.com/STS/latest/APIReference/API_GetCallerIdentity.html</a></p>
<blockquote>
<p>No permissions are required to perform this operation.<br>
If an administrator adds a policy to your IAM user or role that explicitly denies access to the sts:GetCallerIdentity action, you can still perform this operation.<br>
Permissions are not required because the same information is returned when an IAM user or role is denied access.</p>
</blockquote>
<ul>
<li>この操作を実行するために権限は必要ない</li>
<li>管理者が明示的な拒否ポリシーを設定した場合においても sts:GetCallerIdentity の呼び出しは可能</li>
<li>IAM User, IAM Role のアクセスが拒否された場合でも同じ情報が返されるため、アクセス許可が不要</li>
</ul>
<h2 id="note">Note</h2>
<ul>
<li>明示的な許可が不要なのは便利である反面、明示的もできない点に注意</li>
<li>例えば Cognito ID Pool 等を用いて一時的なクレデンシャルを発行するようなアプリケーションでは、そのクレデンシャルを使って GetCallerIdentity を呼び出すことによって、ゲストユーザーであっても AWS アカウント ID や IAM Role の ARN を取得することができてしまう
<ul>
<li>具体的な実害があるかは思いつかないが、ちょっとしたリスクではある</li>
</ul>
</li>
<li>GetCallerIdentity による情報取得を防ぎたい場合、エンドユーザーに対して一時的なクレデンシャルを発行するようなアーキテクチャは避けたほうが良いかもしれない</li>
</ul>]]></content>
		</item>
		
		<item>
			<title>Go で作成した Web アプリを EB CLI を使ってデプロイする方法</title>
			<link>https://noid11.github.io/posts/how-to-deploy-goapp-by-eb-cli/</link>
			<pubDate>Tue, 26 Jan 2021 02:40:20 +0900</pubDate>
			
			<guid>https://noid11.github.io/posts/how-to-deploy-goapp-by-eb-cli/</guid>
			<description>&lt;ul&gt;
&lt;li&gt;ほぼほぼ&lt;a href=&#34;https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/go-tutorial.html&#34;&gt;公式のチュートリアル&lt;/a&gt;をなぞっただけ&lt;/li&gt;
&lt;li&gt;良い点
&lt;ul&gt;
&lt;li&gt;とりあえず Go で Web アプリ作って動かしたいような場合に便利
&lt;ul&gt;
&lt;li&gt;ミドルウェアの事とか考えなくて良い&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;5分程度でインターネット経由でアクセス出来る環境にデプロイできる&lt;/li&gt;
&lt;li&gt;大体の場合、&lt;a href=&#34;https://aws.amazon.com/jp/free/&#34;&gt;12ヶ月間無料枠&lt;/a&gt;で済む
&lt;ul&gt;
&lt;li&gt;新しく始めるプロジェクトの PoC やプロトタイプを動かすようなシナリオに相性が良い&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;やる気になれば&lt;a href=&#34;https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/eb3-logs.html&#34;&gt;ログを確認&lt;/a&gt;したり、&lt;a href=&#34;https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/eb3-ssh.html&#34;&gt;アプリケーションが動作する EC2 インスタンスに SSH 接続したり&lt;/a&gt;できる&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;注意点
&lt;ul&gt;
&lt;li&gt;HTTPS ではなく HTTP でのアクセスとなる&lt;/li&gt;
&lt;li&gt;デフォルトでは EC2 インスタンスロールを設定しないので AWS SDK を使いたい場合には工夫が必要
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;eb create&lt;/code&gt; するときに &lt;code&gt;--instance_profile&lt;/code&gt; で指定しておくとか&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;簡易的な設定で動作するため、複雑な要件が必要なプロダクション環境には向かないかも
&lt;ul&gt;
&lt;li&gt;ちゃんと設定内容を精査して調整した方が良い&lt;/li&gt;
&lt;li&gt;複雑な要件が必要なら EB CLI, EB ではない方法で管理した方が良いかもしれない&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;</description>
			<content type="html"><![CDATA[<ul>
<li>ほぼほぼ<a href="https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/go-tutorial.html">公式のチュートリアル</a>をなぞっただけ</li>
<li>良い点
<ul>
<li>とりあえず Go で Web アプリ作って動かしたいような場合に便利
<ul>
<li>ミドルウェアの事とか考えなくて良い</li>
</ul>
</li>
<li>5分程度でインターネット経由でアクセス出来る環境にデプロイできる</li>
<li>大体の場合、<a href="https://aws.amazon.com/jp/free/">12ヶ月間無料枠</a>で済む
<ul>
<li>新しく始めるプロジェクトの PoC やプロトタイプを動かすようなシナリオに相性が良い</li>
</ul>
</li>
<li>やる気になれば<a href="https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/eb3-logs.html">ログを確認</a>したり、<a href="https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/eb3-ssh.html">アプリケーションが動作する EC2 インスタンスに SSH 接続したり</a>できる</li>
</ul>
</li>
<li>注意点
<ul>
<li>HTTPS ではなく HTTP でのアクセスとなる</li>
<li>デフォルトでは EC2 インスタンスロールを設定しないので AWS SDK を使いたい場合には工夫が必要
<ul>
<li><code>eb create</code> するときに <code>--instance_profile</code> で指定しておくとか</li>
</ul>
</li>
<li>簡易的な設定で動作するため、複雑な要件が必要なプロダクション環境には向かないかも
<ul>
<li>ちゃんと設定内容を精査して調整した方が良い</li>
<li>複雑な要件が必要なら EB CLI, EB ではない方法で管理した方が良いかもしれない</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="手順">手順</h2>
<p>プロジェクトディレクトリを作成し <code>application.go</code> として Go のコードを書く</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">mkdir eb-go <span class="o">&amp;&amp;</span> <span class="nb">cd</span> eb-go
touch application.go
</code></pre></div><hr>
<p>application.go</p>
<div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;fmt&#34;</span>
	<span class="s">&#34;net/http&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">handler</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">if</span> <span class="nx">r</span><span class="p">.</span><span class="nx">URL</span><span class="p">.</span><span class="nx">Path</span> <span class="o">==</span> <span class="s">&#34;/&#34;</span> <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Fprintf</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="s">&#34;Hello World! Append a name to the URL to say hello. For example, use %s/Mary to say hello to Mary.&#34;</span><span class="p">,</span> <span class="nx">r</span><span class="p">.</span><span class="nx">Host</span><span class="p">)</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Fprintf</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="s">&#34;Hello, %s!&#34;</span><span class="p">,</span> <span class="nx">r</span><span class="p">.</span><span class="nx">URL</span><span class="p">.</span><span class="nx">Path</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">http</span><span class="p">.</span><span class="nf">HandleFunc</span><span class="p">(</span><span class="s">&#34;/&#34;</span><span class="p">,</span> <span class="nx">handler</span><span class="p">)</span>
	<span class="nx">http</span><span class="p">.</span><span class="nf">ListenAndServe</span><span class="p">(</span><span class="s">&#34;:5000&#34;</span><span class="p">,</span> <span class="kc">nil</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><hr>
<p>アプリケーションをローカルで動かす</p>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh">go run application.go

<span class="c1"># 別のターミナルやブラウザで http://localhost:5000 にアクセスすれば OK</span>
<span class="c1"># EB 環境にデプロイする際にはポート 80 で公開される</span>
curl http://localhost:5000
</code></pre></div><hr>
<p>Elastic Beanstalk 環境の構築・デプロイ</p>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh">eb init --platform go go-tutorial --region ap-northeast-1

<span class="c1"># ここで EB 環境に用いる EC2 インスタンスやらのリソースが CloudFormation 経由でプロビジョニングされるため、 5分 程度の時間がかかる</span>
eb create go-env
</code></pre></div><hr>
<p>デプロイされた Web アプリをブラウザで開く</p>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh">eb open
</code></pre></div><hr>
<p>クリーンアップ</p>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh">eb terminate
</code></pre></div><h2 id="実行ログ例">実行ログ例</h2>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh">% eb init -p go go-tutorial --region ap-northeast-1
Application go-tutorial has been created.
% eb create go-env
Creating application version archive <span class="s2">&#34;app-210126_023350&#34;</span>.
Uploading go-tutorial/app-210126_023350.zip to S3. This may take a <span class="k">while</span>.
Upload Complete.
Environment details <span class="k">for</span>: go-env
  Application name: go-tutorial
  Region: ap-northeast-1
  Deployed Version: app-210126_023350
  Environment ID: e-mhb6jbhawa
  Platform: arn:aws:elasticbeanstalk:ap-northeast-1::platform/Go <span class="m">1</span> running on 64bit Amazon Linux/2.17.2
  Tier: WebServer-Standard-1.0
  CNAME: UNKNOWN
  Updated: 2021-01-25 17:33:52.752000+00:00
Printing Status:
2021-01-25 17:33:51    INFO    createEnvironment is starting.
2021-01-25 17:33:52    INFO    Using elasticbeanstalk-ap-northeast-1-123456789012 as Amazon S3 storage bucket <span class="k">for</span> environment data.
2021-01-25 17:34:14    INFO    Created load balancer named: awseb-e-m-AWSEBLoa-1QR55QWY2AVZX
2021-01-25 17:34:14    INFO    Created security group named: awseb-e-mhb6jbhawa-stack-AWSEBSecurityGroup-1WRY5JQKP69QQ
2021-01-25 17:34:17    INFO    Created Auto Scaling launch configuration named: awseb-e-mhb6jbhawa-stack-AWSEBAutoScalingLaunchConfiguration-GOVWI86F79E3
2021-01-25 17:35:20    INFO    Created Auto Scaling group named: awseb-e-mhb6jbhawa-stack-AWSEBAutoScalingGroup-MW08E9EZ94AT
2021-01-25 17:35:20    INFO    Waiting <span class="k">for</span> EC2 instances to launch. This may take a few minutes.
2021-01-25 17:35:20    INFO    Created Auto Scaling group policy named: arn:aws:autoscaling:ap-northeast-1:123456789012:scalingPolicy:9f066c87-60b4-407f-a339-70b0517dcd2a:autoScalingGroupName/awseb-e-mhb6jbhawa-stack-AWSEBAutoScalingGroup-MW08E9EZ94AT:policyName/awseb-e-mhb6jbhawa-stack-AWSEBAutoScalingScaleUpPolicy-1KC69AR7HGIY7
2021-01-25 17:35:20    INFO    Created Auto Scaling group policy named: arn:aws:autoscaling:ap-northeast-1:123456789012:scalingPolicy:f7442ed6-3f7e-456d-9338-941e85f4057b:autoScalingGroupName/awseb-e-mhb6jbhawa-stack-AWSEBAutoScalingGroup-MW08E9EZ94AT:policyName/awseb-e-mhb6jbhawa-stack-AWSEBAutoScalingScaleDownPolicy-82YZ8T3H24VQ
2021-01-25 17:35:36    INFO    Created CloudWatch alarm named: awseb-e-mhb6jbhawa-stack-AWSEBCloudwatchAlarmHigh-Z3HRCDA02JTS
2021-01-25 17:35:36    INFO    Created CloudWatch alarm named: awseb-e-mhb6jbhawa-stack-AWSEBCloudwatchAlarmLow-8WILR7PPYF5F
2021-01-25 17:36:36    INFO    Application available at go-env.eba-psw5vsuv.ap-northeast-1.elasticbeanstalk.com.
2021-01-25 17:36:37    INFO    Successfully launched environment: go-env
% eb terminate
The environment <span class="s2">&#34;go-env&#34;</span> and all associated instances will be terminated.
To confirm, <span class="nb">type</span> the environment name: go-env
2021-01-25 17:39:05    INFO    terminateEnvironment is starting.
2021-01-25 17:39:23    INFO    Deleted CloudWatch alarm named: awseb-e-mhb6jbhawa-stack-AWSEBCloudwatchAlarmHigh-Z3HRCDA02JTS 
2021-01-25 17:39:23    INFO    Deleted CloudWatch alarm named: awseb-e-mhb6jbhawa-stack-AWSEBCloudwatchAlarmLow-8WILR7PPYF5F 
2021-01-25 17:39:23    INFO    Deleted Auto Scaling group policy named: arn:aws:autoscaling:ap-northeast-1:123456789012:scalingPolicy:9f066c87-60b4-407f-a339-70b0517dcd2a:autoScalingGroupName/awseb-e-mhb6jbhawa-stack-AWSEBAutoScalingGroup-MW08E9EZ94AT:policyName/awseb-e-mhb6jbhawa-stack-AWSEBAutoScalingScaleUpPolicy-1KC69AR7HGIY7
2021-01-25 17:39:23    INFO    Deleted Auto Scaling group policy named: arn:aws:autoscaling:ap-northeast-1:123456789012:scalingPolicy:f7442ed6-3f7e-456d-9338-941e85f4057b:autoScalingGroupName/awseb-e-mhb6jbhawa-stack-AWSEBAutoScalingGroup-MW08E9EZ94AT:policyName/awseb-e-mhb6jbhawa-stack-AWSEBAutoScalingScaleDownPolicy-82YZ8T3H24VQ
2021-01-25 17:39:23    INFO    Waiting <span class="k">for</span> EC2 instances to terminate. This may take a few minutes.
2021-01-25 17:41:25    INFO    Deleted Auto Scaling group named: awseb-e-mhb6jbhawa-stack-AWSEBAutoScalingGroup-MW08E9EZ94AT
2021-01-25 17:41:25    INFO    Deleted load balancer named: awseb-e-m-AWSEBLoa-1QR55QWY2AVZX
2021-01-25 17:41:25    INFO    Deleted Auto Scaling launch configuration named: awseb-e-mhb6jbhawa-stack-AWSEBAutoScalingLaunchConfiguration-GOVWI86F79E3
2021-01-25 17:41:25    INFO    Deleted security group named: awseb-e-mhb6jbhawa-stack-AWSEBSecurityGroup-1WRY5JQKP69QQ
2021-01-25 17:41:30    INFO    Deleting SNS topic <span class="k">for</span> environment go-env.
2021-01-25 17:41:32    INFO    terminateEnvironment completed successfully.
</code></pre></div><h2 id="この記事を試した環境">この記事を試した環境</h2>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh">% sw_vers
ProductName:    Mac OS X
ProductVersion: 10.15.7
BuildVersion:   19H114
% go version
go version go1.15.6 darwin/amd64
% eb --version
EB CLI 3.19.3 <span class="o">(</span>Python 3.9.1<span class="o">)</span>
</code></pre></div>]]></content>
		</item>
		
		<item>
			<title>EB CLI v3 のヘルプを読んだメモ</title>
			<link>https://noid11.github.io/posts/read-eb-cli-v3-help/</link>
			<pubDate>Tue, 26 Jan 2021 01:44:20 +0900</pubDate>
			
			<guid>https://noid11.github.io/posts/read-eb-cli-v3-help/</guid>
			<description>&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/aws/aws-elastic-beanstalk-cli&#34;&gt;Elastic Beanstalk CLI v3&lt;/a&gt; の詳細なヘルプがネット上に無さそうだったので読んだメモ
&lt;ul&gt;
&lt;li&gt;基本的な使い方なら&lt;a href=&#34;https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/eb-cli3-getting-started.html&#34;&gt;ドキュメント&lt;/a&gt;がある&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;と思ったら &lt;a href=&#34;https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/eb3-cmd-commands.html&#34;&gt;reference&lt;/a&gt; あった・・・&lt;/li&gt;
&lt;/ul&gt;</description>
			<content type="html"><![CDATA[<ul>
<li><a href="https://github.com/aws/aws-elastic-beanstalk-cli">Elastic Beanstalk CLI v3</a> の詳細なヘルプがネット上に無さそうだったので読んだメモ
<ul>
<li>基本的な使い方なら<a href="https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/eb-cli3-getting-started.html">ドキュメント</a>がある</li>
</ul>
</li>
<li>と思ったら <a href="https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/eb3-cmd-commands.html">reference</a> あった・・・</li>
</ul>
<h2 id="eb-help">eb help</h2>
<ul>
<li><code>abort</code>: environment の更新または deployment をキャンセルする</li>
<li><code>appversion</code>: アプリケーションバージョンの一覧表示と管理</li>
<li><code>clone</code>: environment をクローンする</li>
<li><code>codesource</code>: EB CLI デフォルトで使用するコードソースを設定</li>
<li><code>config</code>: environment 設定の変更。サブコマンドを使用して保存された設定を管理</li>
<li><code>console</code>: EB environment のマネジメントコンソールを開く</li>
<li><code>create</code>: 新しい environment を作成する</li>
<li><code>deploy</code>: ソースコードを environment にデプロイする</li>
<li><code>events</code>: 最近の events を取得する</li>
<li><code>health</code>: environment health の詳細を表示</li>
<li><code>init</code>: ディレクトリを初期化してアプリケーションを作成する</li>
<li><code>labs</code>: 追加の実験用コマンド</li>
<li><code>list</code>: 全ての environment を表示</li>
<li><code>local</code>: ローカルマシンでコマンドを実行する</li>
<li><code>logs</code>: 最新のログを取得</li>
<li><code>open</code>: アプリケーション URL をブラウザで開く</li>
<li><code>platform</code>: プラットフォームを管理するコマンド</li>
<li><code>printenv</code>: 環境変数を表示</li>
<li><code>restore</code>: terminate した environment を復元</li>
<li><code>scale</code>: 実行中の EC2 インスタンス数を変更</li>
<li><code>setenv</code>: 環境変数を設定</li>
<li><code>ssh</code>: EC2 インスタンスに接続する SSH クライアントを開く</li>
<li><code>status</code>: environment 情報とステータスを取得</li>
<li><code>swap</code>: 2つの environment CNAME を入れ替える</li>
<li><code>tags</code>: environment のタグを追加・削除・更新・一覧表示する</li>
<li><code>terminate</code>: environment を terminate する</li>
<li><code>upgrade</code>: environment の platform version を最新にアップデートする</li>
<li><code>use</code>: デフォルト environment を設定</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh">% eb --help     
usage: eb <span class="o">(</span>sub-commands ...<span class="o">)</span> <span class="o">[</span>options ...<span class="o">]</span> <span class="o">{</span>arguments ...<span class="o">}</span>

Welcome to the Elastic Beanstalk Command Line Interface <span class="o">(</span>EB CLI<span class="o">)</span>. 
For more information on a specific command, <span class="nb">type</span> <span class="s2">&#34;eb {cmd} --help&#34;</span>.

commands:
  abort        Cancels an environment update or deployment.
  appversion   Listing and managing application versions
  clone        Clones an environment.
  codesource   Configures the code <span class="nb">source</span> <span class="k">for</span> the EB CLI to use by default.
  config       Modify an environment<span class="se">\&#39;</span>s configuration. Use subcommands to manage saved configurations.
  console      Opens the environment in the AWS Elastic Beanstalk Management Console.
  create       Creates a new environment.
  deploy       Deploys your <span class="nb">source</span> code to the environment.
  events       Gets recent events.
  health       Shows detailed environment health.
  init         Initializes your directory with the EB CLI. Creates the application.
  labs         Extra experimental commands.
  list         Lists all environments.
  <span class="nb">local</span>        Runs commands on your <span class="nb">local</span> machine.
  logs         Gets recent logs.
  open         Opens the application URL in a browser.
  platform     Commands <span class="k">for</span> managing platforms.
  printenv     Shows the environment variables.
  restore      Restores a terminated environment.
  scale        Changes the number of running instances.
  setenv       Sets environment variables.
  ssh          Opens the SSH client to connect to an instance.
  status       Gets environment information and status.
  swap         Swaps two environment CNAMEs with each other.
  tags         Allows adding, deleting, updating, and listing of environment tags.
  terminate    Terminates the environment.
  upgrade      Updates the environment to the most recent platform version.
  use          Sets default environment.

optional arguments:
  -h, --help            show this <span class="nb">help</span> message and <span class="nb">exit</span>
  --debug               toggle debug output
  --quiet               suppress all output
  -v, --verbose         toggle verbose output
  --profile PROFILE     use a specific profile from your credential file
  -r REGION, --region REGION
                        use a specific region
  --no-verify-ssl       don<span class="se">\&#39;</span>t verify AWS SSL certificates
  --version             show application/version info

To get started <span class="nb">type</span> <span class="s2">&#34;eb init&#34;</span>. Then <span class="nb">type</span> <span class="s2">&#34;eb create&#34;</span> and <span class="s2">&#34;eb open&#34;</span>
</code></pre></div><h2 id="この記事を試した環境">この記事を試した環境</h2>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh">% sw_vers
ProductName:    Mac OS X
ProductVersion: 10.15.7
BuildVersion:   19H114
% eb --version
EB CLI 3.19.3 <span class="o">(</span>Python 3.9.1<span class="o">)</span>
</code></pre></div>]]></content>
		</item>
		
		<item>
			<title>AWS CLI コマンドを利用可能な全てのリージョンに対して実行する方法</title>
			<link>https://noid11.github.io/posts/how-to-aws-cli-command-to-available-regions/</link>
			<pubDate>Mon, 25 Jan 2021 14:42:12 +0900</pubDate>
			
			<guid>https://noid11.github.io/posts/how-to-aws-cli-command-to-available-regions/</guid>
			<description>&lt;ul&gt;
&lt;li&gt;&lt;code&gt;aws ec2 describe-regions&lt;/code&gt; と &lt;code&gt;jq&lt;/code&gt; によって利用可能な全てのリージョンを取得し、 &lt;code&gt;xargs&lt;/code&gt; コマンドで全てのリージョンに対して任意の AWS CLI コマンドを実行すれば OK&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;全リージョンに対して &lt;code&gt;ec2 describe-instances&lt;/code&gt; を実行する例&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;aws ec2 describe-regions &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; jq --raw-output &lt;span class=&#34;s2&#34;&gt;&amp;#34;.Regions[].RegionName&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; xargs -n &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; -I&lt;span class=&#34;o&#34;&gt;{}&lt;/span&gt; -P &lt;span class=&#34;m&#34;&gt;5&lt;/span&gt; aws --region &lt;span class=&#34;o&#34;&gt;{}&lt;/span&gt; ec2 describe-instances
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
			<content type="html"><![CDATA[<ul>
<li><code>aws ec2 describe-regions</code> と <code>jq</code> によって利用可能な全てのリージョンを取得し、 <code>xargs</code> コマンドで全てのリージョンに対して任意の AWS CLI コマンドを実行すれば OK</li>
</ul>
<p>全リージョンに対して <code>ec2 describe-instances</code> を実行する例</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">aws ec2 describe-regions <span class="p">|</span> jq --raw-output <span class="s2">&#34;.Regions[].RegionName&#34;</span> <span class="p">|</span> xargs -n <span class="m">1</span> -I<span class="o">{}</span> -P <span class="m">5</span> aws --region <span class="o">{}</span> ec2 describe-instances
</code></pre></div><h2 id="利用可能な-aws-リージョンの取得">利用可能な AWS リージョンの取得</h2>
<ul>
<li>EC2 で提供されている <a href="https://docs.aws.amazon.com/AWSEC2/latest/APIReference/API_DescribeRegions.html">DescribeRegions API</a> でリージョン情報を取得できる</li>
<li>AWS CLI の場合 <a href="https://awscli.amazonaws.com/v2/documentation/api/latest/reference/ec2/describe-regions.html"><code>ec2 describe-regions</code> コマンド</a></li>
<li>厳密に全ての AWS リージョンを取得する場合 <code>--all-regions</code> オプションを指定する必要があるが、これは使用するためにオプトインが必要なリージョンがあり、どの AWS アカウントでも全てのリージョンが利用可能では無いので注意</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">aws ec2 describe-regions
</code></pre></div><hr>
<ul>
<li><code>xargs</code> コマンドに連携するためにリージョン情報を改行された raw text に整形するため <code>jq</code> を使う</li>
<li><a href="https://stedolan.github.io/jq/manual/"><code>jq</code> マニュアル</a></li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">aws ec2 describe-regions <span class="p">|</span> jq --raw-output <span class="s2">&#34;.Regions[].RegionName&#34;</span>
</code></pre></div><h2 id="xargs-あれこれ">xargs あれこれ</h2>
<ul>
<li><code>xargs</code> は標準入力で受け取った文字列を使って任意のコマンドを実行できる
<ul>
<li>この任意のコマンドはマルチプロセスで動かすことも可能なので、複数の処理が必要な場合に便利</li>
</ul>
</li>
<li>オプション
<ul>
<li><code>-n</code>: 1コマンドラインが受け取る最大引数の個数</li>
<li><code>-P</code>: 最大プロセス数。 0 を指定すると可能な限り多くのプロセスを使う
<ul>
<li>しかし Mac 環境で 0 指定すると <code>xargs: max. processes must be &gt;0</code> というエラーが発生する。 BSD というより Mac 独自の制約かもしれない。</li>
</ul>
</li>
<li><code>-I</code>: 入力内容の置換
<ul>
<li><code>-I{}</code> と指定することで、任意のコマンドを実行する際に <code>{}</code> を使い、入力を挿入することができる</li>
<li>標準入力関係なく、あるコマンドをマルチプロセスで実行したいような場合 <code>seq 10 | xargs -n 1 -P 5 -I{} uuidgen</code> という感じで <code>seq</code> コマンドで回数指定しつつ <code>-I{}</code> の <code>{}</code> を使わないことで特定コマンドを任意の回数、マルチプロセスで動かせる
<ul>
<li>マルチプロセスで SQS にメッセージ投入する例: <code>seq 100 | xargs -n 1 -P 0 -I{} aws sqs send-message --queue-url $QUEUE_URL --message-body mybody</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">xargs -n <span class="m">1</span> -I<span class="o">{}</span> -P <span class="m">3</span> aws --region <span class="o">{}</span> ec2 describe-instances
</code></pre></div><hr>
<p>■ <code>-P</code> 調整例</p>
<p><code>-P</code>: 1</p>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh">% <span class="nb">time</span> aws ec2 describe-regions <span class="p">|</span> jq --raw-output <span class="s2">&#34;.Regions[].RegionName&#34;</span> <span class="p">|</span> xargs -n <span class="m">1</span> -I<span class="o">{}</span> -P <span class="m">1</span> aws --region <span class="o">{}</span> ec2 describe-instances
...
aws ec2 describe-regions  0.65s user 0.24s system 87% cpu 1.009 total
jq --raw-output <span class="s2">&#34;.Regions[].RegionName&#34;</span>  0.03s user 0.01s system 3% cpu 1.008 total
xargs -n <span class="m">1</span> -I<span class="o">{}</span> -P <span class="m">1</span> aws --region <span class="o">{}</span> ec2 describe-instances  11.51s user 4.33s system 44% cpu 35.704 total
</code></pre></div><p><code>-P</code>: 5</p>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh">% <span class="nb">time</span> aws ec2 describe-regions <span class="p">|</span> jq --raw-output <span class="s2">&#34;.Regions[].RegionName&#34;</span> <span class="p">|</span> xargs -n <span class="m">1</span> -I<span class="o">{}</span> -P <span class="m">5</span> aws --region <span class="o">{}</span> ec2 describe-instances
...
aws ec2 describe-regions  0.73s user 0.32s system 65% cpu 1.600 total
jq --raw-output <span class="s2">&#34;.Regions[].RegionName&#34;</span>  0.03s user 0.00s system 2% cpu 1.599 total
xargs -n <span class="m">1</span> -I<span class="o">{}</span> -P <span class="m">5</span> aws --region <span class="o">{}</span> ec2 describe-instances  15.39s user 5.32s system 148% cpu 13.934 total
</code></pre></div><h2 id="この記事を試した環境">この記事を試した環境</h2>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh">% sw_vers
ProductName:    Mac OS X
ProductVersion: 10.15.7
BuildVersion:   19H114
% aws --version
aws-cli/2.1.6 Python/3.7.4 Darwin/19.6.0 exe/x86_64 prompt/off
% jq --version
jq-1.6
</code></pre></div><ul>
<li><code>xargs</code> はバージョン表示する機能が見当たらなかったが Mac に標準でインストールされているものを使用した</li>
</ul>]]></content>
		</item>
		
		<item>
			<title>Apache Bench ノート</title>
			<link>https://noid11.github.io/posts/apache-bench-note/</link>
			<pubDate>Mon, 25 Jan 2021 01:01:38 +0900</pubDate>
			
			<guid>https://noid11.github.io/posts/apache-bench-note/</guid>
			<description>&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ab&lt;/code&gt;: Apache Bench について調べたノート&lt;/li&gt;
&lt;li&gt;基本形
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ab -c 10 -n 10 http://example.com/&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;オプション
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-A&lt;/code&gt;: Basic 認証での user/password 指定&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-c&lt;/code&gt;: concurrency. 並行実行するコネクション数&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-C&lt;/code&gt;: Cookie 指定&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-H&lt;/code&gt;: 任意の HTTP リクエストヘッダー指定&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-k&lt;/code&gt;: HTTP KeepAlive を有効化&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-m&lt;/code&gt;: HTTP Method を指定&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-n&lt;/code&gt;: 生成する HTTP リクエスト数&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-p&lt;/code&gt;: POST file&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-s&lt;/code&gt;: タイムアウト設定。デフォルト 30 秒&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-t&lt;/code&gt;: ベンチマークのタイムリミット。デフォルトでは無制限&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-T&lt;/code&gt;: POST, PUT メソッドを使用する場合の Content-Type ヘッダー値。デフォルトでは text/plain だが application/x-www-form-urlencoded 等を指定できる&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;実行結果
&lt;ul&gt;
&lt;li&gt;1秒 あたりに行ったリクエスト数が知りたい: &lt;code&gt;Requests per second&lt;/code&gt; を確認&lt;/li&gt;
&lt;li&gt;失敗したリクエストを知りたい: &lt;code&gt;Non-2xx responses&lt;/code&gt; を確認&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;</description>
			<content type="html"><![CDATA[<ul>
<li><code>ab</code>: Apache Bench について調べたノート</li>
<li>基本形
<ul>
<li><code>ab -c 10 -n 10 http://example.com/</code></li>
</ul>
</li>
<li>オプション
<ul>
<li><code>-A</code>: Basic 認証での user/password 指定</li>
<li><code>-c</code>: concurrency. 並行実行するコネクション数</li>
<li><code>-C</code>: Cookie 指定</li>
<li><code>-H</code>: 任意の HTTP リクエストヘッダー指定</li>
<li><code>-k</code>: HTTP KeepAlive を有効化</li>
<li><code>-m</code>: HTTP Method を指定</li>
<li><code>-n</code>: 生成する HTTP リクエスト数</li>
<li><code>-p</code>: POST file</li>
<li><code>-s</code>: タイムアウト設定。デフォルト 30 秒</li>
<li><code>-t</code>: ベンチマークのタイムリミット。デフォルトでは無制限</li>
<li><code>-T</code>: POST, PUT メソッドを使用する場合の Content-Type ヘッダー値。デフォルトでは text/plain だが application/x-www-form-urlencoded 等を指定できる</li>
</ul>
</li>
<li>実行結果
<ul>
<li>1秒 あたりに行ったリクエスト数が知りたい: <code>Requests per second</code> を確認</li>
<li>失敗したリクエストを知りたい: <code>Non-2xx responses</code> を確認</li>
</ul>
</li>
</ul>
<h2 id="基本的な使い方">基本的な使い方</h2>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">ab -c <span class="m">10</span> -n <span class="m">10</span> http://example.com/
</code></pre></div><hr>
<p>実行例</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ab -c <span class="m">10</span> -n <span class="m">10</span> http://example.com/
This is ApacheBench, Version 2.3 &lt;<span class="nv">$Revision</span>: <span class="m">1879490</span> $&gt;
Copyright <span class="m">1996</span> Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Licensed to The Apache Software Foundation, http://www.apache.org/

Benchmarking example.com <span class="o">(</span>be patient<span class="o">)</span>.....done


Server Software:        ECS
Server Hostname:        example.com
Server Port:            <span class="m">80</span>

Document Path:          /
Document Length:        <span class="m">1256</span> bytes

Concurrency Level:      <span class="m">10</span>
Time taken <span class="k">for</span> tests:   0.466 seconds
Complete requests:      <span class="m">10</span>
Failed requests:        <span class="m">0</span>
Total transferred:      <span class="m">16159</span> bytes
HTML transferred:       <span class="m">12560</span> bytes
Requests per second:    21.46 <span class="o">[</span><span class="c1">#/sec] (mean)</span>
Time per request:       465.913 <span class="o">[</span>ms<span class="o">]</span> <span class="o">(</span>mean<span class="o">)</span>
Time per request:       46.591 <span class="o">[</span>ms<span class="o">]</span> <span class="o">(</span>mean, across all concurrent requests<span class="o">)</span>
Transfer rate:          33.87 <span class="o">[</span>Kbytes/sec<span class="o">]</span> received

Connection Times <span class="o">(</span>ms<span class="o">)</span>
              min  mean<span class="o">[</span>+/-sd<span class="o">]</span> median   max
Connect:      <span class="m">106</span>  <span class="m">112</span>   5.6    <span class="m">110</span>     <span class="m">124</span>
Processing:   <span class="m">106</span>  <span class="m">112</span>   5.6    <span class="m">110</span>     <span class="m">124</span>
Waiting:      <span class="m">106</span>  <span class="m">112</span>   5.6    <span class="m">110</span>     <span class="m">124</span>
Total:        <span class="m">212</span>  <span class="m">224</span>  11.2    <span class="m">220</span>     <span class="m">248</span>

Percentage of the requests served within a certain <span class="nb">time</span> <span class="o">(</span>ms<span class="o">)</span>
  50%    <span class="m">220</span>
  66%    <span class="m">224</span>
  75%    <span class="m">232</span>
  80%    <span class="m">234</span>
  90%    <span class="m">248</span>
  95%    <span class="m">248</span>
  98%    <span class="m">248</span>
  99%    <span class="m">248</span>
 100%    <span class="m">248</span> <span class="o">(</span>longest request<span class="o">)</span>
</code></pre></div><h2 id="post-リクエストをベンチマークする">POST リクエストをベンチマークする</h2>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">ab -c <span class="m">10</span> -n <span class="m">10</span> -p ./sample.json -T application/json https://httpbin.org/post
</code></pre></div><hr>
<p>実行例</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ cat ./sample.json 
<span class="o">{</span>
    <span class="s2">&#34;key&#34;</span>: <span class="s2">&#34;value&#34;</span>
<span class="o">}</span>
$ ab -c <span class="m">10</span> -n <span class="m">10</span> -p ./sample.json -T application/json https://httpbin.org/post
This is ApacheBench, Version 2.3 &lt;<span class="nv">$Revision</span>: <span class="m">1879490</span> $&gt;
Copyright <span class="m">1996</span> Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Licensed to The Apache Software Foundation, http://www.apache.org/

Benchmarking httpbin.org <span class="o">(</span>be patient<span class="o">)</span>.....done


Server Software:        gunicorn/19.9.0
Server Hostname:        httpbin.org
Server Port:            <span class="m">443</span>
SSL/TLS Protocol:       TLSv1.2,ECDHE-RSA-AES128-GCM-SHA256,2048,128
Server Temp Key:        ECDH P-256 <span class="m">256</span> bits
TLS Server Name:        httpbin.org

Document Path:          /post
Document Length:        <span class="m">439</span> bytes

Concurrency Level:      <span class="m">10</span>
Time taken <span class="k">for</span> tests:   1.358 seconds
Complete requests:      <span class="m">10</span>
Failed requests:        <span class="m">0</span>
Total transferred:      <span class="m">6640</span> bytes
Total body sent:        <span class="m">1580</span>
HTML transferred:       <span class="m">4390</span> bytes
Requests per second:    7.36 <span class="o">[</span><span class="c1">#/sec] (mean)</span>
Time per request:       1358.083 <span class="o">[</span>ms<span class="o">]</span> <span class="o">(</span>mean<span class="o">)</span>
Time per request:       135.808 <span class="o">[</span>ms<span class="o">]</span> <span class="o">(</span>mean, across all concurrent requests<span class="o">)</span>
Transfer rate:          4.77 <span class="o">[</span>Kbytes/sec<span class="o">]</span> received
                        1.14 kb/s sent
                        5.91 kb/s total

Connection Times <span class="o">(</span>ms<span class="o">)</span>
              min  mean<span class="o">[</span>+/-sd<span class="o">]</span> median   max
Connect:      <span class="m">495</span>  <span class="m">502</span>   6.4    <span class="m">500</span>     <span class="m">512</span>
Processing:   <span class="m">167</span>  <span class="m">172</span>   8.1    <span class="m">169</span>     <span class="m">194</span>
Waiting:      <span class="m">167</span>  <span class="m">172</span>   8.2    <span class="m">169</span>     <span class="m">194</span>
Total:        <span class="m">662</span>  <span class="m">674</span>   9.8    <span class="m">672</span>     <span class="m">690</span>

Percentage of the requests served within a certain <span class="nb">time</span> <span class="o">(</span>ms<span class="o">)</span>
  50%    <span class="m">672</span>
  66%    <span class="m">681</span>
  75%    <span class="m">682</span>
  80%    <span class="m">684</span>
  90%    <span class="m">690</span>
  95%    <span class="m">690</span>
  98%    <span class="m">690</span>
  99%    <span class="m">690</span>
 100%    <span class="m">690</span> <span class="o">(</span>longest request<span class="o">)</span>
</code></pre></div><h2 id="help">help</h2>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ab
ab: wrong number of arguments
Usage: ab <span class="o">[</span>options<span class="o">]</span> <span class="o">[</span>http<span class="o">[</span>s<span class="o">]</span>://<span class="o">]</span>hostname<span class="o">[</span>:port<span class="o">]</span>/path
Options are:
    -n requests     Number of requests to perform
    -c concurrency  Number of multiple requests to make at a <span class="nb">time</span>
    -t timelimit    Seconds to max. to spend on benchmarking This implies -n <span class="m">50000</span>
    -s timeout      Seconds to max. <span class="nb">wait</span> <span class="k">for</span> each response Default is <span class="m">30</span> seconds
    -b windowsize   Size of TCP send/receive buffer, in bytes
    -B address      Address to <span class="nb">bind</span> to when making outgoing connections
    -p postfile     File containing data to POST. Remember also to <span class="nb">set</span> -T
    -u putfile      File containing data to PUT. Remember also to <span class="nb">set</span> -T
    -T content-type Content-type header to use <span class="k">for</span> POST/PUT data, eg. <span class="s1">&#39;application/x-www-form-urlencoded&#39;</span> Default is <span class="s1">&#39;text/plain&#39;</span>
    -v verbosity    How much troubleshooting info to print
    -w              Print out results in HTML tables
    -i              Use HEAD instead of GET
    -x attributes   String to insert as table attributes
    -y attributes   String to insert as tr attributes
    -z attributes   String to insert as td or th attributes
    -C attribute    Add cookie, eg. <span class="s1">&#39;Apache=1234&#39;</span>. <span class="o">(</span>repeatable<span class="o">)</span>
    -H attribute    Add Arbitrary header line, eg. <span class="s1">&#39;Accept-Encoding: gzip&#39;</span> Inserted after all normal header lines. <span class="o">(</span>repeatable<span class="o">)</span>
    -A attribute    Add Basic WWW Authentication, the attributes are a colon separated username and password.
    -P attribute    Add Basic Proxy Authentication, the attributes are a colon separated username and password.
    -X proxy:port   Proxyserver and port number to use
    -V              Print version number and <span class="nb">exit</span>
    -k              Use HTTP KeepAlive feature
    -d              Do not show percentiles served table.
    -S              Do not show confidence estimators and warnings.
    -q              Do not show progress when doing more than <span class="m">150</span> requests
    -l              Accept variable document length <span class="o">(</span>use this <span class="k">for</span> dynamic pages<span class="o">)</span>
    -g filename     Output collected data to gnuplot format file.
    -e filename     Output CSV file with percentages served
    -r              Don<span class="se">\&#39;</span>t <span class="nb">exit</span> on socket receive errors.
    -m method       Method name
    -h              Display usage information <span class="o">(</span>this message<span class="o">)</span>
    -I              Disable TLS Server Name Indication <span class="o">(</span>SNI<span class="o">)</span> extension
    -Z ciphersuite  Specify SSL/TLS cipher suite <span class="o">(</span>See openssl ciphers<span class="o">)</span>
    -f protocol     Specify SSL/TLS protocol <span class="o">(</span>SSL3, TLS1, TLS1.1, TLS1.2 or ALL<span class="o">)</span>
    -E certfile     Specify optional client certificate chain and private key
</code></pre></div><h2 id="manual">manual</h2>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">AB<span class="o">(</span>1<span class="o">)</span>                                                                             ab                                                                            AB<span class="o">(</span>1<span class="o">)</span>

NAME
       ab - Apache HTTP server benchmarking tool

SYNOPSIS
       ab  <span class="o">[</span>  -A  auth-username:password <span class="o">]</span> <span class="o">[</span> -b windowsize <span class="o">]</span> <span class="o">[</span> -B local-address <span class="o">]</span> <span class="o">[</span> -c concurrency <span class="o">]</span> <span class="o">[</span> -C cookie-name<span class="o">=</span>value <span class="o">]</span> <span class="o">[</span> -d <span class="o">]</span> <span class="o">[</span> -e csv-file <span class="o">]</span> <span class="o">[</span> -E client-cer‐tificate file <span class="o">]</span> <span class="o">[</span> -f protocol <span class="o">]</span> <span class="o">[</span> -g gnuplot-file <span class="o">]</span> <span class="o">[</span> -h <span class="o">]</span> <span class="o">[</span> -H custom-header <span class="o">]</span> <span class="o">[</span> -i <span class="o">]</span> <span class="o">[</span> -k <span class="o">]</span> <span class="o">[</span> -l <span class="o">]</span> <span class="o">[</span> -m HTTP-method <span class="o">]</span> <span class="o">[</span> -n requests <span class="o">]</span> <span class="o">[</span> -p POST-file <span class="o">]</span> <span class="o">[</span> -P proxy-auth-username:password  <span class="o">]</span>  <span class="o">[</span>  -q  <span class="o">]</span> <span class="o">[</span> -r <span class="o">]</span> <span class="o">[</span> -s timeout <span class="o">]</span> <span class="o">[</span> -S <span class="o">]</span> <span class="o">[</span> -t timelimit <span class="o">]</span> <span class="o">[</span> -T content-type <span class="o">]</span> <span class="o">[</span> -u PUT-file <span class="o">]</span> <span class="o">[</span> -v verbosity<span class="o">]</span> <span class="o">[</span> -V <span class="o">]</span> <span class="o">[</span> -w <span class="o">]</span> <span class="o">[</span> -x &lt;table&gt;-attributes <span class="o">]</span> <span class="o">[</span> -X proxy<span class="o">[</span>:port<span class="o">]</span> <span class="o">]</span> <span class="o">[</span> -y &lt;tr&gt;-attributes <span class="o">]</span> <span class="o">[</span> -z &lt;td&gt;-attributes <span class="o">]</span> <span class="o">[</span> -Z ciphersuite <span class="o">]</span> <span class="o">[</span>http<span class="o">[</span>s<span class="o">]</span>://<span class="o">]</span>hostname<span class="o">[</span>:port<span class="o">]</span>/path

SUMMARY
       ab is a tool <span class="k">for</span> benchmarking your Apache Hypertext Transfer Protocol <span class="o">(</span>HTTP<span class="o">)</span> server. 
       It is designed to give you an impression of how your current Apache installation performs. 
       This especially shows you how many requests per second your Apache installation is capable of serving.

OPTIONS
       -A auth-username:password
              Supply  BASIC  Authentication credentials to the server. 
              The username and password are separated by a single : and sent on the wire base64 encoded. 
              The string is sent regardless of whether the server needs it <span class="o">(</span>i.e., has sent an <span class="m">401</span> authentication needed<span class="o">)</span>.

       -b windowsize
              Size of TCP send/receive buffer, in bytes.

       -B local-address
              Address to <span class="nb">bind</span> to when making outgoing connections.

       -c concurrency
              Number of multiple requests to perform at a time. 
              Default is one request at a time.

       -C cookie-name<span class="o">=</span>value
              Add a Cookie: line to the request. 
              The argument is typically in the form of a <span class="nv">name</span><span class="o">=</span>value pair. 
              This field is repeatable.

       -d     Do not display the <span class="s2">&#34;percentage served within XX [ms] table&#34;</span>. <span class="o">(</span>legacy support<span class="o">)</span>.

       -e csv-file
              Write a Comma separated value <span class="o">(</span>CSV<span class="o">)</span> file which contains <span class="k">for</span> each percentage <span class="o">(</span>from 1% to 100%<span class="o">)</span> the <span class="nb">time</span> <span class="o">(</span>in milliseconds<span class="o">)</span> it took to serve that percentage of the requests. 
              This is usually more useful than the <span class="s1">&#39;gnuplot&#39;</span> file<span class="p">;</span> as the results are already <span class="s1">&#39;binned&#39;</span>.

       -E client-certificate-file
              When connecting to an SSL website, use the provided client certificate in PEM format to authenticate with the server. 
              The file is expected to contain the client certificate, followed by intermediate certificates, followed by the private key. Available in 2.4.36 and later.

       -f protocol
              Specify SSL/TLS protocol <span class="o">(</span>SSL2, SSL3, TLS1, TLS1.1, TLS1.2, or ALL<span class="o">)</span>. TLS1.1 and TLS1.2 support available in 2.4.4 and later.

       -g gnuplot-file
              Write all measured values out as a <span class="s1">&#39;gnuplot&#39;</span> or TSV <span class="o">(</span>Tab separate values<span class="o">)</span> file. 
              This file can easily be imported into packages like Gnuplot, IDL, Mathematica, Igor or even Excel. 
              The labels are on the first line of the file.

       -h     Display usage information.

       -H custom-header
              Append extra headers to the request. 
              The argument is typically in the form of a valid header line, containing a colon-separated field-value pair <span class="o">(</span>i.e., <span class="s2">&#34;Accept-Encoding: zip/zop;8bit&#34;</span><span class="o">)</span>.

       -i     Do HEAD requests instead of GET.

       -k     Enable the HTTP KeepAlive feature, i.e., perform multiple requests within one HTTP session. Default is no KeepAlive.

       -l     Do not report errors <span class="k">if</span> the length of the responses is not constant. This can be useful <span class="k">for</span> dynamic pages. Available in 2.4.7 and later.

       -m HTTP-method
              Custom HTTP method <span class="k">for</span> the requests. Available in 2.4.10 and later.

       -n requests
              Number of requests to perform <span class="k">for</span> the benchmarking session. 
              The default is to just perform a single request which usually leads to non-representative benchmarking results.

       -p POST-file
              File containing data to POST. Remember to also <span class="nb">set</span> -T.

       -P proxy-auth-username:password
              Supply BASIC Authentication credentials to a proxy en-route. 
              The username and password are separated by a single : and sent on the wire base64 encoded.
              The string is sent regardless of whether the proxy needs it <span class="o">(</span>i.e., has sent an <span class="m">407</span> proxy authentication needed<span class="o">)</span>.

       -q     When processing more than <span class="m">150</span> requests, ab outputs a progress count on stderr every 10% or <span class="m">100</span> requests or so. 
              The -q flag will suppress these messages.

       -r     Don<span class="se">\&#39;</span>t <span class="nb">exit</span> on socket receive errors.

       -s timeout
              Maximum number of seconds to <span class="nb">wait</span> before the socket <span class="nb">times</span> out. 
              Default is <span class="m">30</span> seconds. 
              Available in 2.4.4 and later.

       -S     Do  not  display  the median and standard deviation values, nor display the warning/error messages when the average and median are more than one or two <span class="nb">times</span> the standard deviation apart. 
              And default to the min/avg/max values. <span class="o">(</span>legacy support<span class="o">)</span>.

       -t timelimit
              Maximum number of seconds to spend <span class="k">for</span> benchmarking. This implies a -n <span class="m">50000</span> internally. 
              Use this to benchmark the server within a fixed total amount of time. 
              Per default there is no timelimit.

       -T content-type
              Content-type header to use <span class="k">for</span> POST/PUT data, eg. application/x-www-form-urlencoded. Default is text/plain.

       -u PUT-file
              File containing data to PUT. Remember to also <span class="nb">set</span> -T.

       -v verbosity
              Set verbosity level - <span class="m">4</span> and above prints information on headers, <span class="m">3</span> and above prints response codes <span class="o">(</span>404, 200, etc.<span class="o">)</span>, <span class="m">2</span> and above prints warnings and info.

       -V     Display version number and exit.

       -w     Print out results in HTML tables. Default table is two columns wide, with a white background.

       -x &lt;table&gt;-attributes
              String to use as attributes <span class="k">for</span> &lt;table&gt;. Attributes are inserted &lt;table here&gt;.

       -X proxy<span class="o">[</span>:port<span class="o">]</span>
              Use a proxy server <span class="k">for</span> the requests.

       -y &lt;tr&gt;-attributes
              String to use as attributes <span class="k">for</span> &lt;tr&gt;.

       -z &lt;td&gt;-attributes
              String to use as attributes <span class="k">for</span> &lt;td&gt;.

       -Z ciphersuite
              Specify SSL/TLS cipher suite <span class="o">(</span>See openssl ciphers<span class="o">)</span>

OUTPUT
       The following list describes the values returned by ab:

       Server Software
              The value, <span class="k">if</span> any, returned in the server HTTP header of the first successful response. 
              This includes all characters in the header from beginning to the point a character with decimal value of <span class="m">32</span> <span class="o">(</span>most notably: a space or CR/LF<span class="o">)</span> is detected.

       Server Hostname
              The DNS or IP address given on the <span class="nb">command</span> line

       Server Port
              The port to which ab is connecting. 
              If no port is given on the <span class="nb">command</span> line, this will default to <span class="m">80</span> <span class="k">for</span> http and <span class="m">443</span> <span class="k">for</span> https.

       SSL/TLS Protocol
              The protocol parameters negotiated between the client and server. 
              This will only be printed <span class="k">if</span> SSL is used.

       Document Path
              The request URI parsed from the <span class="nb">command</span> line string.

       Document Length
              This is the size in bytes of the first successfully returned document. 
              If the document length changes during testing, the response is considered an error.

       Concurrency Level
              The number of concurrent clients used during the <span class="nb">test</span>

       Time taken <span class="k">for</span> tests
              This is the <span class="nb">time</span> taken from the moment the first socket connection is created to the moment the last response is received

       Complete requests
              The number of successful responses received

       Failed requests
              The number of requests that were considered a failure. 
              If the number is greater than zero, another line will be printed showing the number of requests that failed due to connecting, reading, incorrect content length, or exceptions.

       Write errors
              The number of errors that failed during write <span class="o">(</span>broken pipe<span class="o">)</span>.

       Non-2xx responses
              The number of responses that were not in the <span class="m">200</span> series of response codes. If all responses were 200, this field is not printed.

       Keep-Alive requests
              The number of connections that resulted in Keep-Alive requests

       Total body sent
              If  configured  to  send  data  as part of the test, this is the total number of bytes sent during the tests. 
              This field is omitted <span class="k">if</span> the <span class="nb">test</span> did not include a body to send.

       Total transferred
              The total number of bytes received from the server. 
              This number is essentially the number of bytes sent over the wire.

       HTML transferred
              The total number of document bytes received from the server. 
              This number excludes bytes received in HTTP headers

       Requests per second
              This is the number of requests per second. 
              This value is the result of dividing the number of requests by the total <span class="nb">time</span> taken

       Time per request
              The average <span class="nb">time</span> spent per request. 
              The first value is calculated with the formula concurrency * timetaken * <span class="m">1000</span> / <span class="k">done</span> <span class="k">while</span> the second value is calculated with the formula timetaken * <span class="m">1000</span> / <span class="k">done</span>

       Transfer rate
              The rate of transfer as calculated by the formula totalread / <span class="m">1024</span> / timetaken

BUGS
       There are  various  statically  declared buffers of fixed length. 
       Combined with the lazy parsing of the <span class="nb">command</span> line arguments, the response headers from the server and other external inputs, this might bite you.

       It does not implement HTTP/1.x fully<span class="p">;</span> only accepts some <span class="s1">&#39;expected&#39;</span> forms of responses. 
       The rather heavy use of strstr<span class="o">(</span>3<span class="o">)</span> shows up top in profile, which might indicate a performance problem<span class="p">;</span> i.e., you would measure the ab performance rather than the server<span class="se">\&#39;</span>s.

Apache HTTP Server                                                            2018-10-10                                                                        AB<span class="o">(</span>1<span class="o">)</span>
</code></pre></div><h2 id="official-web-info">Official Web Info</h2>
<p>ab - Apache HTTP server benchmarking tool - Apache HTTP Server Version 2.4<br>
<a href="https://httpd.apache.org/docs/2.4/programs/ab.html">https://httpd.apache.org/docs/2.4/programs/ab.html</a></p>
<h2 id="この記事を試した環境">この記事を試した環境</h2>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ cat /etc/os-release 
<span class="nv">NAME</span><span class="o">=</span><span class="s2">&#34;Amazon Linux&#34;</span>
<span class="nv">VERSION</span><span class="o">=</span><span class="s2">&#34;2&#34;</span>
<span class="nv">ID</span><span class="o">=</span><span class="s2">&#34;amzn&#34;</span>
<span class="nv">ID_LIKE</span><span class="o">=</span><span class="s2">&#34;centos rhel fedora&#34;</span>
<span class="nv">VERSION_ID</span><span class="o">=</span><span class="s2">&#34;2&#34;</span>
<span class="nv">PRETTY_NAME</span><span class="o">=</span><span class="s2">&#34;Amazon Linux 2&#34;</span>
<span class="nv">ANSI_COLOR</span><span class="o">=</span><span class="s2">&#34;0;33&#34;</span>
<span class="nv">CPE_NAME</span><span class="o">=</span><span class="s2">&#34;cpe:2.3:o\:amazon:amazon_linux:2&#34;</span>
<span class="nv">HOME_URL</span><span class="o">=</span><span class="s2">&#34;https://amazonlinux.com/&#34;</span>
$ uname --kernel-name --kernel-release --kernel-version --machine
Linux 4.14.209-160.339.amzn2.x86_64 <span class="c1">#1 SMP Wed Dec 16 22:44:04 UTC 2020 x86_64</span>
$ ab -V
This is ApacheBench, Version 2.3 &lt;<span class="nv">$Revision</span>: <span class="m">1879490</span> $&gt;
Copyright <span class="m">1996</span> Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Licensed to The Apache Software Foundation, http://www.apache.org/
</code></pre></div>]]></content>
		</item>
		
		<item>
			<title>Using Amazon SQS dead-letter queues to replay messages 読んだメモ</title>
			<link>https://noid11.github.io/posts/read-using-amazon-sqs-dead-letter-queues-to-replay-messages/</link>
			<pubDate>Sun, 24 Jan 2021 16:50:17 +0900</pubDate>
			
			<guid>https://noid11.github.io/posts/read-using-amazon-sqs-dead-letter-queues-to-replay-messages/</guid>
			<description>&lt;p&gt;以下のブログ記事を読んだメモ&lt;/p&gt;
&lt;p&gt;Using Amazon SQS dead-letter queues to replay messages | AWS Compute Blog&lt;br&gt;
&lt;a href=&#34;https://aws.amazon.com/jp/blogs/compute/using-amazon-sqs-dead-letter-queues-to-replay-messages/&#34;&gt;https://aws.amazon.com/jp/blogs/compute/using-amazon-sqs-dead-letter-queues-to-replay-messages/&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;SQS の DLQ を扱う方法として、 DLQ を 2つ 使う構成&lt;/li&gt;
&lt;li&gt;1つめの DLQ は Lambda 関数のトリガーとして設定し、アプリケーションで処理されなかったメッセージを Lambda 関数によって再処理する
&lt;ul&gt;
&lt;li&gt;この Lambda 関数で処理できなかったものに関しては SQS メッセージ属性にて再試行回数をカウントして、所定のリトライ回数を超えたら 2つめ の DLQ にメッセージを送信し、あとは手動で処理する&lt;/li&gt;
&lt;li&gt;Lambda 関数による DLQ のリトライではメッセージ属性を使ってエクスポネンシャルバックオフによる間隔調整を行う&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;</description>
			<content type="html"><![CDATA[<p>以下のブログ記事を読んだメモ</p>
<p>Using Amazon SQS dead-letter queues to replay messages | AWS Compute Blog<br>
<a href="https://aws.amazon.com/jp/blogs/compute/using-amazon-sqs-dead-letter-queues-to-replay-messages/">https://aws.amazon.com/jp/blogs/compute/using-amazon-sqs-dead-letter-queues-to-replay-messages/</a></p>
<ul>
<li>SQS の DLQ を扱う方法として、 DLQ を 2つ 使う構成</li>
<li>1つめの DLQ は Lambda 関数のトリガーとして設定し、アプリケーションで処理されなかったメッセージを Lambda 関数によって再処理する
<ul>
<li>この Lambda 関数で処理できなかったものに関しては SQS メッセージ属性にて再試行回数をカウントして、所定のリトライ回数を超えたら 2つめ の DLQ にメッセージを送信し、あとは手動で処理する</li>
<li>Lambda 関数による DLQ のリトライではメッセージ属性を使ってエクスポネンシャルバックオフによる間隔調整を行う</li>
</ul>
</li>
</ul>
<h2 id="introduction">Introduction</h2>
<ul>
<li>SQS はフルマネージドなキューイングサービス
<ul>
<li>マイクロサービス、分散システム、サーバーレスアプリケーションを分離して拡張できる</li>
<li>SQS の一般的に使用される機能は、デッドレターキュー
<ul>
<li>DLQ: Dead Letter Queue は、正常に処理（消費）できないメッセージを格納するために使用する</li>
</ul>
</li>
</ul>
</li>
<li>この記事では、既存の SQS キューに自動復元機能を追加する方法を解説
<ul>
<li>DLQ を監視し、メッセージをメインキューに戻して、再度処理できるかどうかを確認する
<ul>
<li>特定のアルゴリズムを使用して、これが永久に繰り返されないようにする</li>
<li>メッセージの再処理を試みるたびに、メッセージが最終的に無効と見なされるまで、再生時間が長くなる</li>
</ul>
</li>
</ul>
</li>
<li>SQS DLQ, AWS Lambda, および特定のアルゴリズムを使用して、失敗したメッセージの再試行率を下げる
<ul>
<li>このサーバーレスソリューションはパッケージ化して AWS サーバーレスアプリケーションリポジトリに公開している</li>
</ul>
</li>
</ul>
<h2 id="dead-letter-queues-and-message-replay">Dead-letter queues and message replay</h2>
<ul>
<li>DLQ の主なタスクは、メッセージの失敗を処理すること
<ul>
<li>これにより、未処理のメッセージを脇に置いて分離し、処理が失敗した理由を判別できる</li>
<li>多くの場合、これらの失敗したメッセージはアプリケーションエラーが原因で発生する
<ul>
<li>たとえば、コンシューマアプリケーションがメッセージを正しく解析できず、未処理の例外をスローするとする</li>
<li>この例外により、メッセージを DLQ に送信するエラーレスポンスがトリガーされる</li>
</ul>
</li>
</ul>
</li>
<li>失敗したメッセージを処理するために、エクスポネンシャルバックオフアルゴリズムを実装して再試行メカニズムを構築する
<ul>
<li>エクスポネンシャルバックオフの背後にある考え方は、連続するエラーレスポンスを再試行するまでの待機時間を徐々に長くすること</li>
<li>ほとんどのエクスポネンシャルバックオフアルゴリズムは、ジッター（ランダム化された遅延）を使用して、連続する衝突を防ぐ
<ul>
<li>これにより、メッセージの再試行が時間全体でより均等に分散され、より効率的に処理できるようになる</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="solution-overview">Solution overview</h2>
<p><img src="/images/read-using-amazon-sqs-dead-letter-queues-to-replay-messages/sqs-newarch.png" alt="sqs-newarch.png"></p>
<ul>
<li>プロデューサーから SQS に送信されるメッセージのフロー
<ol>
<li>プロデューサーはメッセージを SQS キューに送信</li>
<li>コンシューマーが同じ SQS キュー内のメッセージの処理に失敗</li>
<li>メッセージは、コンポーネントの設定に従って、メインの SQS キューからデフォルトのデッドレターキューに移動される</li>
<li>Lambda 関数は SQS メインデッドレターキューをイベントソースとして設定</li>
</ol>
<ul>
<li>メッセージを受信して元のキューに送り返し、メッセージタイマーを追加</li>
</ul>
<ol start="5">
<li>メッセージタイマーは、エクスポネンシャルバックオフおよびジッターアルゴリズムによって定義される</li>
<li>再試行の回数を制限</li>
</ol>
<ul>
<li>メッセージがこの制限を超えると、メッセージは 2番目 の DLQ に移動され、オペレーターが手動で処理する</li>
</ul>
</li>
</ul>
<h2 id="how-the-replay-function-works">How the replay function works</h2>
<ul>
<li>SQS DLQ がメッセージを受信するたびに Lambda がトリガーされて再生機能が実行される</li>
<li>リプレイコードは SQS メッセージ属性 <code>sqs-dlq-replay-nb</code> を、現在試行されている再試行回数の永続的なカウンターとして使用する
<ul>
<li>再試行の回数は、（アプリケーション構成ファイルで定義されている）最大回数と比較する
<ul>
<li>最大値を超えると、メッセージは人間が操作するキューに移動する</li>
<li>そうでない場合、この関数は AWS Lambda イベントデータを使用して SQS メインキューの新しいメッセージを作成する</li>
<li>最後に、再試行カウンターを更新し、メッセージに新しいメッセージタイマーを追加して、メッセージをメインキューに送り返す</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-py" data-lang="py"><span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
    <span class="s2">&#34;&#34;&#34;Lambda function handler.&#34;&#34;&#34;</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">event</span><span class="p">[</span><span class="s1">&#39;Records&#39;</span><span class="p">]:</span>
        <span class="n">nbReplay</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1"># number of replay</span>
        <span class="k">if</span> <span class="s1">&#39;sqs-dlq-replay-nb&#39;</span> <span class="ow">in</span> <span class="n">record</span><span class="p">[</span><span class="s1">&#39;messageAttributes&#39;</span><span class="p">]:</span>
            <span class="n">nbReplay</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">record</span><span class="p">[</span><span class="s1">&#39;messageAttributes&#39;</span><span class="p">][</span><span class="s1">&#39;sqs-dlq-replay-nb&#39;</span><span class="p">][</span><span class="s2">&#34;stringValue&#34;</span><span class="p">])</span>

        <span class="n">nbReplay</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">nbReplay</span> <span class="o">&gt;</span> <span class="n">config</span><span class="o">.</span><span class="n">MAX_ATTEMPS</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">MaxAttempsError</span><span class="p">(</span><span class="n">replay</span><span class="o">=</span><span class="n">nbReplay</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">MAX_ATTEMPS</span><span class="p">)</span>

        <span class="c1"># SQS attributes</span>
        <span class="n">attributes</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="s1">&#39;messageAttributes&#39;</span><span class="p">]</span>
        <span class="n">attributes</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;sqs-dlq-replay-nb&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;StringValue&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">nbReplay</span><span class="p">),</span> <span class="s1">&#39;DataType&#39;</span><span class="p">:</span> <span class="s1">&#39;Number&#39;</span><span class="p">}})</span>

        <span class="n">_sqs_attributes_cleaner</span><span class="p">(</span><span class="n">attributes</span><span class="p">)</span>

        <span class="c1"># Backoff</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">backoff</span><span class="o">.</span><span class="n">ExpoBackoffFullJitter</span><span class="p">(</span><span class="n">base</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">BACKOFF_RATE</span><span class="p">,</span> <span class="n">cap</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">MESSAGE_RETENTION_PERIOD</span><span class="p">)</span>
        <span class="n">delaySeconds</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">backoff</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">nbReplay</span><span class="p">))</span>

        <span class="c1"># SQS</span>
        <span class="n">SQS</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span>
            <span class="n">QueueUrl</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">SQS_MAIN_URL</span><span class="p">,</span>
            <span class="n">MessageBody</span><span class="o">=</span><span class="n">record</span><span class="p">[</span><span class="s1">&#39;body&#39;</span><span class="p">],</span>
            <span class="n">DelaySeconds</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">delaySeconds</span><span class="p">),</span>
            <span class="n">MessageAttributes</span><span class="o">=</span><span class="n">record</span><span class="p">[</span><span class="s1">&#39;messageAttributes&#39;</span><span class="p">]</span>
        <span class="p">)</span>
</code></pre></div><h2 id="how-to-use-the-application">How to use the application</h2>
<ul>
<li>このサーバーレスアプリケーションは、次の方法で使用できる
<ul>
<li>Lambda コンソール:「サーバーレスアプリリポジトリの参照」オプションを選択して関数を作成</li>
<li>パブリックアプリケーションリポジトリで amazon-sqs-dlq-replay-backoff アプリケーションを選択
<ul>
<li>デフォルトの SQS パラメーターとリプレイ機能パラメーターを使用してアプリケーションを設定</li>
<li>このブログ投稿で YanCui によって説明されている、サーバーレスフレームワーク</li>
<li><code>AWS::ServerlessRepo::Application</code> リソースを使用した CloudFormation テンプレート</li>
</ul>
</li>
</ul>
</li>
<li>AWS サーバーレスアプリケーションリポジトリアプリケーションを使用した CloudFormation テンプレートの例</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="nt">AWSTemplateFormatVersion</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;2010-09-09&#39;</span><span class="w">
</span><span class="w"></span><span class="nt">Transform</span><span class="p">:</span><span class="w"> </span><span class="l">AWS::Serverless-2016-10-31</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="nt">Resources</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">ReplaySqsQueue</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">Type</span><span class="p">:</span><span class="w"> </span><span class="l">AWS::Serverless::Application</span><span class="w">
</span><span class="w">    </span><span class="nt">Properties</span><span class="p">:</span><span class="w">
</span><span class="w">      </span><span class="nt">Location</span><span class="p">:</span><span class="w"> 
</span><span class="w">        </span><span class="nt">ApplicationId</span><span class="p">:</span><span class="w"> </span><span class="l">arn:aws:serverlessrepo:eu-west-1:1234123412:applications~sqs-dlq-replay</span><span class="w">
</span><span class="w">        </span><span class="nt">SemanticVersion</span><span class="p">:</span><span class="w"> </span><span class="m">1.0.0</span><span class="w">
</span><span class="w">      </span><span class="nt">Parameters</span><span class="p">:</span><span class="w">
</span><span class="w">        </span><span class="nt">BackoffRate</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;2&#34;</span><span class="w">
</span><span class="w">        </span><span class="nt">MaxAttempts</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;3&#34;</span><span class="w">
</span></code></pre></div><h2 id="conclusion">Conclusion</h2>
<ul>
<li>エクスポネンシャルバックオフアルゴリズム（ジッターあり）が SQS キューのメッセージ処理機能をどのように強化するかについて説明
<ul>
<li>これで amazon-sqs-dlq-replay-backoff アプリケーションが AWS サーバーレスアプリケーションリポジトリにある
<ul>
<li>GitHub リポジトリでも公開している: <a href="https://github.com/aws-samples/amazon-sqs-dlq-replay-backoff">https://github.com/aws-samples/amazon-sqs-dlq-replay-backoff</a></li>
</ul>
</li>
</ul>
</li>
<li>SQS のデッドレターキューの使用を開始するには、以下
<ul>
<li><a href="http://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-dead-letter-queues.html">http://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-dead-letter-queues.html</a></li>
<li><a href="http://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/MonitorSQSwithCloudWatch.html">http://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/MonitorSQSwithCloudWatch.html</a></li>
</ul>
</li>
<li>再生メカニズムを実装するには、以下を参照
<ul>
<li><a href="https://aws.amazon.com/blogs/architecture/exponential-backoff-and-jitter/">https://aws.amazon.com/blogs/architecture/exponential-backoff-and-jitter/</a></li>
<li><a href="https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-message-timers.html">https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-message-timers.html</a></li>
</ul>
</li>
<li>サーバーレス学習リソースの詳細については http:////serverlessland.com</li>
</ul>]]></content>
		</item>
		
		<item>
			<title>AWS CLI v2 を使って CloudWatch Logs を `tail -f` っぽく見る方法</title>
			<link>https://noid11.github.io/posts/how-to-cloudwatch-logs-tail-follow-by-aws-cli-v2/</link>
			<pubDate>Sat, 23 Jan 2021 14:33:50 +0900</pubDate>
			
			<guid>https://noid11.github.io/posts/how-to-cloudwatch-logs-tail-follow-by-aws-cli-v2/</guid>
			<description>&lt;ul&gt;
&lt;li&gt;AWS Lambda を動かしている時にマネジメントコンソールを開かなくてもログを確認できて便利&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;nv&#34;&gt;LOG_GROUP&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/aws/lambda/myfunc
aws logs tail &lt;span class=&#34;nv&#34;&gt;$LOG_GROUP&lt;/span&gt; --follow
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
			<content type="html"><![CDATA[<ul>
<li>AWS Lambda を動かしている時にマネジメントコンソールを開かなくてもログを確認できて便利</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nv">LOG_GROUP</span><span class="o">=</span>/aws/lambda/myfunc
aws logs tail <span class="nv">$LOG_GROUP</span> --follow
</code></pre></div><h2 id="help">help</h2>
<p><a href="https://awscli.amazonaws.com/v2/documentation/api/latest/reference/logs/tail.html">https://awscli.amazonaws.com/v2/documentation/api/latest/reference/logs/tail.html</a></p>
<ul>
<li><code>trail -f</code> のような形式じゃなくても、過去 1時間 のログデータを取得するような使い方も可能
<ul>
<li><code>aws logs tail $LOG_GROUP --since 1h</code></li>
</ul>
</li>
<li><code>--format</code> を <code>short</code> と設定することで、ログストリーム名やタイムスタンプのミリ秒単位を省略して表示できる
<ul>
<li><code>aws logs tail $LOG_GROUP --follow --format short</code></li>
</ul>
</li>
<li><code>--filter-pattern</code> を指定することで、表示内容をフィルタできる
<ul>
<li>特定 Lambda 関数における、過去1週間の Duration や Max Memory Used を確認したい場合・・・
<ul>
<li><code>aws logs tail $LOG_GROUP --since 7d --filter-pattern &quot;?REPORT&quot;</code></li>
</ul>
</li>
<li>特定リクエスト ID でフィルタしたい場合・・・
<ul>
<li><code>aws logs tail $LOG_GROUP --since 2d --filter-pattern '&quot;my-request-id&quot;'</code>
<ul>
<li>CloudWatch Logs におけるフィルタパターンで完全一致はダブルクォーテーションで囲む必要があるので <code>'&quot;hoge&quot;'</code> のような指定が必要</li>
</ul>
</li>
</ul>
</li>
<li>フィルタパターンとして指定できる構文については CloudWatch Logs のドキュメントを参照
<ul>
<li><a href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/FilterAndPatternSyntax.html">https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/FilterAndPatternSyntax.html</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh">% aws logs tail <span class="nb">help</span>
TAIL<span class="o">()</span>                                                                  TAIL<span class="o">()</span>



NAME
       tail -

DESCRIPTION
       Tails the logs <span class="k">for</span> a CloudWatch Logs group. 
       By default, the <span class="nb">command</span> returns logs from all associated CloudWatch Logs streams during the past ten minutes. 
       Note that there is no guarantee <span class="k">for</span> exact timestamp ordering of logs.

       See <span class="s1">&#39;aws help&#39;</span> <span class="k">for</span> descriptions of global parameters.

SYNOPSIS
            tail
          group_name &lt;value&gt;
          <span class="o">[</span>--since &lt;value&gt;<span class="o">]</span>
          <span class="o">[</span>--follow<span class="o">]</span>
          <span class="o">[</span>--format &lt;value&gt;<span class="o">]</span>
          <span class="o">[</span>--filter-pattern &lt;value&gt;<span class="o">]</span>

OPTIONS
       group_name <span class="o">(</span>string<span class="o">)</span> The name of the CloudWatch Logs group.

       --since <span class="o">(</span>string<span class="o">)</span> From what <span class="nb">time</span> to begin displaying logs.  
       By  default, logs will be displayed starting from ten minutes in the past. 
       The value provided can be an ISO <span class="m">8601</span> timestamp or a relative time. 
       For relative times, provide a number and a single unit. 
       Supported units include:

          o s - seconds
          o m - minutes
          o h - hours
          o d - days
          o w - weeks

          For  example, a value of 5m would indicate to display logs starting
          five minutes in the past.
          Note that multiple units are not supported <span class="o">(</span>i.e. 5h30m<span class="o">)</span>

       --follow <span class="o">(</span>boolean<span class="o">)</span> Whether to continuously poll <span class="k">for</span> new logs. 
       By default, the <span class="nb">command</span> will <span class="nb">exit</span> once there are no more logs to display.
       To <span class="nb">exit</span> from this mode, use Control-C.

       --format <span class="o">(</span>string<span class="o">)</span> The format to display the logs. 
       The following formats are supported:

          o detailed - This the default format. 
            It prints  out  the  timestamp with millisecond precision and timezones, the log stream name, and the log message.

          o short - A shortened format. 
            It prints out the a shortened timestamp and the log message.

       --filter-pattern <span class="o">(</span>string<span class="o">)</span> The filter pattern to use. 
       See Filter and Pattern Syntax <span class="k">for</span> details. 
       If not provided, all the events are matched

       See <span class="s1">&#39;aws help&#39;</span> <span class="k">for</span> descriptions of global parameters.



                                                                        TAIL<span class="o">()</span>
</code></pre></div><h2 id="この記事を試した環境">この記事を試した環境</h2>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh">% sw_vers
ProductName:	Mac OS X
ProductVersion:	10.15.7
BuildVersion:	19H114
% aws --version
aws-cli/2.1.6 Python/3.7.4 Darwin/19.6.0 exe/x86_64 prompt/off
</code></pre></div>]]></content>
		</item>
		
		<item>
			<title>Mac に Docker Machine をインストールする方法</title>
			<link>https://noid11.github.io/posts/how-to-install-docker-machine-to-mac/</link>
			<pubDate>Fri, 22 Jan 2021 09:30:07 +0900</pubDate>
			
			<guid>https://noid11.github.io/posts/how-to-install-docker-machine-to-mac/</guid>
			<description>&lt;p&gt;ググっても公式情報がヒットしづらかったのでメモ&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>ググっても公式情報がヒットしづらかったのでメモ</p>
<ul>
<li><a href="https://docs.docker.com/machine/">Docker Machine</a> は <a href="https://docs.docker.com/docker-for-mac/install/">Docker Desktop on Mac</a> に含まれなくなったので別途個別にインストールが必要</li>
<li>インストール方法は<a href="https://docs.docker.com/machine/install-machine/">公式ドキュメント</a>に全て書いてある</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># インストール</span>
<span class="nv">base</span><span class="o">=</span>https://github.com/docker/machine/releases/download/v0.16.0 <span class="o">&amp;&amp;</span> curl -L <span class="nv">$base</span>/docker-machine-<span class="k">$(</span>uname -s<span class="k">)</span>-<span class="k">$(</span>uname -m<span class="k">)</span> &gt;/usr/local/bin/docker-machine <span class="o">&amp;&amp;</span> chmod +x /usr/local/bin/docker-machine

<span class="c1"># インストールできたか確認</span>
docker-machine version
</code></pre></div><hr>
<p>この記事を試した環境</p>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh">% sw_vers
ProductName:    Mac OS X
ProductVersion: 10.15.7
BuildVersion:   19H114
% docker-machine version
docker-machine version 0.16.0, build 702c267f
</code></pre></div>]]></content>
		</item>
		
		<item>
			<title>xmllint コマンドで XML を整形して出力する</title>
			<link>https://noid11.github.io/posts/pretty-print-xml-by-xmllint/</link>
			<pubDate>Thu, 21 Jan 2021 10:26:45 +0900</pubDate>
			
			<guid>https://noid11.github.io/posts/pretty-print-xml-by-xmllint/</guid>
			<description>&lt;p&gt;XML をファイルとして保存して、 &lt;code&gt;--format&lt;/code&gt; オプションで整形できる&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;xmllint --format ./myfile.xml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
			<content type="html"><![CDATA[<p>XML をファイルとして保存して、 <code>--format</code> オプションで整形できる</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">xmllint --format ./myfile.xml
</code></pre></div><h2 id="manual">manual</h2>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">XMLLINT<span class="o">(</span>1<span class="o">)</span>                                                             xmllint Manual                                                            XMLLINT<span class="o">(</span>1<span class="o">)</span>

NAME
       xmllint - <span class="nb">command</span> line XML tool

SYNOPSIS
       xmllint <span class="o">[</span>--version <span class="p">|</span> --debug <span class="p">|</span> --shell <span class="p">|</span> --xpath <span class="s2">&#34;XPath_expression&#34;</span> <span class="p">|</span> --debugent <span class="p">|</span> --copy <span class="p">|</span> --recover <span class="p">|</span> --noent <span class="p">|</span> --noout <span class="p">|</span> --nonet <span class="p">|</span>
               --path <span class="s2">&#34;PATH(S)&#34;</span> <span class="p">|</span> --load-trace <span class="p">|</span> --htmlout <span class="p">|</span> --nowrap <span class="p">|</span> --valid <span class="p">|</span> --postvalid <span class="p">|</span> --dtdvalid URL <span class="p">|</span> --dtdvalidfpi FPI <span class="p">|</span> --timing <span class="p">|</span>
               --output FILE <span class="p">|</span> --repeat <span class="p">|</span> --insert <span class="p">|</span> --compress <span class="p">|</span> --html <span class="p">|</span> --xmlout <span class="p">|</span> --push <span class="p">|</span> --memory <span class="p">|</span> --maxmem NBBYTES <span class="p">|</span> --nowarning <span class="p">|</span> --noblanks <span class="p">|</span>
               --nocdata <span class="p">|</span> --format <span class="p">|</span> --encode ENCODING <span class="p">|</span> --dropdtd <span class="p">|</span> --nsclean <span class="p">|</span> --testIO <span class="p">|</span> --catalogs <span class="p">|</span> --nocatalogs <span class="p">|</span> --auto <span class="p">|</span> --xinclude <span class="p">|</span>
               --noxincludenode <span class="p">|</span> --loaddtd <span class="p">|</span> --dtdattr <span class="p">|</span> --stream <span class="p">|</span> --walker <span class="p">|</span> --pattern PATTERNVALUE <span class="p">|</span> --chkregister <span class="p">|</span> --relaxng SCHEMA <span class="p">|</span> --schema SCHEMA
               <span class="p">|</span> --c14n<span class="o">]</span> <span class="o">{</span>XML-FILE<span class="o">(</span>S<span class="o">)</span>... <span class="p">|</span> -<span class="o">}</span>

       xmllint --help

DESCRIPTION
       The xmllint program parses one or more XML files, specified on the <span class="nb">command</span> line as XML-FILE <span class="o">(</span>or the standard input <span class="k">if</span> the filename provided is - <span class="o">)</span>.
       It prints various types of output, depending upon the options selected. It is useful <span class="k">for</span> detecting errors both in XML code and in the XML parser itself.

       xmllint is included in libxml<span class="o">(</span>3<span class="o">)</span>.

OPTIONS
       xmllint accepts the following options <span class="o">(</span>in alphabetical order<span class="o">)</span>:

       --auto
           Generate a small document <span class="k">for</span> testing purposes.

       --catalogs
           Use the SGML catalog<span class="o">(</span>s<span class="o">)</span> from SGML_CATALOG_FILES. Otherwise XML catalogs starting from /etc/xml/catalog are used by default.

       --chkregister
           Turn on node registration. Useful <span class="k">for</span> developers testing libxml<span class="o">(</span>3<span class="o">)</span> node tracking code.

       --compress
           Turn on gzip<span class="o">(</span>1<span class="o">)</span> compression of output.

       --copy
           Test the internal copy implementation.

       --c14n
           Use the W3C XML Canonicalisation <span class="o">(</span>C14N<span class="o">)</span> to serialize the result of parsing to stdout. It keeps comments in the result.

       --dtdvalid URL
           Use the DTD specified by an URL <span class="k">for</span> validation.

       --dtdvalidfpi FPI
           Use the DTD specified by a Formal Public Identifier FPI <span class="k">for</span> validation, note that this will require a catalog exporting that Formal Public Identifier to work.

       --debug
           Parse a file and output an annotated tree of the in-memory version of the document.

       --debugent
           Debug the entities defined in the document.

       --dropdtd
           Remove DTD from output.

       --dtdattr
           Fetch external DTD and populate the tree with inherited attributes.

       --encode ENCODING
           Output in the given encoding. Note that this works <span class="k">for</span> full document not fragments or result from XPath queries.

       --format
           Reformat and reindent the output. The XMLLINT_INDENT environment variable controls the indentation. The default value is two spaces <span class="s2">&#34; &#34;</span><span class="o">)</span>.

       --help
           Print out a short usage summary <span class="k">for</span> xmllint.

       --html
           Use the HTML parser.

       --htmlout
           Output results as an HTML file. 
           This causes xmllint to output the necessary HTML tags surrounding the result tree output so the results can be displayed/viewed in a browser.

       --insert
           Test <span class="k">for</span> valid insertions.

       --loaddtd
           Fetch an external DTD.

       --load-trace
           Display all the documents loaded during the processing to stderr.

       --maxmem NNBYTES
           Test the parser memory support.  
           NNBYTES is the maximum number of bytes the library is allowed to allocate. 
           This can also be used to make sure batch processing of XML files will not exhaust the virtual memory of the server running them.

       --memory
           Parse from memory.

       --noblanks
           Drop ignorable blank spaces.

       --nocatalogs
           Do not use any catalogs.

       --nocdata
           Substitute CDATA section by equivalent text nodes.

       --noent
           Substitute entity values <span class="k">for</span> entity references. By default, xmllint leaves entity references in place.

       --nonet
           Do not use the Internet to fetch DTDs or entities.

       --noout
           Suppress output. By default, xmllint outputs the result tree.

       --nowarning
           Do not emit warnings from the parser and/or validator.

       --nowrap
           Do not output HTML doc wrapper.

       --noxincludenode
           Do XInclude processing but <span class="k">do</span> not generate XInclude start and end nodes.

       --nsclean
           Remove redundant namespace declarations.

       --output FILE
           Define a file path where xmllint will save the result of parsing. 
           Usually the programs build a tree and save it on stdout, with this option the result XML instance will be saved onto a file.

       --path <span class="s2">&#34;PATH(S)&#34;</span>
           Use the <span class="o">(</span>space- or colon-separated<span class="o">)</span> list of filesystem paths specified by PATHS to load DTDs or entities. 
           Enclose space-separated lists by quotation marks.

       --pattern PATTERNVALUE
           Used to exercise the pattern recognition engine, which can be used with the reader interface to the parser. 
           It allows to <span class="k">select</span> some nodes in the document based on an XPath <span class="o">(</span>subset<span class="o">)</span> expression. Used <span class="k">for</span> debugging.

       --postvalid
           Validate after parsing has completed.

       --push
           Use the push mode of the parser.

       --recover
           Output any parsable portions of an invalid document.

       --relaxng SCHEMA
           Use RelaxNG file named SCHEMA <span class="k">for</span> validation.

       --repeat
           Repeat <span class="m">100</span> times, <span class="k">for</span> timing or profiling.

       --schema SCHEMA
           Use a W3C XML Schema file named SCHEMA <span class="k">for</span> validation.

       --shell
           Run a navigating shell. Details on available commands in shell mode are below <span class="o">(</span>see the section called <span class="s2">&#34;SHELL COMMANDS&#34;</span><span class="o">)</span>.

       --xpath <span class="s2">&#34;XPath_expression&#34;</span>
           Run an XPath expression given as argument and print the result. 
           In <span class="k">case</span> of a nodeset result, each node in the node <span class="nb">set</span> is serialized in full in the output. 
           In <span class="k">case</span> of an empty node <span class="nb">set</span> the <span class="s2">&#34;XPath set is empty&#34;</span> result will be shown and an error <span class="nb">exit</span> code will be returned.

       --stream
           Use streaming API - useful when used in combination with --relaxng or --valid options <span class="k">for</span> validation of files that are too large to be held in memory.

       --testIO
           Test user input/output support.

       --timing
           Output information about the <span class="nb">time</span> it takes xmllint to perform the various steps.

       --valid
           Determine <span class="k">if</span> the document is a valid instance of the included Document Type Definition <span class="o">(</span>DTD<span class="o">)</span>. 
           A DTD to be validated against also can be specified at the <span class="nb">command</span> line using the --dtdvalid option. 
           By default, xmllint also checks to determine <span class="k">if</span> the document is well-formed.

       --version
           Display the version of libxml<span class="o">(</span>3<span class="o">)</span> used.

       --walker
           Test the walker module, which is a reader interface but <span class="k">for</span> a document tree, instead of using the reader API on an unparsed document it works on an existing in-memory tree. 
           Used <span class="k">for</span> debugging.

       --xinclude
           Do XInclude processing.

       --xmlout
           Used in conjunction with --html. 
           Usually when HTML is parsed the document is saved with the HTML serializer. 
           But with this option the resulting document is saved with the XML serializer. 
           This is primarily used to generate XHTML from HTML input.

SHELL COMMANDS
       xmllint offers an interactive shell mode invoked with the --shell command. Available commands in shell mode include <span class="o">(</span>in alphabetical order<span class="o">)</span>:

       base
           Display XML base of the node.

       bye
           Leave the shell.

       cat NODE
           Display the given node or the current one.

       <span class="nb">cd</span> PATH
           Change the current node to the given path <span class="o">(</span><span class="k">if</span> unique<span class="o">)</span> or root <span class="k">if</span> no argument is given.

       dir PATH
           Dumps information about the node <span class="o">(</span>namespace, attributes, content<span class="o">)</span>.

       du PATH
           Show the structure of the subtree under the given path or the current node.

       <span class="nb">exit</span>
           Leave the shell.

       <span class="nb">help</span>
           Show this help.

       free
           Display memory usage.

       load FILENAME
           Load a new document with the given filename.

       ls PATH
           List contents of the given path or the current directory.

       <span class="nb">pwd</span>
           Display the path to the current node.

       quit
           Leave the shell.

       save FILENAME
           Save the current document to the given filename or to the original name.

       validate
           Check the document <span class="k">for</span> errors.

       write FILENAME
           Write the current node to the given filename.

ENVIRONMENT
       SGML_CATALOG_FILES
           SGML catalog behavior can be changed by redirecting queries to the user<span class="s1">&#39;s own set of catalogs. 
</span><span class="s1">           This can be done by setting the SGML_CATALOG_FILES environment variable to a list of catalogs. 
</span><span class="s1">           An empty one should deactivate loading the default /etc/sgml/catalog catalog.
</span><span class="s1">
</span><span class="s1">       XML_CATALOG_FILES
</span><span class="s1">           XML catalog behavior can be changed by redirecting queries to the user&#39;</span>s own <span class="nb">set</span> of catalogs. 
           This can be <span class="k">done</span> by setting the XML_CATALOG_FILES environment variable to a list of catalogs. 
           An empty one should deactivate loading the default /etc/xml/catalog catalog.

       XML_DEBUG_CATALOG
           Setting the environment variable XML_DEBUG_CATALOG to non-zero using the <span class="nb">export</span> <span class="nb">command</span> outputs debugging information related to catalog operations.

       XMLLINT_INDENT
           Setting the environment variable XMLLINT_INDENT controls the indentation. The default value is two spaces <span class="s2">&#34; &#34;</span>.

DIAGNOSTICS
       xmllint <span class="k">return</span> codes provide information that can be used when calling it from scripts.

       <span class="m">0</span>
           No error

       <span class="m">1</span>
           Unclassified

       <span class="m">2</span>
           Error in DTD

       <span class="m">3</span>
           Validation error

       <span class="m">4</span>
           Validation error

       <span class="m">5</span>
           Error in schema compilation

       <span class="m">6</span>
           Error writing output

       <span class="m">7</span>
           Error in pattern <span class="o">(</span>generated when --pattern option is used<span class="o">)</span>

       <span class="m">8</span>
           Error in Reader registration <span class="o">(</span>generated when --chkregister option is used<span class="o">)</span>

       <span class="m">9</span>
           Out of memory error

SEE ALSO
       libxml<span class="o">(</span>3<span class="o">)</span>

       More information can be found at

       o   libxml<span class="o">(</span>3<span class="o">)</span> web page http://www.xmlsoft.org/

       o   W3C XSLT page http://www.w3.org/TR/xslt

AUTHORS
       John Fleck &lt;jfleck@inkstain.net&gt;
           Author.

       Ziying Sherwin &lt;sherwin@nlm.nih.gov&gt;
           Author.

       Heiko Rupp &lt;hwr@pilhuhn.de&gt;
           Author.

COPYRIGHT
       Copyright <span class="o">(</span>C<span class="o">)</span> 2001, <span class="m">2004</span>

libxml2                                                                    <span class="nv">$Date</span>$                                                                XMLLINT<span class="o">(</span>1<span class="o">)</span>
</code></pre></div><h2 id="実行例">実行例</h2>
<ul>
<li><a href="https://samltool.io/">https://samltool.io/</a> で公開されている SAML レスポンスを <code>saml.xml</code> として保存</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh">% xmllint --format ./saml.xml 
&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">&#34;1.0&#34;</span>?&gt;
&lt;samlp:Response xmlns:samlp<span class="o">=</span><span class="s2">&#34;urn:oasis:names:tc:SAML:2.0:protocol&#34;</span> <span class="nv">ID</span><span class="o">=</span><span class="s2">&#34;_621c4c4ae5d60c768cc2&#34;</span> <span class="nv">Version</span><span class="o">=</span><span class="s2">&#34;2.0&#34;</span> <span class="nv">IssueInstant</span><span class="o">=</span><span class="s2">&#34;2014-10-14T14:32:17Z&#34;</span> <span class="nv">Destination</span><span class="o">=</span><span class="s2">&#34;https://app.auth0.com/tester/samlp&#34;</span>&gt;
  &lt;saml:Issuer xmlns:saml<span class="o">=</span><span class="s2">&#34;urn:oasis:names:tc:SAML:2.0:assertion&#34;</span>&gt;urn:matugit.auth0.com&lt;/saml:Issuer&gt;
  &lt;samlp:Status&gt;
    &lt;samlp:StatusCode <span class="nv">Value</span><span class="o">=</span><span class="s2">&#34;urn:oasis:names:tc:SAML:2.0:status:Success&#34;</span>/&gt;
  &lt;/samlp:Status&gt;
  &lt;saml:Assertion xmlns:saml<span class="o">=</span><span class="s2">&#34;urn:oasis:names:tc:SAML:2.0:assertion&#34;</span> <span class="nv">Version</span><span class="o">=</span><span class="s2">&#34;2.0&#34;</span> <span class="nv">ID</span><span class="o">=</span><span class="s2">&#34;_5VK7LT7FliUkkaQuW6r4brF0DG5E3X76&#34;</span> <span class="nv">IssueInstant</span><span class="o">=</span><span class="s2">&#34;2014-10-14T14:32:17.251Z&#34;</span>&gt;
    &lt;saml:Issuer&gt;urn:matugit.auth0.com&lt;/saml:Issuer&gt;
    &lt;Signature <span class="nv">xmlns</span><span class="o">=</span><span class="s2">&#34;http://www.w3.org/2000/09/xmldsig#&#34;</span>&gt;
      &lt;SignedInfo&gt;
        &lt;CanonicalizationMethod <span class="nv">Algorithm</span><span class="o">=</span><span class="s2">&#34;http://www.w3.org/2001/10/xml-exc-c14n#&#34;</span>/&gt;
        &lt;SignatureMethod <span class="nv">Algorithm</span><span class="o">=</span><span class="s2">&#34;http://www.w3.org/2000/09/xmldsig#rsa-sha1&#34;</span>/&gt;
        &lt;Reference <span class="nv">URI</span><span class="o">=</span><span class="s2">&#34;#_5VK7LT7FliUkkaQuW6r4brF0DG5E3X76&#34;</span>&gt;
          &lt;Transforms&gt;
            &lt;Transform <span class="nv">Algorithm</span><span class="o">=</span><span class="s2">&#34;http://www.w3.org/2000/09/xmldsig#enveloped-signature&#34;</span>/&gt;
            &lt;Transform <span class="nv">Algorithm</span><span class="o">=</span><span class="s2">&#34;http://www.w3.org/2001/10/xml-exc-c14n#&#34;</span>/&gt;
          &lt;/Transforms&gt;
          &lt;DigestMethod <span class="nv">Algorithm</span><span class="o">=</span><span class="s2">&#34;http://www.w3.org/2000/09/xmldsig#sha1&#34;</span>/&gt;
          &lt;DigestValue&gt;ZDkfGO3H1Tu50hawzQVjsACzJwc<span class="o">=</span>&lt;/DigestValue&gt;
        &lt;/Reference&gt;
      &lt;/SignedInfo&gt;
      &lt;SignatureValue&gt;1Fgpt7AaHcME2gTA158achvGQVqDwHSHsHF3/a5s7djeO1AaZ84Gz5eiWD+cdIz6hoT1j2v/7Qtfj5bsMNxulBnSzfL4TT4++AK/zFO4ad2mwABFjMMNiogwwT3tzy3aRwjgSfl3VKESoz3Zp8KL/JNm/TRKz95TD7H6WnfKZoLwErGzNw6gVs1y9XYxIEg46GzUb07g23TFmrv3wHlx2TpKUN/ne4Z28KAQzXqVyykJVaKQ/gbBNC/8AQKlol8fLGSheOKQ0vgEE1vFnVVCEmp30YapdKeWW2qcqHb7Oqdm+9b2mOUkqbaxH5ixBbYaqZaQCt5WF4P5BxnMe4Bp8w<span class="o">==</span>&lt;/SignatureValue&gt;
      &lt;KeyInfo&gt;
        &lt;X509Data&gt;
          &lt;X509Certificate&gt;MIIDODCCAiCgAwIBAgIJAN7O9hef05RJMA0GCSqGSIb3DQEBBQUAMBwxGjAYBgNVBAMTEW1hdHVnaXQuYXV0aDAuY29tMB4XDTEzMDYxNjEzMjQwNloXDTI3MDIyMzEzMjQwNlowHDEaMBgGA1UEAxMRbWF0dWdpdC5hdXRoMC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQD8kEfEcLiyMK0q4E4xT/mglcXsf9oCWdTjB0vswFXQPCDgUk5daJmO4oRrCIuWgtChDyMc5M5MTexqrCntQlKpnexkzDxCvPX/IRJstjJDSH+WXljRYDbXTgAZAjjjAKqDBIeUWaw1FcUy3SOmQVtyUdfjXNqLzxKS8SUWYY3Ia6PT/uoUjUFmUuJEFpBlB79GW+Tv/ZidY53gHyhEYOBzm1vKZS1vtPfxxpBqu7Vkf+5lq3RYjuoVUYN03TIJveaa7BBL0je8z7UvvOGgrGuodSKHneq7ueex4OCscCJZbK7MlfbmFiuSniVCg/yMrx/okDme38sOXH1A/zJu2lYpAgMBAAGjfTB7MB0GA1UdDgQWBBQL3cuDXNXu4USrpv44dzfGyHIXDTBMBgNVHSMERTBDgBQL3cuDXNXu4USrpv44dzfGyHIXDaEgpB4wHDEaMBgGA1UEAxMRbWF0dWdpdC5hdXRoMC5jb22CCQDezvYXn9OUSTAMBgNVHRMEBTADAQH/MA0GCSqGSIb3DQEBBQUAA4IBAQCAtAmKHoX7OerzFUQ0Ojrg9C1uzT6fOLIlXyaDswk2tLE6ftFhSiVzT1TtgTFv2o6IA47tW6bqL7t6Z5JN/L8cno+kxeKOgPz2CvbUTJmtROvFV/TDkFsYmFJZ8+6nZOAtXRZPWFpa6KE4Lc5+7J94sX2AiYPFCnXRvZGMhJ6qtc+jh54QEIlxZtkxWUBGs2fhOQm+Ux0uy1qxSzhp3lmvNa79KdvmQirSitDovyidalpwX750WGNfQoISe94e3clWa4uKXgZ7AYmhd1w4kNs7seFdtvCcqQJrKYT2cBTINztL6SeqeF/xC//lGDo9UJic4pcrqj1P3WGHYIslOWBQ&lt;/X509Certificate&gt;
        &lt;/X509Data&gt;
      &lt;/KeyInfo&gt;
    &lt;/Signature&gt;
    &lt;saml:Subject&gt;
      &lt;saml:NameID <span class="nv">Format</span><span class="o">=</span><span class="s2">&#34;urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified&#34;</span>&gt;github<span class="p">|</span>175880&lt;/saml:NameID&gt;
      &lt;saml:SubjectConfirmation <span class="nv">Method</span><span class="o">=</span><span class="s2">&#34;urn:oasis:names:tc:SAML:2.0:cm:bearer&#34;</span>&gt;
        &lt;saml:SubjectConfirmationData <span class="nv">NotOnOrAfter</span><span class="o">=</span><span class="s2">&#34;2014-10-14T15:32:17.251Z&#34;</span> <span class="nv">Recipient</span><span class="o">=</span><span class="s2">&#34;https://app.auth0.com/tester/samlp&#34;</span>/&gt;
      &lt;/saml:SubjectConfirmation&gt;
    &lt;/saml:Subject&gt;
    &lt;saml:Conditions <span class="nv">NotBefore</span><span class="o">=</span><span class="s2">&#34;2014-10-14T14:32:17.251Z&#34;</span> <span class="nv">NotOnOrAfter</span><span class="o">=</span><span class="s2">&#34;2014-10-14T15:32:17.251Z&#34;</span>&gt;
      &lt;saml:AudienceRestriction&gt;
        &lt;saml:Audience&gt;urn:foo&lt;/saml:Audience&gt;
      &lt;/saml:AudienceRestriction&gt;
    &lt;/saml:Conditions&gt;
    &lt;saml:AttributeStatement xmlns:xs<span class="o">=</span><span class="s2">&#34;http://www.w3.org/2001/XMLSchema&#34;</span> xmlns:xsi<span class="o">=</span><span class="s2">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>&gt;
      &lt;saml:Attribute <span class="nv">Name</span><span class="o">=</span><span class="s2">&#34;http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier&#34;</span>&gt;
        &lt;saml:AttributeValue xsi:type<span class="o">=</span><span class="s2">&#34;xs:anyType&#34;</span>&gt;github<span class="p">|</span>175880&lt;/saml:AttributeValue&gt;
      &lt;/saml:Attribute&gt;
      &lt;saml:Attribute <span class="nv">Name</span><span class="o">=</span><span class="s2">&#34;http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress&#34;</span>&gt;
        &lt;saml:AttributeValue xsi:type<span class="o">=</span><span class="s2">&#34;xs:anyType&#34;</span>&gt;matiasw@gmail.com&lt;/saml:AttributeValue&gt;
      &lt;/saml:Attribute&gt;
      &lt;saml:Attribute <span class="nv">Name</span><span class="o">=</span><span class="s2">&#34;http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name&#34;</span>&gt;
        &lt;saml:AttributeValue xsi:type<span class="o">=</span><span class="s2">&#34;xs:anyType&#34;</span>&gt;Matias Woloski&lt;/saml:AttributeValue&gt;
      &lt;/saml:Attribute&gt;
      &lt;saml:Attribute <span class="nv">Name</span><span class="o">=</span><span class="s2">&#34;http://schemas.xmlsoap.org/ws/2005/05/identity/claims/upn&#34;</span>&gt;
        &lt;saml:AttributeValue xsi:type<span class="o">=</span><span class="s2">&#34;xs:anyType&#34;</span>&gt;matiasw@gmail.com&lt;/saml:AttributeValue&gt;
      &lt;/saml:Attribute&gt;
      &lt;saml:Attribute <span class="nv">Name</span><span class="o">=</span><span class="s2">&#34;http://schemas.auth0.com/identities/default/access_token&#34;</span>&gt;
        &lt;saml:AttributeValue xsi:type<span class="o">=</span><span class="s2">&#34;xs:anyType&#34;</span>&gt;3a7d0dfeffe12812c37112daa830abef570089b4&lt;/saml:AttributeValue&gt;
      &lt;/saml:Attribute&gt;
      &lt;saml:Attribute <span class="nv">Name</span><span class="o">=</span><span class="s2">&#34;http://schemas.auth0.com/identities/default/provider&#34;</span>&gt;
        &lt;saml:AttributeValue xsi:type<span class="o">=</span><span class="s2">&#34;xs:anyType&#34;</span>&gt;github&lt;/saml:AttributeValue&gt;
      &lt;/saml:Attribute&gt;
      &lt;saml:Attribute <span class="nv">Name</span><span class="o">=</span><span class="s2">&#34;http://schemas.auth0.com/identities/default/connection&#34;</span>&gt;
        &lt;saml:AttributeValue xsi:type<span class="o">=</span><span class="s2">&#34;xs:anyType&#34;</span>&gt;github&lt;/saml:AttributeValue&gt;
      &lt;/saml:Attribute&gt;
      &lt;saml:Attribute <span class="nv">Name</span><span class="o">=</span><span class="s2">&#34;http://schemas.auth0.com/identities/default/isSocial&#34;</span>&gt;
        &lt;saml:AttributeValue xsi:type<span class="o">=</span><span class="s2">&#34;xs:anyType&#34;</span>&gt;true&lt;/saml:AttributeValue&gt;
      &lt;/saml:Attribute&gt;
    &lt;/saml:AttributeStatement&gt;
    &lt;saml:AuthnStatement <span class="nv">AuthnInstant</span><span class="o">=</span><span class="s2">&#34;2014-10-14T14:32:17.251Z&#34;</span>&gt;
      &lt;saml:AuthnContext&gt;
        &lt;saml:AuthnContextClassRef&gt;urn:oasis:names:tc:SAML:2.0:ac:classes:unspecified&lt;/saml:AuthnContextClassRef&gt;
      &lt;/saml:AuthnContext&gt;
    &lt;/saml:AuthnStatement&gt;
  &lt;/saml:Assertion&gt;
&lt;/samlp:Response&gt;
</code></pre></div><h2 id="この記事を試した環境">この記事を試した環境</h2>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh">% sw_vers
ProductName:    Mac OS X
ProductVersion: 10.15.7
BuildVersion:   19H114
% xmllint --version
xmllint: using libxml version <span class="m">20904</span>
   compiled with: Threads Tree Output Push Reader Patterns Writer SAXv1 FTP HTTP DTDValid HTML Legacy C14N Catalog XPath XPointer XInclude ICU ISO8859X Unicode Regexps Automata Expr Schemas Schematron Modules Debug Zlib 
</code></pre></div>]]></content>
		</item>
		
		<item>
			<title>tidy コマンドで XML を整形して出力する</title>
			<link>https://noid11.github.io/posts/pretty-print-xml-by-tidy/</link>
			<pubDate>Thu, 21 Jan 2021 09:58:15 +0900</pubDate>
			
			<guid>https://noid11.github.io/posts/pretty-print-xml-by-tidy/</guid>
			<description>&lt;p&gt;XML をファイルとして保存して、 &lt;code&gt;-xml&lt;/code&gt;, &lt;code&gt;-indent&lt;/code&gt; オプションで整形できる&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;tidy -xml -indent ./myfile.xml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
			<content type="html"><![CDATA[<p>XML をファイルとして保存して、 <code>-xml</code>, <code>-indent</code> オプションで整形できる</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tidy -xml -indent ./myfile.xml
</code></pre></div><h2 id="-xml-オプション"><code>-xml</code> オプション</h2>
<ul>
<li>input するファイルのフォーマットが XML であることを指定</li>
</ul>
<h2 id="-indent-オプション"><code>-indent</code> オプション</h2>
<ul>
<li>各要素をインデントして出力する</li>
</ul>
<h2 id="manual">manual</h2>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh">TIDY<span class="o">(</span>1<span class="o">)</span>                                                                                                                                             TIDY<span class="o">(</span>1<span class="o">)</span>

NAME
       tidy - validate, correct, and pretty-print HTML files

SYNOPSIS
       tidy <span class="o">[</span>option ...<span class="o">]</span> <span class="o">[</span>file ...<span class="o">]</span> <span class="o">[</span>option ...<span class="o">]</span> <span class="o">[</span>file ...<span class="o">]</span>

DESCRIPTION
       Tidy  reads HTML, XHTML and XML files and writes cleaned up markup.  
       For HTML varians, it detects and corrects many common coding errors and strives to produce visually equivalent markup that is both W3C complaint and works on most browsers.  
       A common use of Tidy is to convert plain HTML to XHTML.  
       For generic XML files, Tidy is limited to correcting basic well-formedness errors and pretty printing.

       If no markup file is specified, Tidy reads the standard input.  
       If no output file is specified, Tidy writes markup to the standard output.  
       If no error file is specified, Tidy writes messages to the standard error.

OPTIONS
       Processing directives

       -indent or -i  to indent element content

       -omit          to omit optional end tags

       -wrap &lt;column&gt; to wrap text at the specified &lt;column&gt; <span class="o">(</span>default is 68<span class="o">)</span>

       -upper or -u   to force tags to upper <span class="k">case</span> <span class="o">(</span>default is lower <span class="k">case</span><span class="o">)</span>

       -clean or -c   to replace FONT, NOBR and CENTER tags by CSS

       -bare or -b    to strip out smart quotes and em dashes, etc.

       -numeric or -n to output numeric rather than named entities

       -errors or -e  to only show errors

       -quiet or -q   to suppress nonessential output

       -xml           to specify the input is well formed XML

       -asxml         to convert HTML to well formed XHTML

       -asxhtml       to convert HTML to well formed XHTML

       -ashtml        to force XHTML to well formed HTML

       -access &lt;level&gt;
                      to <span class="k">do</span> additional accessibility checks <span class="o">(</span>&lt;level&gt; <span class="o">=</span> 1, 2, 3<span class="o">)</span>

       Character encodings

       -raw           to output values above <span class="m">127</span> without conversion to entities

       -ascii         to use US-ASCII <span class="k">for</span> output, ISO-8859-1 <span class="k">for</span> input

       -latin1        to use ISO-8859-1 <span class="k">for</span> both input and output

       -iso2022       to use ISO-2022 <span class="k">for</span> both input and output

       -utf8          to use UTF-8 <span class="k">for</span> both input and output

       -mac           to use MacRoman <span class="k">for</span> input, US-ASCII <span class="k">for</span> output

       -utf16le       to use UTF-16LE <span class="k">for</span> both input and output

       -utf16be       to use UTF-16BE <span class="k">for</span> both input and output

       -utf16         to use UTF-16 <span class="k">for</span> both input and output

       -win1252       to use Windows-1252 <span class="k">for</span> input, US-ASCII <span class="k">for</span> output

       -big5          to use Big5 <span class="k">for</span> both input and output

       -shiftjis      to use Shift_JIS <span class="k">for</span> both input and output

       -language &lt;lang&gt;
                      to <span class="nb">set</span> the two-letter language code &lt;lang&gt; <span class="o">(</span><span class="k">for</span> future use<span class="o">)</span>

       File manipulation

       -output or -o &lt;file&gt;
                      to write output to the specified &lt;file&gt;

       -f &lt;file&gt;      to write errors to the specified &lt;file&gt;

       -config &lt;file&gt; to <span class="nb">set</span> configuration options from the specified &lt;file&gt;

       -modify or -m  to modify the original input files

       Miscellaneous

       -version or -v to show the version of Tidy

       -help, -h or -?
                      to list the <span class="nb">command</span> line options

       -help-config   to list all configuration options

       -show-config   to list the current configuration settings


USAGE
       Use --blah blarg <span class="k">for</span> any configuration option <span class="s2">&#34;blah&#34;</span> with argument <span class="s2">&#34;blarg&#34;</span>

       Input/Output default to stdin/stdout respectively Single letter options apart from -f and -o may be combined as in:  tidy -f errs.txt -imu  foo.html
       For further info on HTML see http://www.w3.org/MarkUp

       For more information about HTML Tidy, visit the project home page at http://tidy.sourceforge.net.  Here, you will find links to documentation, mail-
       ing lists <span class="o">(</span>with searchable archives<span class="o">)</span> and links to report bugs.

ENVIRONMENT
       HTML_TIDY      Name of the default configuration file.  This should be an absolute path, since you will probably invoke tidy from different directo-
                      ries.   The value of HTML_TIDY will be parsed after the compiled-in default <span class="o">(</span>defined with -DCONFIG_FILE<span class="o">)</span>, but before any of the files
                      specified using -config.

EXIT STATUS
       <span class="m">0</span>      All input files were processed successfully.

       <span class="m">1</span>      There were warnings.

       <span class="m">2</span>      There were errors.

SEE ALSO
       HTML Tidy Project Page at http://tidy.sourceforge.net

       Dave Raggett<span class="err">&#39;</span>s Tidy Overview at http://www.w3.org/People/Raggett/tidy/

       Tidy Quick Reference at http://tidy.sourceforge.net/docs/quickref.html

       For information about TidyLib, see http://tidy.sourceforge.net/libintro.html

AUTHORS
       Dave Raggett &lt;dsr@w3.org&gt;.

       Terry Teague &lt;terry_teague@users.sourceforge.net&gt;.

       Bjoern Hoehrmann &lt;bjoern@hoehrmann.de&gt;

       Charles Reitzel &lt;creitzel@rcn.com&gt;

       This manual page was written by Matej Vela &lt;vela@debian.org&gt; and updated by Charles Reitzel.

                                                                      December 1, <span class="m">2002</span>                                                              TIDY<span class="o">(</span>1<span class="o">)</span>
</code></pre></div><h2 id="実行例">実行例</h2>
<ul>
<li><a href="https://samltool.io/">https://samltool.io/</a> で公開されている SAML レスポンスを <code>saml.xml</code> として保存</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh">% tidy -xml -indent ./saml.xml 
No warnings or errors were found.

&lt;samlp:Response xmlns:samlp<span class="o">=</span><span class="s2">&#34;urn:oasis:names:tc:SAML:2.0:protocol&#34;</span>
<span class="nv">ID</span><span class="o">=</span><span class="s2">&#34;_621c4c4ae5d60c768cc2&#34;</span> <span class="nv">Version</span><span class="o">=</span><span class="s2">&#34;2.0&#34;</span>
<span class="nv">IssueInstant</span><span class="o">=</span><span class="s2">&#34;2014-10-14T14:32:17Z&#34;</span>
<span class="nv">Destination</span><span class="o">=</span><span class="s2">&#34;https://app.auth0.com/tester/samlp&#34;</span>&gt;
  &lt;saml:Issuer xmlns:saml<span class="o">=</span><span class="s2">&#34;urn:oasis:names:tc:SAML:2.0:assertion&#34;</span>&gt;
  urn:matugit.auth0.com&lt;/saml:Issuer&gt;
  &lt;samlp:Status&gt;
    &lt;samlp:StatusCode <span class="nv">Value</span><span class="o">=</span><span class="s2">&#34;urn:oasis:names:tc:SAML:2.0:status:Success&#34;</span> /&gt;
  &lt;/samlp:Status&gt;
  &lt;saml:Assertion xmlns:saml<span class="o">=</span><span class="s2">&#34;urn:oasis:names:tc:SAML:2.0:assertion&#34;</span>
  <span class="nv">Version</span><span class="o">=</span><span class="s2">&#34;2.0&#34;</span> <span class="nv">ID</span><span class="o">=</span><span class="s2">&#34;_5VK7LT7FliUkkaQuW6r4brF0DG5E3X76&#34;</span>
  <span class="nv">IssueInstant</span><span class="o">=</span><span class="s2">&#34;2014-10-14T14:32:17.251Z&#34;</span>&gt;
    &lt;saml:Issuer&gt;urn:matugit.auth0.com&lt;/saml:Issuer&gt;
    &lt;Signature <span class="nv">xmlns</span><span class="o">=</span><span class="s2">&#34;http://www.w3.org/2000/09/xmldsig#&#34;</span>&gt;
      &lt;SignedInfo&gt;
        &lt;CanonicalizationMethod <span class="nv">Algorithm</span><span class="o">=</span><span class="s2">&#34;http://www.w3.org/2001/10/xml-exc-c14n#&#34;</span> /&gt;
        &lt;SignatureMethod <span class="nv">Algorithm</span><span class="o">=</span><span class="s2">&#34;http://www.w3.org/2000/09/xmldsig#rsa-sha1&#34;</span> /&gt;
        &lt;Reference <span class="nv">URI</span><span class="o">=</span><span class="s2">&#34;#_5VK7LT7FliUkkaQuW6r4brF0DG5E3X76&#34;</span>&gt;
          &lt;Transforms&gt;
            &lt;Transform <span class="nv">Algorithm</span><span class="o">=</span><span class="s2">&#34;http://www.w3.org/2000/09/xmldsig#enveloped-signature&#34;</span> /&gt;
            &lt;Transform <span class="nv">Algorithm</span><span class="o">=</span><span class="s2">&#34;http://www.w3.org/2001/10/xml-exc-c14n#&#34;</span> /&gt;
          &lt;/Transforms&gt;
          &lt;DigestMethod <span class="nv">Algorithm</span><span class="o">=</span><span class="s2">&#34;http://www.w3.org/2000/09/xmldsig#sha1&#34;</span> /&gt;
          &lt;DigestValue&gt;ZDkfGO3H1Tu50hawzQVjsACzJwc<span class="o">=</span>&lt;/DigestValue&gt;
        &lt;/Reference&gt;
      &lt;/SignedInfo&gt;
      &lt;SignatureValue&gt;
      1Fgpt7AaHcME2gTA158achvGQVqDwHSHsHF3/a5s7djeO1AaZ84Gz5eiWD+cdIz6hoT1j2v/7Qtfj5bsMNxulBnSzfL4TT4++AK/zFO4ad2mwABFjMMNiogwwT3tzy3aRwjgSfl3VKESoz3Zp8KL/JNm/TRKz95TD7H6WnfKZoLwErGzNw6gVs1y9XYxIEg46GzUb07g23TFmrv3wHlx2TpKUN/ne4Z28KAQzXqVyykJVaKQ/gbBNC/8AQKlol8fLGSheOKQ0vgEE1vFnVVCEmp30YapdKeWW2qcqHb7Oqdm+9b2mOUkqbaxH5ixBbYaqZaQCt5WF4P5BxnMe4Bp8w<span class="o">==</span>&lt;/SignatureValue&gt;
      &lt;KeyInfo&gt;
        &lt;X509Data&gt;
          &lt;X509Certificate&gt;
          MIIDODCCAiCgAwIBAgIJAN7O9hef05RJMA0GCSqGSIb3DQEBBQUAMBwxGjAYBgNVBAMTEW1hdHVnaXQuYXV0aDAuY29tMB4XDTEzMDYxNjEzMjQwNloXDTI3MDIyMzEzMjQwNlowHDEaMBgGA1UEAxMRbWF0dWdpdC5hdXRoMC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQD8kEfEcLiyMK0q4E4xT/mglcXsf9oCWdTjB0vswFXQPCDgUk5daJmO4oRrCIuWgtChDyMc5M5MTexqrCntQlKpnexkzDxCvPX/IRJstjJDSH+WXljRYDbXTgAZAjjjAKqDBIeUWaw1FcUy3SOmQVtyUdfjXNqLzxKS8SUWYY3Ia6PT/uoUjUFmUuJEFpBlB79GW+Tv/ZidY53gHyhEYOBzm1vKZS1vtPfxxpBqu7Vkf+5lq3RYjuoVUYN03TIJveaa7BBL0je8z7UvvOGgrGuodSKHneq7ueex4OCscCJZbK7MlfbmFiuSniVCg/yMrx/okDme38sOXH1A/zJu2lYpAgMBAAGjfTB7MB0GA1UdDgQWBBQL3cuDXNXu4USrpv44dzfGyHIXDTBMBgNVHSMERTBDgBQL3cuDXNXu4USrpv44dzfGyHIXDaEgpB4wHDEaMBgGA1UEAxMRbWF0dWdpdC5hdXRoMC5jb22CCQDezvYXn9OUSTAMBgNVHRMEBTADAQH/MA0GCSqGSIb3DQEBBQUAA4IBAQCAtAmKHoX7OerzFUQ0Ojrg9C1uzT6fOLIlXyaDswk2tLE6ftFhSiVzT1TtgTFv2o6IA47tW6bqL7t6Z5JN/L8cno+kxeKOgPz2CvbUTJmtROvFV/TDkFsYmFJZ8+6nZOAtXRZPWFpa6KE4Lc5+7J94sX2AiYPFCnXRvZGMhJ6qtc+jh54QEIlxZtkxWUBGs2fhOQm+Ux0uy1qxSzhp3lmvNa79KdvmQirSitDovyidalpwX750WGNfQoISe94e3clWa4uKXgZ7AYmhd1w4kNs7seFdtvCcqQJrKYT2cBTINztL6SeqeF/xC//lGDo9UJic4pcrqj1P3WGHYIslOWBQ&lt;/X509Certificate&gt;
        &lt;/X509Data&gt;
      &lt;/KeyInfo&gt;
    &lt;/Signature&gt;
    &lt;saml:Subject&gt;
      &lt;saml:NameID <span class="nv">Format</span><span class="o">=</span><span class="s2">&#34;urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified&#34;</span>&gt;
      github<span class="p">|</span>175880&lt;/saml:NameID&gt;
      &lt;saml:SubjectConfirmation <span class="nv">Method</span><span class="o">=</span><span class="s2">&#34;urn:oasis:names:tc:SAML:2.0:cm:bearer&#34;</span>&gt;

        &lt;saml:SubjectConfirmationData <span class="nv">NotOnOrAfter</span><span class="o">=</span><span class="s2">&#34;2014-10-14T15:32:17.251Z&#34;</span>
        <span class="nv">Recipient</span><span class="o">=</span><span class="s2">&#34;https://app.auth0.com/tester/samlp&#34;</span> /&gt;
      &lt;/saml:SubjectConfirmation&gt;
    &lt;/saml:Subject&gt;
    &lt;saml:Conditions <span class="nv">NotBefore</span><span class="o">=</span><span class="s2">&#34;2014-10-14T14:32:17.251Z&#34;</span>
    <span class="nv">NotOnOrAfter</span><span class="o">=</span><span class="s2">&#34;2014-10-14T15:32:17.251Z&#34;</span>&gt;
      &lt;saml:AudienceRestriction&gt;
        &lt;saml:Audience&gt;urn:foo&lt;/saml:Audience&gt;
      &lt;/saml:AudienceRestriction&gt;
    &lt;/saml:Conditions&gt;
    &lt;saml:AttributeStatement xmlns:xs<span class="o">=</span><span class="s2">&#34;http://www.w3.org/2001/XMLSchema&#34;</span>
    xmlns:xsi<span class="o">=</span><span class="s2">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>&gt;
      &lt;saml:Attribute <span class="nv">Name</span><span class="o">=</span><span class="s2">&#34;http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier&#34;</span>&gt;

        &lt;saml:AttributeValue xsi:type<span class="o">=</span><span class="s2">&#34;xs:anyType&#34;</span>&gt;
        github<span class="p">|</span>175880&lt;/saml:AttributeValue&gt;
      &lt;/saml:Attribute&gt;
      &lt;saml:Attribute <span class="nv">Name</span><span class="o">=</span><span class="s2">&#34;http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress&#34;</span>&gt;

        &lt;saml:AttributeValue xsi:type<span class="o">=</span><span class="s2">&#34;xs:anyType&#34;</span>&gt;
        matiasw@gmail.com&lt;/saml:AttributeValue&gt;
      &lt;/saml:Attribute&gt;
      &lt;saml:Attribute <span class="nv">Name</span><span class="o">=</span><span class="s2">&#34;http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name&#34;</span>&gt;

        &lt;saml:AttributeValue xsi:type<span class="o">=</span><span class="s2">&#34;xs:anyType&#34;</span>&gt;Matias
        Woloski&lt;/saml:AttributeValue&gt;
      &lt;/saml:Attribute&gt;
      &lt;saml:Attribute <span class="nv">Name</span><span class="o">=</span><span class="s2">&#34;http://schemas.xmlsoap.org/ws/2005/05/identity/claims/upn&#34;</span>&gt;

        &lt;saml:AttributeValue xsi:type<span class="o">=</span><span class="s2">&#34;xs:anyType&#34;</span>&gt;
        matiasw@gmail.com&lt;/saml:AttributeValue&gt;
      &lt;/saml:Attribute&gt;
      &lt;saml:Attribute <span class="nv">Name</span><span class="o">=</span><span class="s2">&#34;http://schemas.auth0.com/identities/default/access_token&#34;</span>&gt;

        &lt;saml:AttributeValue xsi:type<span class="o">=</span><span class="s2">&#34;xs:anyType&#34;</span>&gt;
        3a7d0dfeffe12812c37112daa830abef570089b4&lt;/saml:AttributeValue&gt;
      &lt;/saml:Attribute&gt;
      &lt;saml:Attribute <span class="nv">Name</span><span class="o">=</span><span class="s2">&#34;http://schemas.auth0.com/identities/default/provider&#34;</span>&gt;

        &lt;saml:AttributeValue xsi:type<span class="o">=</span><span class="s2">&#34;xs:anyType&#34;</span>&gt;
        github&lt;/saml:AttributeValue&gt;
      &lt;/saml:Attribute&gt;
      &lt;saml:Attribute <span class="nv">Name</span><span class="o">=</span><span class="s2">&#34;http://schemas.auth0.com/identities/default/connection&#34;</span>&gt;

        &lt;saml:AttributeValue xsi:type<span class="o">=</span><span class="s2">&#34;xs:anyType&#34;</span>&gt;
        github&lt;/saml:AttributeValue&gt;
      &lt;/saml:Attribute&gt;
      &lt;saml:Attribute <span class="nv">Name</span><span class="o">=</span><span class="s2">&#34;http://schemas.auth0.com/identities/default/isSocial&#34;</span>&gt;

        &lt;saml:AttributeValue xsi:type<span class="o">=</span><span class="s2">&#34;xs:anyType&#34;</span>&gt;
        true&lt;/saml:AttributeValue&gt;
      &lt;/saml:Attribute&gt;
    &lt;/saml:AttributeStatement&gt;
    &lt;saml:AuthnStatement <span class="nv">AuthnInstant</span><span class="o">=</span><span class="s2">&#34;2014-10-14T14:32:17.251Z&#34;</span>&gt;
      &lt;saml:AuthnContext&gt;
        &lt;saml:AuthnContextClassRef&gt;
        urn:oasis:names:tc:SAML:2.0:ac:classes:unspecified&lt;/saml:AuthnContextClassRef&gt;
      &lt;/saml:AuthnContext&gt;
    &lt;/saml:AuthnStatement&gt;
  &lt;/saml:Assertion&gt;
&lt;/samlp:Response&gt;

To learn more about HTML Tidy see http://tidy.sourceforge.net
Please send bug reports to html-tidy@w3.org
HTML and CSS specifications are available from http://www.w3.org/
Lobby your company to join W3C, see http://www.w3.org/Consortium
</code></pre></div><h2 id="この記事を試した環境">この記事を試した環境</h2>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh">% sw_vers
ProductName:    Mac OS X
ProductVersion: 10.15.7
BuildVersion:   19H114
% tidy -version 
HTML Tidy <span class="k">for</span> Mac OS X released on <span class="m">31</span> October <span class="m">2006</span> - Apple Inc. build 17.2
</code></pre></div>]]></content>
		</item>
		
		<item>
			<title>AWS CLI を使って Amazon Connect Tasks を作成・削除する</title>
			<link>https://noid11.github.io/posts/how-to-control-connect-tasks-by-aws-cli/</link>
			<pubDate>Wed, 20 Jan 2021 19:54:25 +0900</pubDate>
			
			<guid>https://noid11.github.io/posts/how-to-control-connect-tasks-by-aws-cli/</guid>
			<description></description>
			<content type="html"><![CDATA[<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nv">REGION</span><span class="o">=</span>ap-northeast-1
<span class="nv">INSTANCE_ID</span><span class="o">=</span>xxx
<span class="nv">CONTACT_FLOW_ID</span><span class="o">=</span>yyy
<span class="nv">TASK_NAME</span><span class="o">=</span>mytask
<span class="nv">CONTACT_ID</span><span class="o">=</span><span class="k">$(</span>aws --region <span class="nv">$REGION</span> connect start-task-contact --instance-id <span class="nv">$INSTANCE_ID</span> --contact-flow-id <span class="nv">$CONTACT_FLOW_ID</span> --name <span class="nv">$TASK_NAME</span> --query ContactId --output text<span class="k">)</span>
aws --region <span class="nv">$REGION</span> connect stop-contact --contact-id <span class="nv">$CONTACT_ID</span> --instance-id <span class="nv">$INSTANCE_ID</span>
</code></pre></div><h2 id="amazon-connect-tasks-とは">Amazon Connect Tasks とは</h2>
<ul>
<li>Amazon Connect を使用している各エージェントに対して「タスク」を与える機能<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup></li>
<li>タスクとは、雑に言うと ToDo リストみたいなもの
<ul>
<li>コールと同じようにエージェントにルーティングされて、エージェントが承諾したら特定のタスクに取り組む・・・といった感じで使う
<ul>
<li>Salesforce 等の外部サービスと連携することも出来るらしい<sup id="fnref:2"><a href="#fn:2" class="footnote-ref" role="doc-noteref">2</a></sup></li>
</ul>
</li>
<li>ドキュメントには以下のようなユースケースが書いてある<sup id="fnref:3"><a href="#fn:3" class="footnote-ref" role="doc-noteref">3</a></sup>
<ul>
<li>Salesforce 等の CRM: Customer Relationship Management ソリューションと連携したカスタマーへのフォローアップ</li>
<li>コールを使用したカスタマーへのフォローアップ
<ul>
<li>タスクを確認して、エージェントから特定のカスタマーにアウトバウンドコールする的な</li>
</ul>
</li>
<li>カスタマーに関連して行うビジネス固有のアクション</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="aws-cli-でタスクを作成">AWS CLI でタスクを作成</h2>
<p><a href="https://awscli.amazonaws.com/v2/documentation/api/latest/reference/connect/start-task-contact.html">start-task-contact</a> コマンドを使う<sup id="fnref:4"><a href="#fn:4" class="footnote-ref" role="doc-noteref">4</a></sup></p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nv">REGION</span><span class="o">=</span>ap-northeast-1
<span class="nv">INSTANCE_ID</span><span class="o">=</span>xxx
<span class="nv">CONTACT_FLOW_ID</span><span class="o">=</span>yyy
<span class="nv">TASK_NAME</span><span class="o">=</span>mytask
aws --region <span class="nv">$REGION</span> connect start-task-contact --instance-id <span class="nv">$INSTANCE_ID</span> --contact-flow-id <span class="nv">$CONTACT_FLOW_ID</span> --name <span class="nv">$TASK_NAME</span>
</code></pre></div><h2 id="aws-cli-でタスクを削除">AWS CLI でタスクを削除</h2>
<p><a href="https://awscli.amazonaws.com/v2/documentation/api/latest/reference/connect/stop-contact.html">stop-contact</a> コマンドを使う<sup id="fnref:5"><a href="#fn:5" class="footnote-ref" role="doc-noteref">5</a></sup></p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nv">REGION</span><span class="o">=</span>ap-northeast-1
<span class="nv">INSTANCE_ID</span><span class="o">=</span>xxx
<span class="nv">CONTACT_ID</span><span class="o">=</span>yyy
aws --region <span class="nv">$REGION</span> connect stop-contact --contact-id <span class="nv">$CONTACT_ID</span> --instance-id <span class="nv">$INSTANCE_ID</span>
</code></pre></div><h2 id="この記事を試した環境">この記事を試した環境</h2>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh">% sw_vers
ProductName:    Mac OS X
ProductVersion: 10.15.7
BuildVersion:   19H114
% aws --version
aws-cli/2.1.6 Python/3.7.4 Darwin/19.6.0 exe/x86_64 prompt/off
</code></pre></div><section class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1" role="doc-endnote">
<p>Amazon Connect Tasks (エージェントのタスクを自動化、追跡、管理) | AWS<br>
<a href="https://aws.amazon.com/jp/connect/tasks/">https://aws.amazon.com/jp/connect/tasks/</a> <a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:2" role="doc-endnote">
<p>Amazon Connect – よりスマートになり、サードパーティーツールとの統合が向上 | Amazon Web Services ブログ<br>
<a href="https://aws.amazon.com/jp/blogs/news/amazon-connect-smarter-and-more-integrated/">https://aws.amazon.com/jp/blogs/news/amazon-connect-smarter-and-more-integrated/</a> <a href="#fnref:2" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:3" role="doc-endnote">
<p>Tasks - Amazon Connect<br>
<a href="https://docs.aws.amazon.com/connect/latest/adminguide/tasks.html">https://docs.aws.amazon.com/connect/latest/adminguide/tasks.html</a> <a href="#fnref:3" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:4" role="doc-endnote">
<p>StartTaskContact - Amazon Connect Service<br>
<a href="https://docs.aws.amazon.com/connect/latest/APIReference/API_StartTaskContact.html">https://docs.aws.amazon.com/connect/latest/APIReference/API_StartTaskContact.html</a> <a href="#fnref:4" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:5" role="doc-endnote">
<p>StopContact - Amazon Connect Service<br>
<a href="https://docs.aws.amazon.com/connect/latest/APIReference/API_StopContact.html">https://docs.aws.amazon.com/connect/latest/APIReference/API_StopContact.html</a> <a href="#fnref:5" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</section>]]></content>
		</item>
		
		<item>
			<title>RDP を使って Mac から Windows にファイルをコピーする方法</title>
			<link>https://noid11.github.io/posts/how-to-file-copy-to-windows-from-mac-by-rdp/</link>
			<pubDate>Tue, 19 Jan 2021 22:16:16 +0900</pubDate>
			
			<guid>https://noid11.github.io/posts/how-to-file-copy-to-windows-from-mac-by-rdp/</guid>
			<description>クリップボードにコピーして貼り付るのが手軽で良い Mac 側でコピーしたいファイルを選択し、クリップボードにコピー RDP で Windows に接続し、ファイルを送信した</description>
			<content type="html"><![CDATA[<ul>
<li>クリップボードにコピーして貼り付るのが手軽で良い
<ol>
<li>Mac 側でコピーしたいファイルを選択し、クリップボードにコピー</li>
<li>RDP で Windows に接続し、ファイルを送信したいディレクトリをよしなに選択してペースト</li>
</ol>
</li>
<li>RDP 設定の <code>Devices &amp; Audio</code> で <code>Clipboard</code> にチェックが入っていることを確認すること</li>
</ul>
<p><img src="/images/how-to-file-copy-to-windows-from-mac-by-rdp/rdp-setting.png" alt="rdp-setting"></p>
<h2 id="この記事を試した環境">この記事を試した環境</h2>
<p>Mac</p>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh">% sw_vers
ProductName:    Mac OS X
ProductVersion: 10.15.7
BuildVersion:   19H114
</code></pre></div><hr>
<p>Microsoft Remote Desktop</p>
<ul>
<li>Version 10.4.0 (1811)</li>
<li>Download:
<ul>
<li><a href="https://apps.apple.com/jp/app/microsoft-remote-desktop/id1295203466">https://apps.apple.com/jp/app/microsoft-remote-desktop/id1295203466</a></li>
<li><a href="https://install.appcenter.ms/orgs/rdmacios-k2vy/apps/microsoft-remote-desktop-for-mac/distribution_groups/all-users-of-microsoft-remote-desktop-for-mac">https://install.appcenter.ms/orgs/rdmacios-k2vy/apps/microsoft-remote-desktop-for-mac/distribution_groups/all-users-of-microsoft-remote-desktop-for-mac</a></li>
</ul>
</li>
<li>Release Notes:
<ul>
<li><a href="https://docs.microsoft.com/ja-jp/windows-server/remote/remote-desktop-services/clients/mac-whatsnew">https://docs.microsoft.com/ja-jp/windows-server/remote/remote-desktop-services/clients/mac-whatsnew</a></li>
</ul>
</li>
</ul>
<hr>
<p>Windows</p>
<div class="highlight"><pre class="chroma"><code class="language-powershell" data-lang="powershell"><span class="nb">PS </span><span class="n">C:</span><span class="p">\</span><span class="n">Users</span><span class="p">\</span><span class="n">Administrator</span><span class="p">&gt;</span> <span class="nb">Get-WmiObject</span> <span class="n">Win32_OperatingSystem</span>


<span class="n">SystemDirectory</span> <span class="err">:</span> <span class="n">C:</span><span class="p">\</span><span class="n">Windows</span><span class="p">\</span><span class="n">system32</span>
<span class="n">Organization</span>    <span class="err">:</span> <span class="n">Amazon</span><span class="p">.</span><span class="n">com</span>
<span class="n">BuildNumber</span>     <span class="err">:</span> <span class="n">17763</span>
<span class="n">RegisteredUser</span>  <span class="err">:</span> <span class="n">EC2</span>
<span class="n">SerialNumber</span>    <span class="err">:</span> <span class="n">00430</span><span class="p">-</span><span class="n">00000</span><span class="p">-</span><span class="n">00000-AA379</span>
<span class="n">Version</span>         <span class="err">:</span> <span class="n">10</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">17763</span>
</code></pre></div>]]></content>
		</item>
		
		<item>
			<title>PowerShell を使って Windows アカウントユーザーのパスワード失効を無効化する方法</title>
			<link>https://noid11.github.io/posts/enable-user-password-never-expires-at-windows/</link>
			<pubDate>Tue, 19 Jan 2021 16:11:20 +0900</pubDate>
			
			<guid>https://noid11.github.io/posts/enable-user-password-never-expires-at-windows/</guid>
			<description>&lt;ul&gt;
&lt;li&gt;Windows Server で特定ユーザーのパスワード失効を無効化したい場合に便利&lt;/li&gt;
&lt;li&gt;デフォルトでは一定期間でローテートするような設定なので、セキュリティに注意した上で使おう&lt;/li&gt;
&lt;/ul&gt;</description>
			<content type="html"><![CDATA[<ul>
<li>Windows Server で特定ユーザーのパスワード失効を無効化したい場合に便利</li>
<li>デフォルトでは一定期間でローテートするような設定なので、セキュリティに注意した上で使おう</li>
</ul>
<h2 id="コマンド">コマンド</h2>
<ul>
<li>Administrator ユーザーのパスワード失効を無効化する例
<ul>
<li>コマンド的には、パスワード有効期限を無期限とする設定を有効化する感じ</li>
</ul>
</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-powershell" data-lang="powershell"><span class="nb">Set-LocalUser</span> <span class="n">-Name</span> <span class="s2">&#34;Administrator&#34;</span> <span class="n">-PasswordNeverExpires</span> <span class="nv">$true</span>
</code></pre></div><h2 id="set-localuser-コマンド">Set-LocalUser コマンド</h2>
<p>Set-LocalUser (Microsoft.PowerShell.LocalAccounts) - PowerShell | Microsoft Docs<br>
<a href="https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.localaccounts/set-localuser">https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.localaccounts/set-localuser</a></p>
<blockquote>
<p>The Set-LocalUser cmdlet modifies a local user account. This cmdlet can reset the password of a local user account.</p>
</blockquote>
<ul>
<li>ローカルユーザーアカウントの変更を行うコマンド</li>
<li><code>-Name</code>
<ul>
<li>対象となるローカルユーザーアカウントの名前</li>
</ul>
</li>
<li><code>-PasswordNeverExpires</code>
<ul>
<li>パスワード有効期限を無期限とする設定を有効化・無効化する</li>
</ul>
</li>
</ul>
<h2 id="net-user-コマンド">Net user コマンド</h2>
<p>Net user | Microsoft Docs<br>
<a href="https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/cc771865(v=ws.11)">https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/cc771865(v=ws.11)</a></p>
<blockquote>
<p>Adds or modifies user accounts, or displays user account information.</p>
</blockquote>
<ul>
<li>ユーザーアカウントの追加・変更や、ユーザーアカウント情報を表示するコマンド</li>
<li><code>Set-LocalUser</code> コマンドを実行する前後で使用することで、変更内容を確認できる</li>
</ul>
<h2 id="実行例">実行例</h2>
<ul>
<li><code>Password expires</code> が <code>Never</code> になれば OK</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-powershell" data-lang="powershell"><span class="nb">PS </span><span class="n">C:</span><span class="p">\</span><span class="n">Users</span><span class="p">\</span><span class="n">Administrator</span><span class="p">&gt;</span> <span class="n">net</span> <span class="n">user</span> <span class="n">Administrator</span>
<span class="n">User</span> <span class="n">name</span>                    <span class="n">Administrator</span>
<span class="n">Full</span> <span class="n">Name</span>
<span class="n">Comment</span>                      <span class="n">Built-in</span> <span class="n">account</span> <span class="k">for</span> <span class="n">administering</span> <span class="n">the</span> <span class="n">computer</span><span class="p">/</span><span class="n">domain</span>
<span class="n">User</span> <span class="n">s</span> <span class="n">comment</span>
<span class="n">Country</span><span class="p">/</span><span class="n">region</span> <span class="n">code</span>          <span class="n">000</span> <span class="p">(</span><span class="n">System</span> <span class="k">Default</span><span class="p">)</span>
<span class="n">Account</span> <span class="n">active</span>               <span class="n">Yes</span>
<span class="n">Account</span> <span class="n">expires</span>              <span class="n">Never</span>

<span class="n">Password</span> <span class="n">last</span> <span class="nb">set </span>           <span class="n">1</span><span class="p">/</span><span class="n">19</span><span class="p">/</span><span class="n">2021</span> <span class="n">4</span><span class="err">:</span><span class="n">27</span><span class="err">:</span><span class="n">36</span> <span class="n">AM</span>
<span class="n">Password</span> <span class="n">expires</span>             <span class="n">3</span><span class="p">/</span><span class="n">2</span><span class="p">/</span><span class="n">2021</span> <span class="n">4</span><span class="err">:</span><span class="n">27</span><span class="err">:</span><span class="n">36</span> <span class="n">AM</span>
<span class="n">Password</span> <span class="n">changeable</span>          <span class="n">1</span><span class="p">/</span><span class="n">19</span><span class="p">/</span><span class="n">2021</span> <span class="n">4</span><span class="err">:</span><span class="n">27</span><span class="err">:</span><span class="n">36</span> <span class="n">AM</span>
<span class="n">Password</span> <span class="n">required</span>            <span class="n">Yes</span>
<span class="n">User</span> <span class="n">may</span> <span class="n">change</span> <span class="n">password</span>     <span class="n">Yes</span>

<span class="n">Workstations</span> <span class="n">allowed</span>         <span class="n">All</span>
<span class="n">Logon</span> <span class="n">script</span>
<span class="n">User</span> <span class="n">profile</span>
<span class="n">Home</span> <span class="n">directory</span>
<span class="n">Last</span> <span class="n">logon</span>                   <span class="n">1</span><span class="p">/</span><span class="n">19</span><span class="p">/</span><span class="n">2021</span> <span class="n">4</span><span class="err">:</span><span class="n">41</span><span class="err">:</span><span class="n">50</span> <span class="n">AM</span>

<span class="n">Logon</span> <span class="n">hours</span> <span class="n">allowed</span>          <span class="n">All</span>

<span class="n">Local</span> <span class="nb">Group </span><span class="n">Memberships</span>      <span class="p">*</span><span class="n">Administrators</span>
<span class="n">Global</span> <span class="nb">Group </span><span class="n">memberships</span>     <span class="p">*</span><span class="n">None</span>
<span class="n">The</span> <span class="n">command</span> <span class="n">completed</span> <span class="n">successfully</span><span class="p">.</span>
<span class="nb">PS </span><span class="n">C:</span><span class="p">\</span><span class="n">Users</span><span class="p">\</span><span class="n">Administrator</span><span class="p">&gt;</span> <span class="nb">Set-LocalUser</span> <span class="n">-Name</span> <span class="s2">&#34;Administrator&#34;</span> <span class="n">-PasswordNeverExpires</span> <span class="nv">$true</span>
<span class="nb">PS </span><span class="n">C:</span><span class="p">\</span><span class="n">Users</span><span class="p">\</span><span class="n">Administrator</span><span class="p">&gt;</span> <span class="n">net</span> <span class="n">user</span> <span class="n">Administrator</span>
<span class="n">User</span> <span class="n">name</span>                    <span class="n">Administrator</span>
<span class="n">Full</span> <span class="n">Name</span>
<span class="n">Comment</span>                      <span class="n">Built-in</span> <span class="n">account</span> <span class="k">for</span> <span class="n">administering</span> <span class="n">the</span> <span class="n">computer</span><span class="p">/</span><span class="n">domain</span>
<span class="n">User</span> <span class="n">s</span> <span class="n">comment</span>
<span class="n">Country</span><span class="p">/</span><span class="n">region</span> <span class="n">code</span>          <span class="n">000</span> <span class="p">(</span><span class="n">System</span> <span class="k">Default</span><span class="p">)</span>
<span class="n">Account</span> <span class="n">active</span>               <span class="n">Yes</span>
<span class="n">Account</span> <span class="n">expires</span>              <span class="n">Never</span>

<span class="n">Password</span> <span class="n">last</span> <span class="nb">set </span>           <span class="n">1</span><span class="p">/</span><span class="n">19</span><span class="p">/</span><span class="n">2021</span> <span class="n">4</span><span class="err">:</span><span class="n">27</span><span class="err">:</span><span class="n">36</span> <span class="n">AM</span>
<span class="n">Password</span> <span class="n">expires</span>             <span class="n">Never</span>
<span class="n">Password</span> <span class="n">changeable</span>          <span class="n">1</span><span class="p">/</span><span class="n">19</span><span class="p">/</span><span class="n">2021</span> <span class="n">4</span><span class="err">:</span><span class="n">27</span><span class="err">:</span><span class="n">36</span> <span class="n">AM</span>
<span class="n">Password</span> <span class="n">required</span>            <span class="n">Yes</span>
<span class="n">User</span> <span class="n">may</span> <span class="n">change</span> <span class="n">password</span>     <span class="n">Yes</span>

<span class="n">Workstations</span> <span class="n">allowed</span>         <span class="n">All</span>
<span class="n">Logon</span> <span class="n">script</span>
<span class="n">User</span> <span class="n">profile</span>
<span class="n">Home</span> <span class="n">directory</span>
<span class="n">Last</span> <span class="n">logon</span>                   <span class="n">1</span><span class="p">/</span><span class="n">19</span><span class="p">/</span><span class="n">2021</span> <span class="n">4</span><span class="err">:</span><span class="n">41</span><span class="err">:</span><span class="n">50</span> <span class="n">AM</span>

<span class="n">Logon</span> <span class="n">hours</span> <span class="n">allowed</span>          <span class="n">All</span>

<span class="n">Local</span> <span class="nb">Group </span><span class="n">Memberships</span>      <span class="p">*</span><span class="n">Administrators</span>
<span class="n">Global</span> <span class="nb">Group </span><span class="n">memberships</span>     <span class="p">*</span><span class="n">None</span>
<span class="n">The</span> <span class="n">command</span> <span class="n">completed</span> <span class="n">successfully</span><span class="p">.</span>
</code></pre></div><h2 id="この記事を試した環境">この記事を試した環境</h2>
<div class="highlight"><pre class="chroma"><code class="language-powershell" data-lang="powershell"><span class="nb">PS </span><span class="n">C:</span><span class="p">\</span><span class="n">Users</span><span class="p">\</span><span class="n">Administrator</span><span class="p">&gt;</span> <span class="nb">Get-WmiObject</span> <span class="n">Win32_OperatingSystem</span>


<span class="n">SystemDirectory</span> <span class="err">:</span> <span class="n">C:</span><span class="p">\</span><span class="n">Windows</span><span class="p">\</span><span class="n">system32</span>
<span class="n">Organization</span>    <span class="err">:</span> <span class="n">Amazon</span><span class="p">.</span><span class="n">com</span>
<span class="n">BuildNumber</span>     <span class="err">:</span> <span class="n">17763</span>
<span class="n">RegisteredUser</span>  <span class="err">:</span> <span class="n">EC2</span>
<span class="n">SerialNumber</span>    <span class="err">:</span> <span class="n">00430</span><span class="p">-</span><span class="n">00000</span><span class="p">-</span><span class="n">00000-AA379</span>
<span class="n">Version</span>         <span class="err">:</span> <span class="n">10</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">17763</span>

<span class="nb">PS </span><span class="n">C:</span><span class="p">\</span><span class="n">Users</span><span class="p">\</span><span class="n">Administrator</span><span class="p">&gt;</span> <span class="nv">$PSVersionTable</span>

<span class="n">Name</span>                           <span class="n">Value</span>
<span class="p">----</span>                           <span class="p">-----</span>
<span class="n">PSVersion</span>                      <span class="n">5</span><span class="p">.</span><span class="n">1</span><span class="p">.</span><span class="n">17763</span><span class="p">.</span><span class="n">1490</span>
<span class="n">PSEdition</span>                      <span class="n">Desktop</span>
<span class="n">PSCompatibleVersions</span>           <span class="p">{</span><span class="n">1</span><span class="p">.</span><span class="n">0</span><span class="p">,</span> <span class="n">2</span><span class="p">.</span><span class="n">0</span><span class="p">,</span> <span class="n">3</span><span class="p">.</span><span class="n">0</span><span class="p">,</span> <span class="n">4</span><span class="p">.</span><span class="n">0</span><span class="p">...}</span>
<span class="n">BuildVersion</span>                   <span class="n">10</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">17763</span><span class="p">.</span><span class="n">1490</span>
<span class="n">CLRVersion</span>                     <span class="n">4</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">30319</span><span class="p">.</span><span class="n">42000</span>
<span class="n">WSManStackVersion</span>              <span class="n">3</span><span class="p">.</span><span class="n">0</span>
<span class="n">PSRemotingProtocolVersion</span>      <span class="n">2</span><span class="p">.</span><span class="n">3</span>
<span class="n">SerializationVersion</span>           <span class="n">1</span><span class="p">.</span><span class="n">1</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">1</span>
</code></pre></div>]]></content>
		</item>
		
		<item>
			<title>PowerShell を使って Google Chrome をインストールする方法</title>
			<link>https://noid11.github.io/posts/chrome-install-by-powershell/</link>
			<pubDate>Tue, 19 Jan 2021 15:12:28 +0900</pubDate>
			
			<guid>https://noid11.github.io/posts/chrome-install-by-powershell/</guid>
			<description>&lt;p&gt;Windows Server 構築で毎回 Internet Explorer の設定を変える・・・みたいな作業が減るので便利&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>Windows Server 構築で毎回 Internet Explorer の設定を変える・・・みたいな作業が減るので便利</p>
<h2 id="コマンド">コマンド</h2>
<div class="highlight"><pre class="chroma"><code class="language-powershell" data-lang="powershell"><span class="nv">$Path</span> <span class="p">=</span> <span class="nv">$env:TEMP</span><span class="p">;</span> <span class="nv">$Installer</span> <span class="p">=</span> <span class="s2">&#34;chrome_installer.exe&#34;</span><span class="p">;</span> <span class="nb">Invoke-WebRequest</span> <span class="s2">&#34;https://dl.google.com/tag/s/appguid%3D%7B8A69D345-D564-463C-AFF1-A69D9E530F96%7D%26browser%3D0%26usagestats%3D1%26appname%3DGoogle%2520Chrome%26needsadmin%3Dprefers%26brand%3DGTPM/update2/installers/ChromeSetup.exe&#34;</span> <span class="n">-OutFile</span> <span class="nv">$Path</span><span class="p">\</span><span class="nv">$Installer</span><span class="p">;</span> <span class="nb">Start-Process</span> <span class="n">-FilePath</span> <span class="nv">$Path</span><span class="p">\</span><span class="nv">$Installer</span> <span class="n">-Args</span> <span class="s2">&#34;/silent /install&#34;</span> <span class="n">-Verb</span> <span class="n">RunAs</span> <span class="n">-Wait</span><span class="p">;</span> <span class="nb">Remove-Item</span> <span class="nv">$Path</span><span class="p">\</span><span class="nv">$Installer</span>
</code></pre></div><h2 id="何をしているのか">何をしているのか</h2>
<p><code>;</code> はコマンドの区切りなので、実質以下のようなコマンドを連続して実行している</p>
<div class="highlight"><pre class="chroma"><code class="language-powershell" data-lang="powershell"><span class="nv">$Path</span> <span class="p">=</span> <span class="nv">$env:TEMP</span>
<span class="nv">$Installer</span> <span class="p">=</span> <span class="s2">&#34;chrome_installer.exe&#34;</span>
<span class="nb">Invoke-WebRequest</span> <span class="s2">&#34;https://dl.google.com/tag/s/appguid%3D%7B8A69D345-D564-463C-AFF1-A69D9E530F96%7D%26browser%3D0%26usagestats%3D1%26appname%3DGoogle%2520Chrome%26needsadmin%3Dprefers%26brand%3DGTPM/update2/installers/ChromeSetup.exe&#34;</span> <span class="n">-OutFile</span> <span class="nv">$Path</span><span class="p">\</span><span class="nv">$Installer</span>
<span class="nb">Start-Process</span> <span class="n">-FilePath</span> <span class="nv">$Path</span><span class="p">\</span><span class="nv">$Installer</span> <span class="n">-Args</span> <span class="s2">&#34;/silent /install&#34;</span> <span class="n">-Verb</span> <span class="n">RunAs</span> <span class="n">-Wait</span>
<span class="nb">Remove-Item</span> <span class="nv">$Path</span><span class="p">\</span><span class="nv">$Installer</span>
</code></pre></div><ol>
<li><code>$Path = $env:TEMP</code>
<ul>
<li>Google Chrome のインストーラーを保存する一時ディレクトリの定義</li>
</ul>
</li>
<li><code>$Installer = &quot;chrome_installer.exe&quot;</code>
<ul>
<li>Google Chrome のインストーラーを保存する際のファイル名</li>
</ul>
</li>
<li><code>Invoke-WebRequest &quot;https://dl.google.com/tag/s/appguid%3D%7B8A69D345-D564-463C-AFF1-A69D9E530F96%7D%26browser%3D0%26usagestats%3D1%26appname%3DGoogle%2520Chrome%26needsadmin%3Dprefers%26brand%3DGTPM/update2/installers/ChromeSetup.exe&quot; -OutFile $Path\$Installer</code>
<ul>
<li><code>Invoke-WebRequest</code>
<ul>
<li>HTTP, HTTPS リクエストを行うコマンド</li>
<li><a href="https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.utility/invoke-webrequest">https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.utility/invoke-webrequest</a></li>
</ul>
</li>
<li><code>https://dl.google.com/...</code>
<ul>
<li>Google Chrome インストーラーがホストされている URL</li>
<li>直接ダウンロードできるリンクについては Google 公式の情報は発見できなかった</li>
</ul>
</li>
<li><code>-OutFile $Path\$Installer</code>
<ul>
<li>HTTP, HTTPS レスポンス内容をファイルに出力するオプション</li>
<li><code>$Path\$Installer</code> は前に定義した一時ディレクトリとファイル名</li>
</ul>
</li>
</ul>
</li>
<li><code>Start-Process -FilePath $Path\$Installer -Args &quot;/silent /install&quot; -Verb RunAs -Wait</code>
<ul>
<li><code>Start-Process</code>
<ul>
<li>新しいプロセスを開始するコマンド</li>
<li><a href="https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.management/start-process">https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.management/start-process</a></li>
</ul>
</li>
<li><code>-FilePath $Path\$Installer</code>
<ul>
<li>プロセスとして実行するファイルのパス</li>
</ul>
</li>
<li><code>-Args &quot;/silent /install&quot;</code>
<ul>
<li><code>-ArgumentList</code> のエイリアス</li>
<li>プロセスを開始するときの引数</li>
<li>そのため <code>&quot;/silent /install&quot;</code> は Google Chrome インストーラーに対して指定するオプション
<ul>
<li>サイレントインストールのためのオプションだと思われるが、 Google Chrome のインストーラーで使用できるオプションについては情報を発見できなかった</li>
</ul>
</li>
</ul>
</li>
<li><code>-Verb RunAs</code>
<ul>
<li>ファイルを動作するときの verb を指定するオプション
<ul>
<li>verb は実行するアクション的な意味合い</li>
</ul>
</li>
<li>指定可能な verb は、実行するファイルの拡張子によって異なる</li>
<li><code>RunAs</code> は <code>.exe</code> 形式のファイルに指定できる verb
<ul>
<li>要するに管理者権限でプロセスを実行するということ。 <code>sudo</code> に似ている</li>
</ul>
</li>
</ul>
</li>
<li><code>-Wait</code>
<ul>
<li>実行するプロセスと、その子孫となるプロセスが完了するのを待つオプション</li>
</ul>
</li>
</ul>
</li>
<li><code>Remove-Item $Path\$Installer</code>
<ul>
<li>ファイルを削除するコマンド
<ul>
<li><a href="https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.management/remove-item">https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.management/remove-item</a></li>
</ul>
</li>
<li><code>Start-Process ... -Wait</code> と合わせて、イントールプロセス完了後にインストーラーを削除する</li>
</ul>
</li>
</ol>
<h2 id="参考">参考</h2>
<p>コマンドでWindowsにChromeをインストールする - Qiita<br>
<a href="https://qiita.com/Arahabica/items/04f8469842f29550b831">https://qiita.com/Arahabica/items/04f8469842f29550b831</a></p>
<p>Install Google Chrome with Powershell command-line - YouTube<br>
<a href="https://www.youtube.com/watch?v=M0qX46M3mnE">https://www.youtube.com/watch?v=M0qX46M3mnE</a></p>
<h2 id="この記事を試した環境">この記事を試した環境</h2>
<div class="highlight"><pre class="chroma"><code class="language-powershell" data-lang="powershell"><span class="nb">PS </span><span class="n">C:</span><span class="p">\</span><span class="n">Users</span><span class="p">\</span><span class="n">Administrator</span><span class="p">&gt;</span> <span class="nb">Get-WmiObject</span> <span class="n">Win32_OperatingSystem</span>


<span class="n">SystemDirectory</span> <span class="err">:</span> <span class="n">C:</span><span class="p">\</span><span class="n">Windows</span><span class="p">\</span><span class="n">system32</span>
<span class="n">Organization</span>    <span class="err">:</span> <span class="n">Amazon</span><span class="p">.</span><span class="n">com</span>
<span class="n">BuildNumber</span>     <span class="err">:</span> <span class="n">17763</span>
<span class="n">RegisteredUser</span>  <span class="err">:</span> <span class="n">EC2</span>
<span class="n">SerialNumber</span>    <span class="err">:</span> <span class="n">00430</span><span class="p">-</span><span class="n">00000</span><span class="p">-</span><span class="n">00000-AA379</span>
<span class="n">Version</span>         <span class="err">:</span> <span class="n">10</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">17763</span>

<span class="nb">PS </span><span class="n">C:</span><span class="p">\</span><span class="n">Users</span><span class="p">\</span><span class="n">Administrator</span><span class="p">&gt;</span> <span class="nv">$PSVersionTable</span>

<span class="n">Name</span>                           <span class="n">Value</span>
<span class="p">----</span>                           <span class="p">-----</span>
<span class="n">PSVersion</span>                      <span class="n">5</span><span class="p">.</span><span class="n">1</span><span class="p">.</span><span class="n">17763</span><span class="p">.</span><span class="n">1490</span>
<span class="n">PSEdition</span>                      <span class="n">Desktop</span>
<span class="n">PSCompatibleVersions</span>           <span class="p">{</span><span class="n">1</span><span class="p">.</span><span class="n">0</span><span class="p">,</span> <span class="n">2</span><span class="p">.</span><span class="n">0</span><span class="p">,</span> <span class="n">3</span><span class="p">.</span><span class="n">0</span><span class="p">,</span> <span class="n">4</span><span class="p">.</span><span class="n">0</span><span class="p">...}</span>
<span class="n">BuildVersion</span>                   <span class="n">10</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">17763</span><span class="p">.</span><span class="n">1490</span>
<span class="n">CLRVersion</span>                     <span class="n">4</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">30319</span><span class="p">.</span><span class="n">42000</span>
<span class="n">WSManStackVersion</span>              <span class="n">3</span><span class="p">.</span><span class="n">0</span>
<span class="n">PSRemotingProtocolVersion</span>      <span class="n">2</span><span class="p">.</span><span class="n">3</span>
<span class="n">SerializationVersion</span>           <span class="n">1</span><span class="p">.</span><span class="n">1</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">1</span>
</code></pre></div>]]></content>
		</item>
		
		<item>
			<title>Windows の情報を PowerShell から確認する方法</title>
			<link>https://noid11.github.io/posts/view-windows-info/</link>
			<pubDate>Tue, 19 Jan 2021 14:24:03 +0900</pubDate>
			
			<guid>https://noid11.github.io/posts/view-windows-info/</guid>
			<description>&lt;p&gt;Windows Server のバージョン情報を PowerShell から確認する方法を調べたメモ&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>Windows Server のバージョン情報を PowerShell から確認する方法を調べたメモ</p>
<h2 id="get-wmiobject-win32_operatingsystem">Get-WmiObject Win32_OperatingSystem</h2>
<div class="highlight"><pre class="chroma"><code class="language-powershell" data-lang="powershell"><span class="nb">Get-WmiObject</span> <span class="n">Win32_OperatingSystem</span>
</code></pre></div><h2 id="実行例">実行例</h2>
<p>EC2 で Windows Server を構築した例</p>
<div class="highlight"><pre class="chroma"><code class="language-powershell" data-lang="powershell"><span class="nb">PS </span><span class="n">C:</span><span class="p">\</span><span class="n">Users</span><span class="p">\</span><span class="n">Administrator</span><span class="p">&gt;</span> <span class="nb">Get-WmiObject</span> <span class="n">Win32_OperatingSystem</span>


<span class="n">SystemDirectory</span> <span class="err">:</span> <span class="n">C:</span><span class="p">\</span><span class="n">Windows</span><span class="p">\</span><span class="n">system32</span>
<span class="n">Organization</span>    <span class="err">:</span> <span class="n">Amazon</span><span class="p">.</span><span class="n">com</span>
<span class="n">BuildNumber</span>     <span class="err">:</span> <span class="n">17763</span>
<span class="n">RegisteredUser</span>  <span class="err">:</span> <span class="n">EC2</span>
<span class="n">SerialNumber</span>    <span class="err">:</span> <span class="n">00430</span><span class="p">-</span><span class="n">00000</span><span class="p">-</span><span class="n">00000-AA379</span>
<span class="n">Version</span>         <span class="err">:</span> <span class="n">10</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">17763</span>
</code></pre></div><ul>
<li>SystemDirectory:
<ul>
<li>OS のシステムディレクトリ</li>
<li>System directory of the operating system.</li>
</ul>
</li>
<li>Organization:
<ul>
<li>OS 登録ユーザーの会社名</li>
<li>Company name for the registered user of the operating system.</li>
</ul>
</li>
<li>BuildNumber:
<ul>
<li>OS のビルド番号。製品のリリースバージョン番号よりも正確なバージョン情報として使用できる</li>
<li>Build number of an operating system. It can be used for more precise version information than product release version numbers.</li>
</ul>
</li>
<li>RegisteredUser:
<ul>
<li>OS の登録ユーザー名</li>
<li>Name of the registered user of the operating system.</li>
</ul>
</li>
<li>SerialNumber:
<ul>
<li>OS のシリアル ID 番号</li>
<li>Operating system product serial identification number.</li>
</ul>
</li>
<li>Version:
<ul>
<li>OS のバージョン</li>
<li>Version number of the operating system.</li>
</ul>
</li>
</ul>
<p>Win32_OperatingSystem class - Win32 apps | Microsoft Docs<br>
<a href="https://docs.microsoft.com/en-us/windows/win32/cimwin32prov/win32-operatingsystem">https://docs.microsoft.com/en-us/windows/win32/cimwin32prov/win32-operatingsystem</a></p>
<h2 id="get-wmiobject-とは">Get-WmiObject とは</h2>
<p>Get-WmiObject (Microsoft.PowerShell.Management) - PowerShell | Microsoft Docs<br>
<a href="https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.management/get-wmiobject">https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.management/get-wmiobject</a></p>
<blockquote>
<p>Gets instances of Windows Management Instrumentation (WMI) classes or information about the available classes.</p>
</blockquote>
<p>WMI: Windows Managemtn Instrumentation クラスまたは利用可能なクラス情報のインスタンス情報を取得するコマンド</p>
<h2 id="wmi-windows-managemtn-instrumentation-とは">WMI: Windows Managemtn Instrumentation とは</h2>
<p>Windows Management Instrumentation - Win32 apps | Microsoft Docs<br>
<a href="https://docs.microsoft.com/ja-jp/windows/win32/wmisdk/wmi-start-page">https://docs.microsoft.com/ja-jp/windows/win32/wmisdk/wmi-start-page</a></p>
<blockquote>
<p>Windows Management Instrumentation (WMI) is the infrastructure for management data and operations on Windows-based operating systems. You can write WMI scripts or applications to automate administrative tasks on remote computers but WMI also supplies management data to other parts of the operating system and products, for example System Center Operations Manager, formerly Microsoft Operations Manager (MOM), or Windows Remote Management (WinRM).</p>
</blockquote>
<p>Windows Management Instrumentation (WMI) は Windows ベース OS におけるデータ管理と操作のためのインフラ</p>
<h2 id="win32_operatingsystem-とは">Win32_OperatingSystem とは</h2>
<p>Win32_OperatingSystem class - Win32 apps | Microsoft Docs<br>
<a href="https://docs.microsoft.com/en-us/windows/win32/cimwin32prov/win32-operatingsystem">https://docs.microsoft.com/en-us/windows/win32/cimwin32prov/win32-operatingsystem</a></p>
<blockquote>
<p>The Win32_OperatingSystem WMI class represents a Windows-based operating system installed on a computer.</p>
</blockquote>
<p>Win32_OperatingSystem は WMI クラスの1つで、コンピューターにインストールされている Windows ベースの OS を扱うクラス</p>
<h2 id="buildnumber-から-windows-server-リリースを確認する">BuildNumber から Windows Server リリースを確認する</h2>
<ul>
<li>公式情報があるので BuildNumber で検索すれば OK</li>
<li>BuildNumber が <code>17763</code> なら、 OS Build カラムから <code>Windows Server 2019 (Long-Term Servicing Channel) (Datacenter, Essentials, Standard)</code> か <code>Windows Server, version 1809 (Semi-Annual Channel) (Datacenter Core, Standard Core)</code> だと分かる</li>
</ul>
<p>Windows Server のリリース情報 | Microsoft Docs<br>
<a href="https://docs.microsoft.com/ja-jp/windows-server/get-started/windows-server-release-info">https://docs.microsoft.com/ja-jp/windows-server/get-started/windows-server-release-info</a></p>
<h2 id="この記事を試した環境">この記事を試した環境</h2>
<div class="highlight"><pre class="chroma"><code class="language-powershell" data-lang="powershell"><span class="nb">PS </span><span class="n">C:</span><span class="p">\</span><span class="n">Users</span><span class="p">\</span><span class="n">Administrator</span><span class="p">&gt;</span> <span class="nb">Get-WmiObject</span> <span class="n">Win32_OperatingSystem</span>


<span class="n">SystemDirectory</span> <span class="err">:</span> <span class="n">C:</span><span class="p">\</span><span class="n">Windows</span><span class="p">\</span><span class="n">system32</span>
<span class="n">Organization</span>    <span class="err">:</span> <span class="n">Amazon</span><span class="p">.</span><span class="n">com</span>
<span class="n">BuildNumber</span>     <span class="err">:</span> <span class="n">17763</span>
<span class="n">RegisteredUser</span>  <span class="err">:</span> <span class="n">EC2</span>
<span class="n">SerialNumber</span>    <span class="err">:</span> <span class="n">00430</span><span class="p">-</span><span class="n">00000</span><span class="p">-</span><span class="n">00000-AA379</span>
<span class="n">Version</span>         <span class="err">:</span> <span class="n">10</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">17763</span>

<span class="nb">PS </span><span class="n">C:</span><span class="p">\</span><span class="n">Users</span><span class="p">\</span><span class="n">Administrator</span><span class="p">&gt;</span> <span class="nv">$PSVersionTable</span>

<span class="n">Name</span>                           <span class="n">Value</span>
<span class="p">----</span>                           <span class="p">-----</span>
<span class="n">PSVersion</span>                      <span class="n">5</span><span class="p">.</span><span class="n">1</span><span class="p">.</span><span class="n">17763</span><span class="p">.</span><span class="n">1490</span>
<span class="n">PSEdition</span>                      <span class="n">Desktop</span>
<span class="n">PSCompatibleVersions</span>           <span class="p">{</span><span class="n">1</span><span class="p">.</span><span class="n">0</span><span class="p">,</span> <span class="n">2</span><span class="p">.</span><span class="n">0</span><span class="p">,</span> <span class="n">3</span><span class="p">.</span><span class="n">0</span><span class="p">,</span> <span class="n">4</span><span class="p">.</span><span class="n">0</span><span class="p">...}</span>
<span class="n">BuildVersion</span>                   <span class="n">10</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">17763</span><span class="p">.</span><span class="n">1490</span>
<span class="n">CLRVersion</span>                     <span class="n">4</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">30319</span><span class="p">.</span><span class="n">42000</span>
<span class="n">WSManStackVersion</span>              <span class="n">3</span><span class="p">.</span><span class="n">0</span>
<span class="n">PSRemotingProtocolVersion</span>      <span class="n">2</span><span class="p">.</span><span class="n">3</span>
<span class="n">SerializationVersion</span>           <span class="n">1</span><span class="p">.</span><span class="n">1</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">1</span>
</code></pre></div>]]></content>
		</item>
		
		<item>
			<title>Kinesis Data Streams のコンシューマーとして動かす AWS Lambda 関数サンプル</title>
			<link>https://noid11.github.io/posts/lambda-kinesis-consumer-sample/</link>
			<pubDate>Tue, 19 Jan 2021 08:51:43 +0900</pubDate>
			
			<guid>https://noid11.github.io/posts/lambda-kinesis-consumer-sample/</guid>
			<description>&lt;ul&gt;
&lt;li&gt;Kinesis Data Streams に連携されるデータを確認したい場合等に使う&lt;/li&gt;
&lt;li&gt;ログの出力先等として Kinesis Data Streams に連携するサービスは結構存在するので、サクッと試す分にはマネジメントコンソールから編集可能な Python, Node.js 等を使うのが便利&lt;/li&gt;
&lt;/ul&gt;</description>
			<content type="html"><![CDATA[<ul>
<li>Kinesis Data Streams に連携されるデータを確認したい場合等に使う</li>
<li>ログの出力先等として Kinesis Data Streams に連携するサービスは結構存在するので、サクッと試す分にはマネジメントコンソールから編集可能な Python, Node.js 等を使うのが便利</li>
</ul>
<h2 id="サンプルコード">サンプルコード</h2>
<div class="highlight"><pre class="chroma"><code class="language-py" data-lang="py"><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">logging</span> <span class="kn">import</span> <span class="n">getLogger</span><span class="p">,</span> <span class="n">INFO</span><span class="p">,</span> <span class="n">DEBUG</span>
<span class="kn">import</span> <span class="nn">base64</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">INFO</span><span class="p">)</span>
<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&#34;init&#34;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">lambda_handler</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">ensure_ascii</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;base64 decorded records data&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">event</span><span class="p">[</span><span class="s1">&#39;Records&#39;</span><span class="p">]:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">base64</span><span class="o">.</span><span class="n">b64decode</span><span class="p">(</span><span class="n">record</span><span class="p">[</span><span class="s1">&#39;kinesis&#39;</span><span class="p">][</span><span class="s1">&#39;data&#39;</span><span class="p">]))</span>
    <span class="k">return</span> <span class="n">event</span>
</code></pre></div><h2 id="aws-cli-を使って-kinesis-data-streams-にデータを投入するサンプル">AWS CLI を使って Kinesis Data Streams にデータを投入するサンプル</h2>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nv">STREAM_NAME</span><span class="o">=</span>mystream
<span class="nv">PERTITION_KEY</span><span class="o">=</span>my-partition
<span class="nv">REGION</span><span class="o">=</span>ap-northeast-1
aws --region <span class="nv">$REGION</span> kinesis put-record --stream-name <span class="nv">$STREAM_NAME</span> --data <span class="k">$(</span>uuidgen<span class="p">|</span>base64<span class="k">)</span> --partition-key <span class="nv">$PERTITION_KEY</span>

<span class="c1"># ループしたい場合</span>
<span class="k">while</span> sleep 1<span class="p">;</span> <span class="k">do</span> aws --region <span class="nv">$REGION</span> kinesis put-record --stream-name <span class="nv">$STREAM_NAME</span> --data <span class="k">$(</span>uuidgen<span class="p">|</span>base64<span class="k">)</span> --partition-key <span class="nv">$PERTITION_KEY</span><span class="p">;</span> <span class="k">done</span>
</code></pre></div><ul>
<li>Kinesis Data Streams に連携されているデータは base64 エンコードされる場合が多いため、上記コマンドでも base64 エンコードしているが、必須ではない</li>
</ul>
<h2 id="この記事を試した環境">この記事を試した環境</h2>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">% sw_vers
ProductName:	Mac OS X
ProductVersion:	10.15.7
BuildVersion:	19H114
% aws --version
aws-cli/2.1.6 Python/3.7.4 Darwin/19.6.0 exe/x86_64 prompt/off
</code></pre></div><ul>
<li>AWS Lambda ランタイム: Python 3.8</li>
</ul>]]></content>
		</item>
		
		<item>
			<title>go get コマンドのヘルプを読む</title>
			<link>https://noid11.github.io/posts/go-help-get/</link>
			<pubDate>Sat, 16 Jan 2021 12:10:06 +0900</pubDate>
			
			<guid>https://noid11.github.io/posts/go-help-get/</guid>
			<description>&lt;p&gt;&lt;code&gt;go get&lt;/code&gt; コマンドのヘルプ &lt;code&gt;go help get&lt;/code&gt; を読んだメモ&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p><code>go get</code> コマンドのヘルプ <code>go help get</code> を読んだメモ</p>
<h2 id="note">Note</h2>
<pre><code>usage: go get [-d] [-t] [-u] [-v] [-insecure] [build flags] [packages]
</code></pre><hr>
<p>依存関係の解決挙動あれこれ</p>
<ul>
<li>go get は、現在の開発モジュールを、依存関係の解決して追加し、ビルドとインストールを行う</li>
<li>まず、追加するモジュールの依存関係を解決する</li>
<li>それぞれのネームドパッケージやパッケージパターンに対して get はバージョンを指定する
<ul>
<li>デフォルトでは最新のタグ付きリリースバージョンとなる
<ul>
<li><code>v0.4.5</code> や <code>v1.2.2.3</code> など</li>
</ul>
</li>
<li>タグ付けされたリリースのように、最新のタグ付きプレリリース版も検索する
<ul>
<li><code>v0.0.1-pre1</code> など</li>
</ul>
</li>
<li>タグ付けされたバージョンが全く無い場合、 get は最新のコミットを見る</li>
<li>もし、モジュールが後のバージョンで、まだ required とされていない場合、 get は調べたバージョンを使用する
<ul>
<li>最新のリリースよりも新しいプレリリースがあるとか</li>
</ul>
</li>
<li>そうでなければ get は現在の必須バージョンを指定する</li>
</ul>
</li>
<li>デフォルトのバージョン選択は <code>go get golang.org/x/text@v0.3.0</code> のように <code>@version</code> サフィックスをパッケージ引数に追加することで上書きすることが出来る
<ul>
<li>バージョンにはプレフィックスを指定することが出来る。 <code>@v1</code> は <code>v1</code> で始まる最新の利用可能なバージョンを表す</li>
<li>クエリの完全な構文については <code>go help modules</code> を参照</li>
</ul>
</li>
<li>ソース管理リポジトリに保存されているモジュールの場合、バージョンサフィックスはコミットハッシュ、ブランチ識別子、ソース管理システムが知っている他構文 (例えば <code>go get golang.org/x/text@master</code>) のような形でも OK
<ul>
<li>他モジュールのクエリ構文と重複する名前のブランチは、明示的に選択できないことに注意
<ul>
<li>例えば、 <code>@v2</code> というサフィックスは <code>v2</code> で始まる最新のバージョンを意味し、 <code>v2</code> という名前のブランチを意味しない</li>
</ul>
</li>
</ul>
</li>
<li>検討中のモジュールが既に現在の開発モジュールの依存関係にある場合、 get は必要なバージョンを更新する
<ul>
<li>現在の必須バージョンよりも前のバージョンを指定することは有効であり、依存関係をダウングレードする</li>
<li>バージョンサフィックス <code>@none</code> は、必要に応じて依存関係をダウングレードしたり、依存関係に依存するモジュールを削除したりして、依存関係を完全に削除すべきであることを示している</li>
</ul>
</li>
<li>バージョンサフィックス <code>@latest</code> は、指定されたパスで指定されたモジュールの最新マイナーリリースを明示的に要求する
<ul>
<li><code>@upgrade</code> というサフィックスは <code>@latest</code> と似ているが、モジュールが最新のリリースバージョンよりも新しいリビジョンやプレリリースバージョンで既に required とされている場合は、モジュールをダウングレードしない</li>
<li><code>@patch</code> というサフィックスは、最新のパッチリリースを要求する
<ul>
<li>現在必要とされているバージョンと同じメジャーとマイナーのバージョン番号を持つ、最新のリリースされたバージョン</li>
</ul>
</li>
<li><code>@upgrade</code> と同様に <code>@patch</code> は既に required とされているモジュールを新しいバージョンにダウングレードすることは無い</li>
<li>パスが required されていない場合、 <code>@upgrade</code>, <code>@patch</code>, <code>@latest</code> は同等</li>
</ul>
</li>
<li>get のデフォルトでは、ネームドパッケージを含むモジュールの最新バージョンを使用するが、そのモジュールの依存関係の最新バージョンは使用しない
<ul>
<li>かわりに、そのモジュールが要求した特定の依存関係バージョンを使用する
<ul>
<li>例えば、最新の A がモジュール B v1.2.3 を必要とし、一方で B v1.2.4 と v1.3.1 も利用可能である場合、 <code>go get A</code> は最新の A を使用するものの A が要求した通り B v1.2.3 を使用する</li>
</ul>
</li>
<li>特定のモジュールに対して競合する要求がある場合 <code>go get</code> は要求された最大のバージョンを使用することで、それらの要求を解決する</li>
</ul>
</li>
</ul>
<hr>
<p>コマンド実行時のフラグあれこれ</p>
<ul>
<li><code>-d</code> フラグ
<ul>
<li>指定されたパッケージのビルドに必要なソースコードをダウンロードするが、ビルドやインストールは行わない</li>
</ul>
</li>
<li><code>-t</code> フラグ
<ul>
<li>コマンドラインで指定されたパッケージのテストを構築するために必要なモジュールを考慮する</li>
</ul>
</li>
<li><code>-u</code> フラグ
<ul>
<li>コマンドラインで指定されたパッケージの依存関係を提供するモジュールを更新する</li>
<li>前の例の続きで、 <code>go get -u A</code> とした場合には B v1.3.1 の最新の A を使用する</li>
<li>B がモジュール C を必要としているが、 C が A のパッケージをビルドするのに必要なパッケージを提供していない場合、 C は更新されない</li>
</ul>
</li>
<li><code>-u=patch</code> フラグ
<ul>
<li><code>-u patch</code> では無い</li>
<li>依存関係を更新する</li>
<li>デフォルトでパッチリリースを選択するように変更</li>
<li><code>go get -u=patch A@latest</code> は B v1.2.4 の最新の A を使用するが <code>go get -u=patch A</code> は A のパッチリリースを代わりに使用する</li>
</ul>
</li>
<li><code>-t</code> と <code>-u</code> を同時に使うと get はテストの依存関係も更新する
<ul>
<li>一般的に、新しい依存関係を追加すると、ビルドを動作させるために既存の依存関係をアップグレードする必要があるかもしれないが、 <code>go get</code> はこれを自動的に行う</li>
<li>同様に、ある依存関係をダウングレードすると、他の依存関係をダウングレードする必要があるかもしれない</li>
</ul>
</li>
<li><code>-insecure</code> フラグ
<ul>
<li>HTTP のような安全ではないスキームを使って、リポジトリからの取得やカスタムドメインの解決を許可する</li>
<li>注意して使用すること</li>
<li>環境変数 <code>GOINSECURE</code> は、安全ではないスキームを使って、どのモジュールを取得するかを制御することが出来るので、一般的によりよい代替手段となる</li>
<li>詳細は <code>go help environment</code> を参照</li>
</ul>
</li>
</ul>
<hr>
<p>ネームドパッケージのダウンロード、ビルド、インストール</p>
<ul>
<li>引数にモジュールの名前があってもパッケージでは無い場合、ビルドに失敗する代わりに、その引数のインストールステップはスキップされる
<ul>
<li>パッケージではない場合にはモジュールのルートディレクトリに Go コードが無いためビルドに失敗する</li>
<li>例えば、 <code>go get golang.org/x/perf</code> は、インポートパスに対応するコードが無くても成功する</li>
</ul>
</li>
<li>パッケージパターンは許可されており、モジュールのバージョンを解決した後に展開されることに注意
<ul>
<li>例えば、 <code>go get golang.org/x/perf/cmd...</code> は最新の golang.org/x/perf を追加し、その最新バージョンのコマンドをインストールする</li>
</ul>
</li>
<li>パッケージの引数が無い場合、 <code>go get</code> はカレントディレクトリに Go パッケージがある場合には、そのパッケージに適用される
<ul>
<li>特に <code>go get -u</code> と <code>go get -u=patch</code> は、そのパッケージの全ての依存関係を更新する</li>
<li>パッケージ引数が無く、 <code>-u</code> も無い場合、 <code>go get</code> は <code>go install</code> 以上のものではなく、 <code>go get -d</code> は <code>go list</code> 以上のものでは無い</li>
</ul>
</li>
<li>モジュールの詳細については <code>go help modules</code></li>
<li>パッケージしていについては <code>go help packages</code></li>
<li>このテキストでは、ソースコードと依存関係を管理するためにモジュールを使用した get の動作について説明している
<ul>
<li>代わりに go コマンドが <code>GOPATH</code> モードで実行されている場合、 get のフラグと効果の詳細は <code>go help get</code> と同様に変更される</li>
<li>詳細については <code>go help modules</code> と <code>go help gopath-get</code> を参照</li>
</ul>
</li>
<li><code>go build</code>, <code>go install</code>, <code>go clean</code>, <code>go mod</code> も参照しよう</li>
</ul>
<h2 id="go-help-get">go help get</h2>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">% go <span class="nb">help</span> get
usage: go get <span class="o">[</span>-d<span class="o">]</span> <span class="o">[</span>-t<span class="o">]</span> <span class="o">[</span>-u<span class="o">]</span> <span class="o">[</span>-v<span class="o">]</span> <span class="o">[</span>-insecure<span class="o">]</span> <span class="o">[</span>build flags<span class="o">]</span> <span class="o">[</span>packages<span class="o">]</span>

Get resolves and adds dependencies to the current development module and <span class="k">then</span> builds and installs them.

The first step is to resolve which dependencies to add.

For each named package or package pattern, get must decide which version of the corresponding module to use.
By default, get looks up the latest tagged release version, such as v0.4.5 or v1.2.3. If there are no tagged release versions, get looks up the latest tagged pre-release version, such as v0.0.1-pre1. 
If there are no tagged versions at all, get looks up the latest known commit. 
If the module is not already required at a later version <span class="o">(</span><span class="k">for</span> example, a pre-release newer than the latest release<span class="o">)</span>, get will use the version it looked up. 
Otherwise, get will use the currently required version.

This default version selection can be overridden by adding an @version suffix to the package argument, as in <span class="s1">&#39;go get golang.org/x/text@v0.3.0&#39;</span>.
The version may be a prefix: @v1 denotes the latest available version starting with v1. 
See <span class="s1">&#39;go help modules&#39;</span> under the heading <span class="s1">&#39;Module queries&#39;</span> <span class="k">for</span> the full query syntax.

For modules stored in <span class="nb">source</span> control repositories, the version suffix can also be a commit hash, branch identifier, or other syntax known to the <span class="nb">source</span> control system, as in <span class="s1">&#39;go get golang.org/x/text@master&#39;</span>. 
Note that branches with names that overlap with other module query syntax cannot be selected explicitly. 
For example, the suffix @v2 means the latest version starting with v2, not the branch named v2.

If a module under consideration is already a dependency of the current development module, <span class="k">then</span> get will update the required version.
Specifying a version earlier than the current required version is valid and downgrades the dependency. 
The version suffix @none indicates that the dependency should be removed entirely, downgrading or removing modules depending on it as needed.

The version suffix @latest explicitly requests the latest minor release of the module named by the given path. 
The suffix @upgrade is like @latest but will not downgrade a module <span class="k">if</span> it is already required at a revision or pre-release version newer than the latest released version. 
The suffix @patch requests the latest patch release: the latest released version with the same major and minor version numbers as the currently required version. 
Like @upgrade, @patch will not downgrade a module already required at a newer version. 
If the path is not already required, @upgrade and @patch are equivalent to @latest.

Although get defaults to using the latest version of the module containing a named package, it does not use the latest version of that module<span class="s1">&#39;s dependencies.
</span><span class="s1">Instead it prefers to use the specific dependency versions requested by that module. 
</span><span class="s1">For example, if the latest A requires module B v1.2.3, while B v1.2.4 and v1.3.1 are also available, then &#39;</span>go get A<span class="s1">&#39; will use the latest A but then use B v1.2.3, as requested by A. 
</span><span class="s1">(If there are competing requirements for a particular module, then &#39;</span>go get<span class="s1">&#39; resolves those requirements by taking the maximum requested version.)
</span><span class="s1">
</span><span class="s1">The -t flag instructs get to consider modules needed to build tests of packages specified on the command line.
</span><span class="s1">
</span><span class="s1">The -u flag instructs get to update modules providing dependencies of packages named on the command line to use newer minor or patch releases when available. 
</span><span class="s1">Continuing the previous example, &#39;</span>go get -u A<span class="s1">&#39; will use the latest A with B v1.3.1 (not B v1.2.3). 
</span><span class="s1">If B requires module C, but C does not provide any packages needed to build packages in A (not including tests), then C will not be updated.
</span><span class="s1">
</span><span class="s1">The -u=patch flag (not -u patch) also instructs get to update dependencies, but changes the default to select patch releases.
</span><span class="s1">Continuing the previous example, &#39;</span>go get -u<span class="o">=</span>patch A@latest<span class="s1">&#39; will use the latest A with B v1.2.4 (not B v1.2.3), while &#39;</span>go get -u<span class="o">=</span>patch A<span class="s1">&#39; will use a patch release of A instead.
</span><span class="s1">
</span><span class="s1">When the -t and -u flags are used together, get will update test dependencies as well.
</span><span class="s1">
</span><span class="s1">In general, adding a new dependency may require upgrading existing dependencies to keep a working build, and &#39;</span>go get<span class="s1">&#39; does this automatically. 
</span><span class="s1">Similarly, downgrading one dependency may require downgrading other dependencies, and &#39;</span>go get<span class="s1">&#39; does this automatically as well.
</span><span class="s1">
</span><span class="s1">The -insecure flag permits fetching from repositories and resolving custom domains using insecure schemes such as HTTP. 
</span><span class="s1">Use with caution. 
</span><span class="s1">The GOINSECURE environment variable is usually a better alternative, since it provides control over which modules may be retrieved using an insecure scheme. 
</span><span class="s1">See &#39;</span>go <span class="nb">help</span> environment<span class="s1">&#39; for details.
</span><span class="s1">
</span><span class="s1">The second step is to download (if needed), build, and install the named packages.
</span><span class="s1">
</span><span class="s1">If an argument names a module but not a package (because there is no Go source code in the module&#39;</span>s root directory<span class="o">)</span>, <span class="k">then</span> the install step is skipped <span class="k">for</span> that argument, instead of causing a build failure. 
For example <span class="s1">&#39;go get golang.org/x/perf&#39;</span> succeeds even though there is no code corresponding to that import path.

Note that package patterns are allowed and are expanded after resolving the module versions. 
For example, <span class="s1">&#39;go get golang.org/x/perf/cmd/...&#39;</span> adds the latest golang.org/x/perf and <span class="k">then</span> installs the commands in that latest version.

The -d flag instructs get to download the <span class="nb">source</span> code needed to build the named packages, including downloading necessary dependencies, but not to build and install them.

With no package arguments, <span class="s1">&#39;go get&#39;</span> applies to Go package in the current directory, <span class="k">if</span> any. In particular, <span class="s1">&#39;go get -u&#39;</span> and <span class="s1">&#39;go get -u=patch&#39;</span> update all the dependencies of that package.
With no package arguments and also without -u, <span class="s1">&#39;go get&#39;</span> is not much more than <span class="s1">&#39;go install&#39;</span>, and <span class="s1">&#39;go get -d&#39;</span> not much more than <span class="s1">&#39;go list&#39;</span>.

For more about modules, see <span class="s1">&#39;go help modules&#39;</span>.

For more about specifying packages, see <span class="s1">&#39;go help packages&#39;</span>.

This text describes the behavior of get using modules to manage <span class="nb">source</span> code and dependencies. If instead the go <span class="nb">command</span> is running in GOPATH mode, the details of get<span class="s1">&#39;s flags and effects change, as does &#39;</span>go <span class="nb">help</span> get<span class="s1">&#39;.
</span><span class="s1">See &#39;</span>go <span class="nb">help</span> modules<span class="s1">&#39; and &#39;</span>go <span class="nb">help</span> gopath-get<span class="err">&#39;</span>.

See also: go build, go install, go clean, go mod.
</code></pre></div><h2 id="この記事を試した環境">この記事を試した環境</h2>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">% sw_vers
ProductName:    Mac OS X
ProductVersion: 10.15.7
BuildVersion:   19H114
% go version
go version go1.15.6 darwin/amd64
</code></pre></div>]]></content>
		</item>
		
		<item>
			<title>UUIDv4 を Go で生成する</title>
			<link>https://noid11.github.io/posts/generate-uuidv4-by-golang/</link>
			<pubDate>Sat, 16 Jan 2021 11:31:50 +0900</pubDate>
			
			<guid>https://noid11.github.io/posts/generate-uuidv4-by-golang/</guid>
			<description></description>
			<content type="html"><![CDATA[<h2 id="セットアップ">セットアップ</h2>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">go mod init generate-uuidv4-by-golang
go get github.com/google/uuid
</code></pre></div><h2 id="実装例">実装例</h2>
<p>main.go</p>
<div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;fmt&#34;</span>

	<span class="s">&#34;github.com/google/uuid&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">uuidv4</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">uuid</span><span class="p">.</span><span class="nf">NewRandom</span><span class="p">()</span>
	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
		<span class="k">return</span>
	<span class="p">}</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">uuidv4</span><span class="p">.</span><span class="nf">String</span><span class="p">())</span>
<span class="p">}</span>
</code></pre></div><h2 id="実行例">実行例</h2>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">% go run main.go
3c85b7b7-0b11-4612-9b1d-1dab37e20c9d
</code></pre></div><h2 id="リファレンス">リファレンス</h2>
<p>uuid · pkg.go.dev<br>
<a href="https://pkg.go.dev/github.com/google/uuid#NewRandom">https://pkg.go.dev/github.com/google/uuid#NewRandom</a></p>
<p>google/uuid: Go package for UUIDs based on RFC 4122 and DCE 1.1: Authentication and Security Services.<br>
<a href="https://github.com/google/uuid">https://github.com/google/uuid</a></p>
<p>RFC 4122 - A Universally Unique IDentifier (UUID) URN Namespace<br>
<a href="https://tools.ietf.org/html/rfc4122">https://tools.ietf.org/html/rfc4122</a></p>
<p>RFC 4122 - A Universally Unique IDentifier (UUID) URN Namespace 日本語訳<br>
<a href="https://tex2e.github.io/rfc-translater/html/rfc4122.html">https://tex2e.github.io/rfc-translater/html/rfc4122.html</a></p>
<h2 id="この記事を試した環境">この記事を試した環境</h2>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">% sw_vers
ProductName:    Mac OS X
ProductVersion: 10.15.7
BuildVersion:   19H114
% go version
go version go1.15.6 darwin/amd64
</code></pre></div><p>go.mod</p>
<div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="nx">module</span> <span class="nx">golang</span><span class="o">-</span><span class="nx">uuid</span>

<span class="k">go</span> <span class="mf">1.15</span>

<span class="nx">require</span> <span class="nx">github</span><span class="p">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">google</span><span class="o">/</span><span class="nx">uuid</span> <span class="nx">v1</span><span class="mf">.1.5</span> <span class="c1">// indirect
</span></code></pre></div><p>go.sum</p>
<div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="nx">github</span><span class="p">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">google</span><span class="o">/</span><span class="nx">uuid</span> <span class="nx">v1</span><span class="mf">.1.5</span> <span class="nx">h1</span><span class="p">:</span><span class="nx">kxhtnfFVi</span><span class="o">+</span><span class="nx">rYdOALN0B3k9UT86zVJKfBimRaciULW4I</span><span class="p">=</span>
<span class="nx">github</span><span class="p">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">google</span><span class="o">/</span><span class="nx">uuid</span> <span class="nx">v1</span><span class="mf">.1.5</span><span class="o">/</span><span class="k">go</span><span class="p">.</span><span class="nx">mod</span> <span class="nx">h1</span><span class="p">:</span><span class="nx">TIyPZe4MgqvfeYDBFedMoGGpEw</span><span class="o">/</span><span class="nx">LqOeaOT</span><span class="o">+</span><span class="nx">nhxU</span><span class="o">+</span><span class="nx">yHo</span><span class="p">=</span>
</code></pre></div>]]></content>
		</item>
		
		<item>
			<title>mktemp コマンド</title>
			<link>https://noid11.github.io/posts/mktemp-command/</link>
			<pubDate>Sat, 16 Jan 2021 08:56:33 +0900</pubDate>
			
			<guid>https://noid11.github.io/posts/mktemp-command/</guid>
			<description>&lt;ul&gt;
&lt;li&gt;一時的なファイルやディレクトリを作成する mktemp コマンドについて調べたメモ&lt;/li&gt;
&lt;li&gt;一時的なディレクトリを作成して cd で移動しつつ作業する・・・といった事がサクッとできて便利&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;(mktemp -d)&amp;#34;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
			<content type="html"><![CDATA[<ul>
<li>一時的なファイルやディレクトリを作成する mktemp コマンドについて調べたメモ</li>
<li>一時的なディレクトリを作成して cd で移動しつつ作業する・・・といった事がサクッとできて便利</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">cd</span> <span class="s2">&#34;(mktemp -d)&#34;</span>
</code></pre></div><h2 id="一時的なファイルを作成する">一時的なファイルを作成する</h2>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">mktemp
</code></pre></div><p>実行例</p>
<ul>
<li><code>/var/folders/</code> 配下に一時的な空のファイルが作成される</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ mktemp
/var/folders/2s/xv1nds5j2d3b795qy43yzcthb7qc6n/T/tmp.9HMytC5L 
% ls -lh /var/folders/2s/xv1nds5j2d3b795qy43yzcthb7qc6n/T/tmp.9HMytC5L 
-rw-------  <span class="m">1</span> myusername  <span class="m">1896053708</span>     0B Jan <span class="m">16</span> 09:03 /var/folders/2s/xv1nds5j2d3b795qy43yzcthb7qc6n/T/tmp.9HMytC5L
% cat /var/folders/2s/xv1nds5j2d3b795qy43yzcthb7qc6n/T/tmp.9HMytC5L
</code></pre></div><h2 id="一時的なディレクトリを作成する">一時的なディレクトリを作成する</h2>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">mktemp -d
</code></pre></div><p>実行例</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">% mktemp -d
/var/folders/2s/xv1nds5j2d3b795qy43yzcthb7qc6n/T/tmp.t3PtNiwY
% ls -lh /var/folders/2s/xv1nds5j2d3b795qy43yzcthb7qc6n/T/ <span class="p">|</span> grep t3PtNiwY
drwx------      <span class="m">2</span> myusername  <span class="m">1896053708</span>    64B Jan <span class="m">16</span> 09:22 tmp.t3PtNiwY
</code></pre></div><h2 id="生成されるファイルやディレクトリの名前を指定する">生成されるファイルやディレクトリの名前を指定する</h2>
<ul>
<li><code>mktemp [ファイル名].XXXXX</code> といった形で、任意の X を追加することでランダムな文字列を設定できる</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">mktemp mytmp.XXXXX
mktemp -d mytmp.XXXXX
</code></pre></div><p>実行例</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">% mktemp mytmp.XXXXX
mytmp.M2wuV
% mktemp -d mytmp.XXXXX
mytmp.moGrd
</code></pre></div><h2 id="シェルスクリプト例">シェルスクリプト例</h2>
<p>安全な一時ファイルを取得できない場合にスクリプトを終了する例</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh"><span class="nv">tempfoo</span><span class="o">=</span><span class="sb">`</span>basename <span class="nv">$0</span><span class="sb">`</span>
<span class="nv">TMPFILE</span><span class="o">=</span><span class="sb">`</span>mktemp /tmp/<span class="si">${</span><span class="nv">tempfoo</span><span class="si">}</span>.XXXXXX<span class="sb">`</span> <span class="o">||</span> <span class="nb">exit</span> <span class="m">1</span>
<span class="nb">echo</span> <span class="s2">&#34;program output&#34;</span> &gt;&gt; <span class="nv">$TMPFILE</span>
</code></pre></div><p>実行例</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">% sh example.sh
% cat example.sh.kZXaAa
program output
</code></pre></div><hr>
<p>$TMPDIR を使う</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh"><span class="nv">tempfoo</span><span class="o">=</span><span class="sb">`</span>basename <span class="nv">$0</span><span class="sb">`</span>
<span class="nv">TMPFILE</span><span class="o">=</span><span class="sb">`</span>mktemp -t <span class="si">${</span><span class="nv">tempfoo</span><span class="si">}</span><span class="sb">`</span> <span class="o">||</span> <span class="nb">exit</span> <span class="m">1</span>
<span class="nb">echo</span>	<span class="s2">&#34;program output&#34;</span> &gt;&gt; <span class="nv">$TMPFILE</span>
</code></pre></div><p>実行例</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">% sh example.sh
% <span class="nb">echo</span> <span class="nv">$TMPDIR</span>
/var/folders/2s/xv1nds5j2d3b795qy43yzcthb7qc6n/T/
% ls -l /var/folders/2s/xv1nds5j2d3b795qy43yzcthb7qc6n/T/ <span class="p">|</span> grep example
-rw-------      <span class="m">1</span> myusername  <span class="m">1896053708</span>        <span class="m">15</span>  <span class="m">1</span> <span class="m">16</span> 09:43 example.sh.gihepulJ
</code></pre></div><hr>
<p>エラーハンドリングを考慮する</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh"><span class="nv">tempfoo</span><span class="o">=</span><span class="sb">`</span>basename <span class="nv">$0</span><span class="sb">`</span>
<span class="nv">TMPFILE</span><span class="o">=</span><span class="sb">`</span>mktemp -q /tmp/<span class="si">${</span><span class="nv">tempfoo</span><span class="si">}</span>.XXXXXX<span class="sb">`</span>
<span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> -ne <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$0</span><span class="s2">: Can&#39;t create temp file, exiting...&#34;</span>
    <span class="nb">exit</span> <span class="m">1</span>
<span class="k">fi</span>
</code></pre></div><h2 id="オプション">オプション</h2>
<ul>
<li><code>-d</code> オプション: 一時的なファイルではなく、一時的なディレクトリを作成する</li>
<li><code>-q</code> オプション: エラーメッセージを表示しない</li>
<li><code>-t</code> オプション: 指定した prefix と、 TMPDIR が設定されている場合にはそれを使って、テンプレートを作成し、ファイル名テンプレートを作成する</li>
<li><code>-u</code> オプション: unsafe モードを使用する。一時的なファイルは mktemp コマンドが終了する前に、リンクが解除される。これは mktemp（3）よりもわずかに優れていますが、それでも競合状態が発生するため、このオプションの使用は推奨されていない</li>
</ul>
<h2 id="manual">manual</h2>
<pre><code>% man mktemp
MKTEMP(1)                 BSD General Commands Manual                MKTEMP(1)

NAME
     mktemp -- make temporary file name (unique)

SYNOPSIS
     mktemp [-d] [-q] [-t prefix] [-u] template ...
     mktemp [-d] [-q] [-u] -t prefix

DESCRIPTION
     The mktemp utility takes each of the given file name templates and overwrites a portion of it to create a file name. 
     This file name is unique and suitable for use by the application.  
     The template may be any file name with some number of `Xs' appended to it, for example /tmp/temp.XXXX. 
     The trailing `Xs' are replaced with the current process number and/or a unique letter combination. 
     The number of unique file names mktemp can return depends on the number of `Xs' provided; six `Xs' will result in mktemp selecting 1 of 56800235584 (62 ** 6) possible file names. 
     On case-insensitive file systems, the effective number of unique names is significantly less; given six `Xs', mktemp will instead select 1 of 2176782336 (36 ** 6) possible unique file names.

     If mktemp can successfully generate a unique file name, the file is created with mode 0600 (unless the -u flag is given) and the filename is printed to standard output.

     If the -t prefix option is given, mktemp will generate a template string based on the prefix and the _CS_DARWIN_USER_TEMP_DIR configuration variable if available. 
     Fallback locations if _CS_DARWIN_USER_TEMP_DIR is not available are TMPDIR and /tmp.  
     Care should be taken to ensure that it is appropriate to use an environment variable potentially supplied by the user.

     If no arguments are passed or if only the -d flag is passed mktemp behaves as if -t tmp was supplied.

     Any number of temporary files may be created in a single invocation, including one based on the internal template resulting from the -t flag.

     The mktemp utility is provided to allow shell scripts to safely use temporary files.  
     Traditionally, many shell scripts take the name of the program with the pid as a suffix and use that as a temporary file name.  
     This kind of naming scheme is predictable and the race condition it creates is easy for an attacker to win. 
     A safer, though still inferior, approach is to make a temporary directory using the same naming scheme.  
     While this does allow one to guarantee that a temporary file will not be subverted, it still allows a simple denial of service attack.  
     For these reasons it is suggested that mktemp be used instead.

OPTIONS
     The available options are as follows:

     -d      Make a directory instead of a file.

     -q      Fail silently if an error occurs.  This is useful if a script does not want error output to go to standard error.

     -t prefix
             Generate a template (using the supplied prefix and TMPDIR if set) to create a filename template.

     -u      Operate in ``unsafe'' mode.  The temp file will be unlinked before mktemp exits.  This is slightly better than mktemp(3) but still introduces
             a race condition.  Use of this option is not encouraged.

EXIT STATUS
     The mktemp utility exits 0 on success, and &gt;0 if an error occurs.

EXAMPLES
     The following sh(1) fragment illustrates a simple use of mktemp where the script should quit if it cannot get a safe temporary file.

           tempfoo=`basename $0`
           TMPFILE=`mktemp /tmp/${tempfoo}.XXXXXX` || exit 1
           echo &quot;program output&quot; &gt;&gt; $TMPFILE

     To allow the use of $TMPDIR:

           tempfoo=`basename $0`
           TMPFILE=`mktemp -t ${tempfoo}` || exit 1
           echo &quot;program output&quot; &gt;&gt; $TMPFILE

     In this case, we want the script to catch the error itself.

           tempfoo=`basename $0`
           TMPFILE=`mktemp -q /tmp/${tempfoo}.XXXXXX`
           if [ $? -ne 0 ]; then
                   echo &quot;$0: Can't create temp file, exiting...&quot;
                   exit 1
           fi

SEE ALSO
     mkdtemp(3), mkstemp(3), mktemp(3), confstr(3), environ(7)

HISTORY
     A mktemp utility appeared in OpenBSD 2.1.  This implementation was written independently based on the OpenBSD man page, and first appeared in
     FreeBSD 2.2.7.  This man page is taken from OpenBSD.

BSD                            December 30, 2005                           BSD
</code></pre><h2 id="この記事を試した環境">この記事を試した環境</h2>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">% sw_vers
ProductName:    Mac OS X
ProductVersion: 10.15.7
BuildVersion:   19H114
</code></pre></div>]]></content>
		</item>
		
		<item>
			<title>Heroku CLI を使って Heroku Postgres をセットアップする方法</title>
			<link>https://noid11.github.io/posts/setup-heroku-postgres-by-heroku-cli/</link>
			<pubDate>Thu, 14 Jan 2021 02:29:30 +0900</pubDate>
			
			<guid>https://noid11.github.io/posts/setup-heroku-postgres-by-heroku-cli/</guid>
			<description>&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://jp.heroku.com/postgres&#34;&gt;Heroku が提供するマネージドデータベースである Heroku Postgres&lt;/a&gt; を &lt;a href=&#34;https://devcenter.heroku.com/ja/articles/heroku-cli&#34;&gt;Heroku CLI&lt;/a&gt; からセットアップして接続するまでを試す手順&lt;/li&gt;
&lt;li&gt;Pros
&lt;ul&gt;
&lt;li&gt;PostgreSQL や SQL を学習したい時にサクッと使えて便利&lt;/li&gt;
&lt;li&gt;AWS Lambda 等ローカル環境の PostgreSQL が接続できない環境から、ちょっとしたデータベース接続を試したいような場合に便利
&lt;ul&gt;
&lt;li&gt;RDS よりも立ち上がりが速いし、無料&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Cons
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://jp.heroku.com/pricing&#34;&gt;無料の Hobby Dev プラン&lt;/a&gt;だと、レコード数 10 K と同時接続数 20 といった制限があるので注意&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;</description>
			<content type="html"><![CDATA[<ul>
<li><a href="https://jp.heroku.com/postgres">Heroku が提供するマネージドデータベースである Heroku Postgres</a> を <a href="https://devcenter.heroku.com/ja/articles/heroku-cli">Heroku CLI</a> からセットアップして接続するまでを試す手順</li>
<li>Pros
<ul>
<li>PostgreSQL や SQL を学習したい時にサクッと使えて便利</li>
<li>AWS Lambda 等ローカル環境の PostgreSQL が接続できない環境から、ちょっとしたデータベース接続を試したいような場合に便利
<ul>
<li>RDS よりも立ち上がりが速いし、無料</li>
</ul>
</li>
</ul>
</li>
<li>Cons
<ul>
<li><a href="https://jp.heroku.com/pricing">無料の Hobby Dev プラン</a>だと、レコード数 10 K と同時接続数 20 といった制限があるので注意</li>
</ul>
</li>
</ul>
<h2 id="postgresql-をインストール">PostgreSQL をインストール</h2>
<p>Heroku CLI 経由で PostgreSQL に接続する際には <code>psql</code> が必要になるため、事前にインストールしておく</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">brew install postgresql

<span class="c1"># PostgreSQL のバージョンを指定したい場合 @ で指定する</span>
brew install postgresql@12

<span class="c1"># バージョン確認</span>
psql --version
</code></pre></div><p>postgresql — Homebrew Formulae<br>
<a href="https://formulae.brew.sh/formula/postgresql">https://formulae.brew.sh/formula/postgresql</a></p>
<p>PostgreSQL: Documentation: 12: psql<br>
<a href="https://www.postgresql.org/docs/12/app-psql.html">https://www.postgresql.org/docs/12/app-psql.html</a></p>
<p>psql<br>
<a href="https://www.postgresql.jp/document/12/html/app-psql.html">https://www.postgresql.jp/document/12/html/app-psql.html</a></p>
<h2 id="heroku-cli-のインストールとセットアップ">Heroku CLI のインストールとセットアップ</h2>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">brew tap heroku/brew <span class="o">&amp;&amp;</span> brew install heroku
heroku login
</code></pre></div><p>The Heroku CLI | Heroku Dev Center<br>
<a href="https://devcenter.heroku.com/articles/heroku-cli">https://devcenter.heroku.com/articles/heroku-cli</a></p>
<h2 id="heroku-postgres-のセットアップ">Heroku Postgres のセットアップ</h2>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">mkdir my-heroku-postgres-env <span class="o">&amp;&amp;</span> <span class="nb">cd</span> my-heroku-postgres-env

<span class="c1"># Heroku App の作成</span>
heroku create

<span class="c1"># Heroku Postgres の作成</span>
heroku addons:create heroku-postgresql:hobby-dev --app myapp

<span class="c1"># Heroku Postgres のバージョンを指定したい場合</span>
heroku addons:create heroku-postgresql:hobby-dev --version<span class="o">=</span>9.5 --app myapp

<span class="c1"># 作成した Heroku Postgres 情報の確認</span>
heroku pg:info --app myapp
</code></pre></div><p>Heroku Postgres | Heroku Dev Center<br>
<a href="https://devcenter.heroku.com/articles/heroku-postgresql#version-support">https://devcenter.heroku.com/articles/heroku-postgresql#version-support</a></p>
<hr>
<p>実行例</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">% mkdir my-heroku-postgres-env <span class="o">&amp;&amp;</span> <span class="nb">cd</span> my-heroku-postgres-env
% heroku create
Creating app... <span class="k">done</span>, ⬢ fierce-depths-xxx
https://fierce-depths-xxx.herokuapp.com/ <span class="p">|</span> https://git.heroku.com/fierce-depths-xxx.git
% heroku addons:create heroku-postgresql:hobby-dev --app fierce-depths-xxx
Creating heroku-postgresql:hobby-dev on ⬢ fierce-depths-xxx... free
Database has been created and is available
 ! This database is empty. If upgrading, you can transfer
 ! data from another database with pg:copy
Created postgresql-concave-yyy as DATABASE_URL
Use heroku addons:docs heroku-postgresql to view documentation
% heroku pg:info --app fierce-depths-xxx
<span class="o">===</span> DATABASE_URL
Plan:                  Hobby-dev
Status:                Available
Connections:           0/20
PG Version:            12.5
Created:               2021-01-13 17:48 UTC
Data Size:             7.9 MB
Tables:                <span class="m">0</span>
Rows:                  0/10000 <span class="o">(</span>In compliance<span class="o">)</span>
Fork/Follow:           Unsupported
Rollback:              Unsupported
Continuous Protection: Off
Add-on:                postgresql-concave-yyy
</code></pre></div><h2 id="heroku-postgres-への接続">Heroku Postgres への接続</h2>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># Heroku CLI での認証情報を使った接続</span>
heroku pg:psql --app myapp

<span class="c1"># PostgreSQL のクレデンシャルを取得して普通に psql でも接続できる</span>
heroku pg:credentials --app myapp

<span class="c1"># Connection URL での指定(パスワードが含まれるので取り扱い注意)</span>
psql --dbname<span class="o">=</span>postgres://db-username:db-user-password@db-hostname:db-post/db-name

<span class="c1"># 冗長な指定(コマンド実行後にパスワードを入力する必要あり)</span>
psql --dbname<span class="o">=</span>db-name --host<span class="o">=</span>ec2-db-hostname --port<span class="o">=</span>db-post --username<span class="o">=</span>db-username --password
</code></pre></div><hr>
<p>実行例</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">% heroku pg:credentials:url --app fierce-depths-xxx
Connection information <span class="k">for</span> default credential.
Connection info string:
   <span class="s2">&#34;dbname=xxx host=ec2-xxx-xxx-xxx-xxx.compute-1.amazonaws.com port=5432 user=yyy password=zzz sslmode=require&#34;</span>
Connection URL:
   postgres://yyy:zzz@ec2-xxx-xxx-xxx-xxx.compute-1.amazonaws.com:5432/xxx

% psql --dbname<span class="o">=</span>postgres://yyy:zzz@ec2-xxx-xxx-xxx-xxx.compute-1.amazonaws.com.com:5432/xxx
% psql --dbname<span class="o">=</span>xxx --host<span class="o">=</span>ec2-xxx-xxx-xxx-xxx.compute-1.amazonaws.com --port<span class="o">=</span><span class="m">5432</span> --username<span class="o">=</span>yyy --password
</code></pre></div><h2 id="クリーンアップ">クリーンアップ</h2>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># Heroku Postgres Add-on のみ削除したい場合</span>
heroku addons:destroy heroku-postgresql:hobby-dev --app myapp

<span class="c1"># Heroku App ごと削除したい場合</span>
heroku apps:destroy --app myapp
</code></pre></div><hr>
<p>実行例</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">% heroku addons:destroy heroku-postgresql:hobby-dev --app fierce-depths-xxx
 ▸    WARNING: Destructive Action
 ▸    This <span class="nb">command</span> will affect the app fierce-depths-xxx
 ▸    To proceed, <span class="nb">type</span> fierce-depths-xxx or re-run this <span class="nb">command</span> with --confirm fierce-depths-xxx

&gt; fierce-depths-xxx
Destroying postgresql-concave-yyy on ⬢ fierce-depths-xxx... <span class="k">done</span>

% heroku apps:destroy --app fierce-depths-xxx
 ▸    WARNING: This will delete ⬢ fierce-depths-xxx including all add-ons.
 ▸    To proceed, <span class="nb">type</span> fierce-depths-xxx or re-run this <span class="nb">command</span> with --confirm fierce-depths-xxx

&gt; fierce-depths-xxx
Destroying ⬢ fierce-depths-xxx <span class="o">(</span>including all add-ons<span class="o">)</span>... <span class="k">done</span>
</code></pre></div><h2 id="この記事を試した環境">この記事を試した環境</h2>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">% sw_vers
ProductName:    Mac OS X
ProductVersion: 10.15.7
BuildVersion:   19H114
% psql --version
psql <span class="o">(</span>PostgreSQL<span class="o">)</span> 13.1
% heroku --version
heroku/7.47.7 darwin-x64 node-v12.16.2
</code></pre></div>]]></content>
		</item>
		
		<item>
			<title>Playwright を golang から使う</title>
			<link>https://noid11.github.io/posts/hello-playwright-with-golang/</link>
			<pubDate>Tue, 12 Jan 2021 14:51:07 +0900</pubDate>
			
			<guid>https://noid11.github.io/posts/hello-playwright-with-golang/</guid>
			<description>&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://playwright.dev/&#34;&gt;playwright&lt;/a&gt; を Go で使える &lt;a href=&#34;https://github.com/mxschmitt/playwright-go&#34;&gt;playwright-go&lt;/a&gt; を動かしたメモ&lt;/li&gt;
&lt;li&gt;build したバイナリには Chromium などのエンジンは含まれず、バイナリ実行時にダウンロードが発生する
&lt;ul&gt;
&lt;li&gt;なのでクロスコンパイルして動かしても、バイナリを動かす環境にブラウザエンジンを動かす共有ライブラリが無い場合、ブラウザの起動に失敗してエラーとなる&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;</description>
			<content type="html"><![CDATA[<ul>
<li><a href="https://playwright.dev/">playwright</a> を Go で使える <a href="https://github.com/mxschmitt/playwright-go">playwright-go</a> を動かしたメモ</li>
<li>build したバイナリには Chromium などのエンジンは含まれず、バイナリ実行時にダウンロードが発生する
<ul>
<li>なのでクロスコンパイルして動かしても、バイナリを動かす環境にブラウザエンジンを動かす共有ライブラリが無い場合、ブラウザの起動に失敗してエラーとなる</li>
</ul>
</li>
</ul>
<h2 id="プロジェクトのセットアップ">プロジェクトのセットアップ</h2>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># directory setup</span>
mkdir my-playwright-go <span class="o">&amp;&amp;</span> <span class="nb">cd</span> my-playwright-go

<span class="c1"># go modules setup</span>
go mod init my-playwright-go
go get github.com/mxschmitt/playwright-go

<span class="c1"># コード書くファイル作成</span>
touch main.go
</code></pre></div><h2 id="コードを書く">コードを書く</h2>
<ul>
<li><a href="https://news.ycombinator.com">https://news.ycombinator.com</a> にアクセスして各記事のタイトルを出力するコード</li>
<li><a href="https://github.com/mxschmitt/playwright-go/tree/master/examples">公式サンプルがいくつかある</a>ので、参考にすると良いかも</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;fmt&#34;</span>
	<span class="s">&#34;log&#34;</span>

	<span class="s">&#34;github.com/mxschmitt/playwright-go&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">pw</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">playwright</span><span class="p">.</span><span class="nf">Run</span><span class="p">()</span>
	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="nx">log</span><span class="p">.</span><span class="nf">Fatalf</span><span class="p">(</span><span class="s">&#34;could not start playwright: %v&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
	<span class="p">}</span>
	<span class="nx">browser</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">pw</span><span class="p">.</span><span class="nx">Chromium</span><span class="p">.</span><span class="nf">Launch</span><span class="p">()</span>
	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="nx">log</span><span class="p">.</span><span class="nf">Fatalf</span><span class="p">(</span><span class="s">&#34;could not launch browser: %v&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
	<span class="p">}</span>
	<span class="nx">page</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">browser</span><span class="p">.</span><span class="nf">NewPage</span><span class="p">()</span>
	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="nx">log</span><span class="p">.</span><span class="nf">Fatalf</span><span class="p">(</span><span class="s">&#34;could not create page: %v&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
	<span class="p">}</span>
	<span class="k">if</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">err</span> <span class="p">=</span> <span class="nx">page</span><span class="p">.</span><span class="nf">Goto</span><span class="p">(</span><span class="s">&#34;https://news.ycombinator.com&#34;</span><span class="p">);</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="nx">log</span><span class="p">.</span><span class="nf">Fatalf</span><span class="p">(</span><span class="s">&#34;could not goto: %v&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
	<span class="p">}</span>
	<span class="nx">entries</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">page</span><span class="p">.</span><span class="nf">QuerySelectorAll</span><span class="p">(</span><span class="s">&#34;.athing&#34;</span><span class="p">)</span>
	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="nx">log</span><span class="p">.</span><span class="nf">Fatalf</span><span class="p">(</span><span class="s">&#34;could not get entries: %v&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
	<span class="p">}</span>
	<span class="k">for</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">entry</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">entries</span> <span class="p">{</span>
		<span class="nx">titleElement</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">entry</span><span class="p">.</span><span class="nf">QuerySelector</span><span class="p">(</span><span class="s">&#34;td.title &gt; a&#34;</span><span class="p">)</span>
		<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
			<span class="nx">log</span><span class="p">.</span><span class="nf">Fatalf</span><span class="p">(</span><span class="s">&#34;could not get title element: %v&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
		<span class="p">}</span>
		<span class="nx">title</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">titleElement</span><span class="p">.</span><span class="nf">TextContent</span><span class="p">()</span>
		<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
			<span class="nx">log</span><span class="p">.</span><span class="nf">Fatalf</span><span class="p">(</span><span class="s">&#34;could not get text content: %v&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
		<span class="p">}</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%d: %s\n&#34;</span><span class="p">,</span> <span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="nx">title</span><span class="p">)</span>
	<span class="p">}</span>
	<span class="k">if</span> <span class="nx">err</span> <span class="p">=</span> <span class="nx">browser</span><span class="p">.</span><span class="nf">Close</span><span class="p">();</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="nx">log</span><span class="p">.</span><span class="nf">Fatalf</span><span class="p">(</span><span class="s">&#34;could not close browser: %v&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
	<span class="p">}</span>
	<span class="k">if</span> <span class="nx">err</span> <span class="p">=</span> <span class="nx">pw</span><span class="p">.</span><span class="nf">Stop</span><span class="p">();</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="nx">log</span><span class="p">.</span><span class="nf">Fatalf</span><span class="p">(</span><span class="s">&#34;could not stop Playwright: %v&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id="動かす">動かす</h2>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">go run main.go
</code></pre></div><h2 id="実行例">実行例</h2>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">% go run main.go
2021/01/12 13:12:19 Downloading driver to /Users/myusername/Library/Caches/ms-playwright-go/0.171.0
2021/01/12 13:12:34 Downloaded driver successfully
2021/01/12 13:12:34 Downloading browsers...
2021/01/12 13:12:36 Downloaded browsers successfully
1: Theseus: A modern experimental OS written from scratch in Rust
2: Ubiquiti Networks Breach
3: Moderna is announcing three new vaccine programs. Seasonal flu, HIV, and Nipah
4: My ISP Is Killing My Idle SSH Sessions. Yours Might Be Too
5: Two Worlds: So Much Prosperity, So Much Skepticism
6: Simple Anomaly Detection Using Plain SQL
7: Steam<span class="s1">&#39;s login method is kinda interesting
</span><span class="s1">8: Europe Is Guaranteeing Citizens the Right to Repair
</span><span class="s1">9: What Is a Gamma Squeeze in the Context of Stock Trading?
</span><span class="s1">10: My personal wishlist for a decentralized social network
</span><span class="s1">11: Show HN: Symmetrical Drawing Tool for Doodling
</span><span class="s1">12: Sirum (YC W15 Nonprofit) hiring engineers to improve healthcare for families
</span><span class="s1">13: A bit on scaling chess.com&#39;</span>s database
14: Intruder at the top of the <span class="m">20</span> meter amateur band?
15: Superintelligence cannot be contained: Lessons from Computability Theory
16: Stealing Your Private YouTube Videos, One Frame at a Time
17: Sinovac<span class="s1">&#39;s vaccine efficacy less than 60% in Brazil trial -report
</span><span class="s1">18: Getting Ready for Launch
</span><span class="s1">19: Are Experts Real?
</span><span class="s1">20: Google Sued by YouTube Rival Rumble over Search Rankings
</span><span class="s1">21: OpenSocial Specification
</span><span class="s1">22: Is the Schrödinger Equation True?
</span><span class="s1">23: A 432-year-old manual on social distancing
</span><span class="s1">24: iPhone 7 with dead NAND netbooting unmodified Ubuntu 20.04 via USB ethernet
</span><span class="s1">25: We need a new media system
</span><span class="s1">26: XTerm: It&#39;</span>s Better Than You Thought
27: Invisible Internet Project <span class="o">(</span>I2P<span class="o">)</span>
28: A Brief History of Consumer Culture
29: How to Hear the ISS
30: Show HN: Thumbnail.ai – Just paste a blog post link and get a thumbnail
</code></pre></div><h2 id="この記事を試した環境">この記事を試した環境</h2>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh">% sw_vers
ProductName:    Mac OS X
ProductVersion: 10.15.7
BuildVersion:   19H114
% go version
go version go1.15.6 darwin/amd64
</code></pre></div><p>go.mod</p>
<div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="nx">module</span> <span class="nx">playwright</span><span class="o">-</span><span class="k">go</span>

<span class="k">go</span> <span class="mf">1.15</span>

<span class="nf">require</span> <span class="p">(</span>
	<span class="nx">github</span><span class="p">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">mxschmitt</span><span class="o">/</span><span class="nx">playwright</span><span class="o">-</span><span class="k">go</span> <span class="nx">v0</span><span class="mf">.171.1</span> <span class="c1">// indirect
</span><span class="c1"></span><span class="p">)</span>
</code></pre></div><p>go.sum</p>
<div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="nx">github</span><span class="p">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">danwakefield</span><span class="o">/</span><span class="nx">fnmatch</span> <span class="nx">v0</span><span class="mf">.0.0</span><span class="o">-</span><span class="mi">20160403171240</span><span class="o">-</span><span class="nx">cbb64ac3d964</span> <span class="nx">h1</span><span class="p">:</span><span class="nx">y5HC9v93H5EPKqaS1UYVg1uYah5Xf51mBfIoWehClUQ</span><span class="p">=</span>
<span class="nx">github</span><span class="p">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">danwakefield</span><span class="o">/</span><span class="nx">fnmatch</span> <span class="nx">v0</span><span class="mf">.0.0</span><span class="o">-</span><span class="mi">20160403171240</span><span class="o">-</span><span class="nx">cbb64ac3d964</span><span class="o">/</span><span class="k">go</span><span class="p">.</span><span class="nx">mod</span> <span class="nx">h1</span><span class="p">:</span><span class="nx">Xd9hchkHSWYkEqJwUGisez3G1QY8Ryz0sdWrLPMGjLk</span><span class="p">=</span>
<span class="nx">github</span><span class="p">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">davecgh</span><span class="o">/</span><span class="k">go</span><span class="o">-</span><span class="nx">spew</span> <span class="nx">v1</span><span class="mf">.1.0</span><span class="o">/</span><span class="k">go</span><span class="p">.</span><span class="nx">mod</span> <span class="nx">h1</span><span class="p">:</span><span class="nx">J7Y8YcW2NihsgmVo</span><span class="o">/</span><span class="nx">mv3lAwl</span><span class="o">/</span><span class="nx">skON4iLHjSsI</span><span class="o">+</span><span class="nx">c5H38</span><span class="p">=</span>
<span class="nx">github</span><span class="p">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">davecgh</span><span class="o">/</span><span class="k">go</span><span class="o">-</span><span class="nx">spew</span> <span class="nx">v1</span><span class="mf">.1.1</span> <span class="nx">h1</span><span class="p">:</span><span class="nx">vj9j</span><span class="o">/</span><span class="nx">u1bqnvCEfJOwUhtlOARqs3</span><span class="o">+</span><span class="nx">rkHYY13jYWTU97c</span><span class="p">=</span>
<span class="nx">github</span><span class="p">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">davecgh</span><span class="o">/</span><span class="k">go</span><span class="o">-</span><span class="nx">spew</span> <span class="nx">v1</span><span class="mf">.1.1</span><span class="o">/</span><span class="k">go</span><span class="p">.</span><span class="nx">mod</span> <span class="nx">h1</span><span class="p">:</span><span class="nx">J7Y8YcW2NihsgmVo</span><span class="o">/</span><span class="nx">mv3lAwl</span><span class="o">/</span><span class="nx">skON4iLHjSsI</span><span class="o">+</span><span class="nx">c5H38</span><span class="p">=</span>
<span class="nx">github</span><span class="p">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">gorilla</span><span class="o">/</span><span class="nx">websocket</span> <span class="nx">v1</span><span class="mf">.4.2</span><span class="o">/</span><span class="k">go</span><span class="p">.</span><span class="nx">mod</span> <span class="nx">h1</span><span class="p">:</span><span class="nx">YR8l580nyteQvAITg2hZ9XVh4b55</span><span class="o">+</span><span class="nx">EU</span><span class="o">/</span><span class="nx">adAjf1fMHhE</span><span class="p">=</span>
<span class="nx">github</span><span class="p">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">h2non</span><span class="o">/</span><span class="nx">filetype</span> <span class="nx">v1</span><span class="mf">.1.0</span><span class="o">/</span><span class="k">go</span><span class="p">.</span><span class="nx">mod</span> <span class="nx">h1</span><span class="p">:</span><span class="mi">319</span><span class="nx">b3zT68BvV</span><span class="o">+</span><span class="nx">WRj7cwy856M2ehB3HqNOt6sy1HndBY</span><span class="p">=</span>
<span class="nx">github</span><span class="p">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">mxschmitt</span><span class="o">/</span><span class="nx">playwright</span><span class="o">-</span><span class="k">go</span> <span class="nx">v0</span><span class="mf">.171.1</span> <span class="nx">h1</span><span class="p">:</span><span class="mh">0XE</span><span class="nx">OVQw8Zse</span><span class="o">+</span><span class="nx">Zue</span><span class="o">+</span><span class="nx">d7v8O</span><span class="o">+</span><span class="nx">IfQnFIilWcK</span><span class="o">/</span><span class="nx">uOGSo0U9Q</span><span class="p">=</span>
<span class="nx">github</span><span class="p">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">mxschmitt</span><span class="o">/</span><span class="nx">playwright</span><span class="o">-</span><span class="k">go</span> <span class="nx">v0</span><span class="mf">.171.1</span><span class="o">/</span><span class="k">go</span><span class="p">.</span><span class="nx">mod</span> <span class="nx">h1</span><span class="p">:</span><span class="nx">a3SD3v</span><span class="o">+</span><span class="mi">56</span><span class="nx">XMA0sDDxXJXy</span><span class="o">+</span><span class="nx">QGnCfXrNZ</span><span class="o">/+</span><span class="mi">4</span><span class="nx">gwR5ioSgU</span><span class="p">=</span>
<span class="nx">github</span><span class="p">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">pmezard</span><span class="o">/</span><span class="k">go</span><span class="o">-</span><span class="nx">difflib</span> <span class="nx">v1</span><span class="mf">.0.0</span> <span class="nx">h1</span><span class="p">:</span><span class="mi">4</span><span class="nx">DBwDE0NGyQoBHbLQYPwSUPoCMWR5BEzIk</span><span class="o">/</span><span class="nx">f1lZbAQM</span><span class="p">=</span>
<span class="nx">github</span><span class="p">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">pmezard</span><span class="o">/</span><span class="k">go</span><span class="o">-</span><span class="nx">difflib</span> <span class="nx">v1</span><span class="mf">.0.0</span><span class="o">/</span><span class="k">go</span><span class="p">.</span><span class="nx">mod</span> <span class="nx">h1</span><span class="p">:</span><span class="nx">iKH77koFhYxTK1pcRnkKkqfTogsbg7gZNVY4sRDYZ</span><span class="o">/</span><span class="mi">4</span><span class="p">=</span>
<span class="nx">github</span><span class="p">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">stretchr</span><span class="o">/</span><span class="nx">objx</span> <span class="nx">v0</span><span class="mf">.1.0</span><span class="o">/</span><span class="k">go</span><span class="p">.</span><span class="nx">mod</span> <span class="nx">h1</span><span class="p">:</span><span class="nx">HFkY916IF</span><span class="o">+</span><span class="nx">rwdDfMAkV7OtwuqBVzrE8GR6GFx</span><span class="o">+</span><span class="nx">wExME</span><span class="p">=</span>
<span class="nx">github</span><span class="p">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">stretchr</span><span class="o">/</span><span class="nx">testify</span> <span class="nx">v1</span><span class="mf">.6.1</span> <span class="nx">h1</span><span class="p">:</span><span class="nx">hDPOHmpOpP40lSULcqw7IrRb</span><span class="o">/</span><span class="nx">u7w6RpDC9399XyoNd0</span><span class="p">=</span>
<span class="nx">github</span><span class="p">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">stretchr</span><span class="o">/</span><span class="nx">testify</span> <span class="nx">v1</span><span class="mf">.6.1</span><span class="o">/</span><span class="k">go</span><span class="p">.</span><span class="nx">mod</span> <span class="nx">h1</span><span class="p">:</span><span class="mi">6</span><span class="nx">Fq8oRcR53rry900zMqJjRRixrwX3KX962</span><span class="o">/</span><span class="nx">h</span><span class="o">/</span><span class="nx">Wwjteg</span><span class="p">=</span>
<span class="nx">gopkg</span><span class="p">.</span><span class="nx">in</span><span class="o">/</span><span class="nx">check</span><span class="p">.</span><span class="nx">v1</span> <span class="nx">v0</span><span class="mf">.0.0</span><span class="o">-</span><span class="mi">20161208181325</span><span class="o">-</span><span class="mi">20</span><span class="nx">d25e280405</span><span class="o">/</span><span class="k">go</span><span class="p">.</span><span class="nx">mod</span> <span class="nx">h1</span><span class="p">:</span><span class="nx">Co6ibVJAznAaIkqp8huTwlJQCZ016jof</span><span class="o">/</span><span class="nx">cbN4VW5Yz0</span><span class="p">=</span>
<span class="nx">gopkg</span><span class="p">.</span><span class="nx">in</span><span class="o">/</span><span class="nx">square</span><span class="o">/</span><span class="k">go</span><span class="o">-</span><span class="nx">jose</span><span class="p">.</span><span class="nx">v2</span> <span class="nx">v2</span><span class="mf">.5.1</span> <span class="nx">h1</span><span class="p">:</span><span class="mi">7</span><span class="nx">odma5RETjNHWJnR32wx8t</span><span class="o">+</span><span class="nx">Io4djHE1PqxCFx3iiZ2w</span><span class="p">=</span>
<span class="nx">gopkg</span><span class="p">.</span><span class="nx">in</span><span class="o">/</span><span class="nx">square</span><span class="o">/</span><span class="k">go</span><span class="o">-</span><span class="nx">jose</span><span class="p">.</span><span class="nx">v2</span> <span class="nx">v2</span><span class="mf">.5.1</span><span class="o">/</span><span class="k">go</span><span class="p">.</span><span class="nx">mod</span> <span class="nx">h1</span><span class="p">:</span><span class="nx">M9dMgbHiYLoDGQrXy7OpJDJWiKiU</span><span class="c1">//h+vD76mk0e1AI=
</span><span class="c1"></span><span class="nx">gopkg</span><span class="p">.</span><span class="nx">in</span><span class="o">/</span><span class="nx">yaml</span><span class="p">.</span><span class="nx">v3</span> <span class="nx">v3</span><span class="mf">.0.0</span><span class="o">-</span><span class="mi">20200313102051</span><span class="o">-</span><span class="mi">9</span><span class="nx">f266ea9e77c</span><span class="o">/</span><span class="k">go</span><span class="p">.</span><span class="nx">mod</span> <span class="nx">h1</span><span class="p">:</span><span class="nx">K4uyk7z7BCEPqu6E</span><span class="o">+</span><span class="nx">C64Yfv1cQ7kz7rIZviUmN</span><span class="o">+</span><span class="nx">EgEM</span><span class="p">=</span>
</code></pre></div>]]></content>
		</item>
		
		<item>
			<title>Playwright を TypeScript で動かすまで</title>
			<link>https://noid11.github.io/posts/hello-playwright-with-typescript/</link>
			<pubDate>Tue, 12 Jan 2021 12:39:32 +0900</pubDate>
			
			<guid>https://noid11.github.io/posts/hello-playwright-with-typescript/</guid>
			<description>&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://playwright.dev/&#34;&gt;Playwright&lt;/a&gt; は Microsoft 製のブラウザ自動化ツール
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.chromium.org/&#34;&gt;Chromium&lt;/a&gt;, &lt;a href=&#34;https://www.mozilla.org/en-US/firefox/&#34;&gt;Firefox&lt;/a&gt;, &lt;a href=&#34;https://webkit.org/&#34;&gt;WebKit&lt;/a&gt; に対応している&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://playwright.dev/docs/docker/README/&#34;&gt;公式 Docker イメージ&lt;/a&gt;も提供されている&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;組み込みで TypeScript をサポートしているとあったので、最低限動かす所まで試したメモ&lt;/li&gt;
&lt;/ul&gt;</description>
			<content type="html"><![CDATA[<ul>
<li><a href="https://playwright.dev/">Playwright</a> は Microsoft 製のブラウザ自動化ツール
<ul>
<li><a href="https://www.chromium.org/">Chromium</a>, <a href="https://www.mozilla.org/en-US/firefox/">Firefox</a>, <a href="https://webkit.org/">WebKit</a> に対応している</li>
<li><a href="https://playwright.dev/docs/docker/README/">公式 Docker イメージ</a>も提供されている</li>
</ul>
</li>
<li>組み込みで TypeScript をサポートしているとあったので、最低限動かす所まで試したメモ</li>
</ul>
<h2 id="プロジェクトのセットアップ">プロジェクトのセットアップ</h2>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh">mkdir my-playwright-project <span class="o">&amp;&amp;</span> <span class="nb">cd</span> my-playwright-project

<span class="c1"># npm 初期化 </span>
npm init --yes

<span class="c1"># playwright のインストール</span>
<span class="c1">#   公式では --save-dev オプションを使っているが、不要な気がする・・・と思ったが E2E などのテスト目的で使う場合には --save-dev 使うべきだった</span>
<span class="c1">#   chromium, firefox, webkit がダウンロードされ、 300 MB 程度のトラフィックが発生するので注意</span>
npm install playwright

<span class="c1"># typescript セットアップ</span>
npm install --save-dev typescript @types/node@12 ts-node
npx tsc --init

<span class="c1"># コードを書いていく</span>
touch main.ts
</code></pre></div><h2 id="ミニマムなコード実装">ミニマムなコード実装</h2>
<div class="highlight"><pre class="chroma"><code class="language-ts" data-lang="ts"><span class="kr">import</span> <span class="p">{</span> <span class="nx">webkit</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;playwright&#39;</span>

<span class="p">(</span><span class="kr">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">browser</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">webkit</span><span class="p">.</span><span class="nx">launch</span><span class="p">()</span>
  <span class="kr">const</span> <span class="nx">page</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">browser</span><span class="p">.</span><span class="nx">newPage</span><span class="p">()</span>
  <span class="k">await</span> <span class="nx">page</span><span class="p">.</span><span class="kr">goto</span><span class="p">(</span><span class="s1">&#39;http://whatsmyuseragent.org/&#39;</span><span class="p">)</span>
  <span class="k">await</span> <span class="nx">page</span><span class="p">.</span><span class="nx">screenshot</span><span class="p">({</span> <span class="nx">path</span><span class="o">:</span> <span class="sb">`example.png`</span> <span class="p">})</span>
  <span class="k">await</span> <span class="nx">browser</span><span class="p">.</span><span class="nx">close</span><span class="p">()</span>
<span class="p">})()</span>
</code></pre></div><h2 id="コード実行">コード実行</h2>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh">npx ts-node main.ts
</code></pre></div><ul>
<li>同じディレクトリに <a href="http://whatsmyuseragent.org/">http://whatsmyuseragent.org/</a> にアクセスしたスクリーンショットが example.png として保存されれば OK</li>
<li>上記コードの場合 User-Agent が WebKit になる</li>
</ul>
<h2 id="useful-links">Useful Links</h2>
<p>CLI Commands | npm Docs<br>
<a href="https://docs.npmjs.com/cli/v6/commands">https://docs.npmjs.com/cli/v6/commands</a></p>
<p>Getting Started | Playwright<br>
<a href="https://playwright.dev/docs/intro">https://playwright.dev/docs/intro</a></p>
<p>TypeScript: The starting point for learning TypeScript<br>
<a href="https://www.typescriptlang.org/docs">https://www.typescriptlang.org/docs</a></p>
<h2 id="この記事を試した環境">この記事を試した環境</h2>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh">% sw_vers
ProductName:    Mac OS X
ProductVersion: 10.15.7
BuildVersion:   19H114
% node -v
v12.16.1
% npm -v
6.14.8
</code></pre></div><p>package.json</p>
<div class="highlight"><pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;my-playwright-project&#34;</span><span class="p">,</span>
  <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;1.0.0&#34;</span><span class="p">,</span>
  <span class="nt">&#34;description&#34;</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span>
  <span class="nt">&#34;main&#34;</span><span class="p">:</span> <span class="s2">&#34;index.js&#34;</span><span class="p">,</span>
  <span class="nt">&#34;scripts&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;test&#34;</span><span class="p">:</span> <span class="s2">&#34;echo \&#34;Error: no test specified\&#34; &amp;&amp; exit 1&#34;</span>
  <span class="p">},</span>
  <span class="nt">&#34;keywords&#34;</span><span class="p">:</span> <span class="p">[],</span>
  <span class="nt">&#34;author&#34;</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span>
  <span class="nt">&#34;license&#34;</span><span class="p">:</span> <span class="s2">&#34;ISC&#34;</span><span class="p">,</span>
  <span class="nt">&#34;dependencies&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;playwright&#34;</span><span class="p">:</span> <span class="s2">&#34;^1.7.1&#34;</span>
  <span class="p">},</span>
  <span class="nt">&#34;devDependencies&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;@types/node&#34;</span><span class="p">:</span> <span class="s2">&#34;^12.19.12&#34;</span><span class="p">,</span>
    <span class="nt">&#34;ts-node&#34;</span><span class="p">:</span> <span class="s2">&#34;^9.1.1&#34;</span><span class="p">,</span>
    <span class="nt">&#34;typescript&#34;</span><span class="p">:</span> <span class="s2">&#34;^4.1.3&#34;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>package-lock.json</p>
<div class="highlight"><pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;my-playwright-project&#34;</span><span class="p">,</span>
  <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;1.0.0&#34;</span><span class="p">,</span>
  <span class="nt">&#34;lockfileVersion&#34;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="nt">&#34;requires&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nt">&#34;dependencies&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;@types/node&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;12.19.12&#34;</span><span class="p">,</span>
      <span class="nt">&#34;resolved&#34;</span><span class="p">:</span> <span class="s2">&#34;https://registry.npmjs.org/@types/node/-/node-12.19.12.tgz&#34;</span><span class="p">,</span>
      <span class="nt">&#34;integrity&#34;</span><span class="p">:</span> <span class="s2">&#34;sha512-UwfL2uIU9arX/+/PRcIkT08/iBadGN2z6ExOROA2Dh5mAuWTBj6iJbQX4nekiV5H8cTrEG569LeX+HRco9Cbxw==&#34;</span>
    <span class="p">},</span>
    <span class="nt">&#34;@types/yauzl&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;2.9.1&#34;</span><span class="p">,</span>
      <span class="nt">&#34;resolved&#34;</span><span class="p">:</span> <span class="s2">&#34;https://registry.npmjs.org/@types/yauzl/-/yauzl-2.9.1.tgz&#34;</span><span class="p">,</span>
      <span class="nt">&#34;integrity&#34;</span><span class="p">:</span> <span class="s2">&#34;sha512-A1b8SU4D10uoPjwb0lnHmmu8wZhR9d+9o2PKBQT2jU5YPTKsxac6M2qGAdY7VcL+dHHhARVUDmeg0rOrcd9EjA==&#34;</span><span class="p">,</span>
      <span class="nt">&#34;optional&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nt">&#34;requires&#34;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&#34;@types/node&#34;</span><span class="p">:</span> <span class="s2">&#34;*&#34;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&#34;agent-base&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;6.0.2&#34;</span><span class="p">,</span>
      <span class="nt">&#34;resolved&#34;</span><span class="p">:</span> <span class="s2">&#34;https://registry.npmjs.org/agent-base/-/agent-base-6.0.2.tgz&#34;</span><span class="p">,</span>
      <span class="nt">&#34;integrity&#34;</span><span class="p">:</span> <span class="s2">&#34;sha512-RZNwNclF7+MS/8bDg70amg32dyeZGZxiDuQmZxKLAlQjr3jGyLx+4Kkk58UO7D2QdgFIQCovuSuZESne6RG6XQ==&#34;</span><span class="p">,</span>
      <span class="nt">&#34;requires&#34;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&#34;debug&#34;</span><span class="p">:</span> <span class="s2">&#34;4&#34;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&#34;arg&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;4.1.3&#34;</span><span class="p">,</span>
      <span class="nt">&#34;resolved&#34;</span><span class="p">:</span> <span class="s2">&#34;https://registry.npmjs.org/arg/-/arg-4.1.3.tgz&#34;</span><span class="p">,</span>
      <span class="nt">&#34;integrity&#34;</span><span class="p">:</span> <span class="s2">&#34;sha512-58S9QDqG0Xx27YwPSt9fJxivjYl432YCwfDMfZ+71RAqUrZef7LrKQZ3LHLOwCS4FLNBplP533Zx895SeOCHvA==&#34;</span><span class="p">,</span>
      <span class="nt">&#34;dev&#34;</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">},</span>
    <span class="nt">&#34;balanced-match&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;1.0.0&#34;</span><span class="p">,</span>
      <span class="nt">&#34;resolved&#34;</span><span class="p">:</span> <span class="s2">&#34;https://registry.npmjs.org/balanced-match/-/balanced-match-1.0.0.tgz&#34;</span><span class="p">,</span>
      <span class="nt">&#34;integrity&#34;</span><span class="p">:</span> <span class="s2">&#34;sha1-ibTRmasr7kneFk6gK4nORi1xt2c=&#34;</span>
    <span class="p">},</span>
    <span class="nt">&#34;brace-expansion&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;1.1.11&#34;</span><span class="p">,</span>
      <span class="nt">&#34;resolved&#34;</span><span class="p">:</span> <span class="s2">&#34;https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.11.tgz&#34;</span><span class="p">,</span>
      <span class="nt">&#34;integrity&#34;</span><span class="p">:</span> <span class="s2">&#34;sha512-iCuPHDFgrHX7H2vEI/5xpz07zSHB00TpugqhmYtVmMO6518mCuRMoOYFldEBl0g187ufozdaHgWKcYFb61qGiA==&#34;</span><span class="p">,</span>
      <span class="nt">&#34;requires&#34;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&#34;balanced-match&#34;</span><span class="p">:</span> <span class="s2">&#34;^1.0.0&#34;</span><span class="p">,</span>
        <span class="nt">&#34;concat-map&#34;</span><span class="p">:</span> <span class="s2">&#34;0.0.1&#34;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&#34;buffer-crc32&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;0.2.13&#34;</span><span class="p">,</span>
      <span class="nt">&#34;resolved&#34;</span><span class="p">:</span> <span class="s2">&#34;https://registry.npmjs.org/buffer-crc32/-/buffer-crc32-0.2.13.tgz&#34;</span><span class="p">,</span>
      <span class="nt">&#34;integrity&#34;</span><span class="p">:</span> <span class="s2">&#34;sha1-DTM+PwDqxQqhRUq9MO+MKl2ackI=&#34;</span>
    <span class="p">},</span>
    <span class="nt">&#34;buffer-from&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;1.1.1&#34;</span><span class="p">,</span>
      <span class="nt">&#34;resolved&#34;</span><span class="p">:</span> <span class="s2">&#34;https://registry.npmjs.org/buffer-from/-/buffer-from-1.1.1.tgz&#34;</span><span class="p">,</span>
      <span class="nt">&#34;integrity&#34;</span><span class="p">:</span> <span class="s2">&#34;sha512-MQcXEUbCKtEo7bhqEs6560Hyd4XaovZlO/k9V3hjVUF/zwW7KBVdSK4gIt/bzwS9MbR5qob+F5jusZsb0YQK2A==&#34;</span><span class="p">,</span>
      <span class="nt">&#34;dev&#34;</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">},</span>
    <span class="nt">&#34;concat-map&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;0.0.1&#34;</span><span class="p">,</span>
      <span class="nt">&#34;resolved&#34;</span><span class="p">:</span> <span class="s2">&#34;https://registry.npmjs.org/concat-map/-/concat-map-0.0.1.tgz&#34;</span><span class="p">,</span>
      <span class="nt">&#34;integrity&#34;</span><span class="p">:</span> <span class="s2">&#34;sha1-2Klr13/Wjfd5OnMDajug1UBdR3s=&#34;</span>
    <span class="p">},</span>
    <span class="nt">&#34;create-require&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;1.1.1&#34;</span><span class="p">,</span>
      <span class="nt">&#34;resolved&#34;</span><span class="p">:</span> <span class="s2">&#34;https://registry.npmjs.org/create-require/-/create-require-1.1.1.tgz&#34;</span><span class="p">,</span>
      <span class="nt">&#34;integrity&#34;</span><span class="p">:</span> <span class="s2">&#34;sha512-dcKFX3jn0MpIaXjisoRvexIJVEKzaq7z2rZKxf+MSr9TkdmHmsU4m2lcLojrj/FHl8mk5VxMmYA+ftRkP/3oKQ==&#34;</span><span class="p">,</span>
      <span class="nt">&#34;dev&#34;</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">},</span>
    <span class="nt">&#34;debug&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;4.3.1&#34;</span><span class="p">,</span>
      <span class="nt">&#34;resolved&#34;</span><span class="p">:</span> <span class="s2">&#34;https://registry.npmjs.org/debug/-/debug-4.3.1.tgz&#34;</span><span class="p">,</span>
      <span class="nt">&#34;integrity&#34;</span><span class="p">:</span> <span class="s2">&#34;sha512-doEwdvm4PCeK4K3RQN2ZC2BYUBaxwLARCqZmMjtF8a51J2Rb0xpVloFRnCODwqjpwnAoao4pelN8l3RJdv3gRQ==&#34;</span><span class="p">,</span>
      <span class="nt">&#34;requires&#34;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&#34;ms&#34;</span><span class="p">:</span> <span class="s2">&#34;2.1.2&#34;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&#34;diff&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;4.0.2&#34;</span><span class="p">,</span>
      <span class="nt">&#34;resolved&#34;</span><span class="p">:</span> <span class="s2">&#34;https://registry.npmjs.org/diff/-/diff-4.0.2.tgz&#34;</span><span class="p">,</span>
      <span class="nt">&#34;integrity&#34;</span><span class="p">:</span> <span class="s2">&#34;sha512-58lmxKSA4BNyLz+HHMUzlOEpg09FV+ev6ZMe3vJihgdxzgcwZ8VoEEPmALCZG9LmqfVoNMMKpttIYTVG6uDY7A==&#34;</span><span class="p">,</span>
      <span class="nt">&#34;dev&#34;</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">},</span>
    <span class="nt">&#34;end-of-stream&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;1.4.4&#34;</span><span class="p">,</span>
      <span class="nt">&#34;resolved&#34;</span><span class="p">:</span> <span class="s2">&#34;https://registry.npmjs.org/end-of-stream/-/end-of-stream-1.4.4.tgz&#34;</span><span class="p">,</span>
      <span class="nt">&#34;integrity&#34;</span><span class="p">:</span> <span class="s2">&#34;sha512-+uw1inIHVPQoaVuHzRyXd21icM+cnt4CzD5rW+NC1wjOUSTOs+Te7FOv7AhN7vS9x/oIyhLP5PR1H+phQAHu5Q==&#34;</span><span class="p">,</span>
      <span class="nt">&#34;requires&#34;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&#34;once&#34;</span><span class="p">:</span> <span class="s2">&#34;^1.4.0&#34;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&#34;extract-zip&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;2.0.1&#34;</span><span class="p">,</span>
      <span class="nt">&#34;resolved&#34;</span><span class="p">:</span> <span class="s2">&#34;https://registry.npmjs.org/extract-zip/-/extract-zip-2.0.1.tgz&#34;</span><span class="p">,</span>
      <span class="nt">&#34;integrity&#34;</span><span class="p">:</span> <span class="s2">&#34;sha512-GDhU9ntwuKyGXdZBUgTIe+vXnWj0fppUEtMDL0+idd5Sta8TGpHssn/eusA9mrPr9qNDym6SxAYZjNvCn/9RBg==&#34;</span><span class="p">,</span>
      <span class="nt">&#34;requires&#34;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&#34;@types/yauzl&#34;</span><span class="p">:</span> <span class="s2">&#34;^2.9.1&#34;</span><span class="p">,</span>
        <span class="nt">&#34;debug&#34;</span><span class="p">:</span> <span class="s2">&#34;^4.1.1&#34;</span><span class="p">,</span>
        <span class="nt">&#34;get-stream&#34;</span><span class="p">:</span> <span class="s2">&#34;^5.1.0&#34;</span><span class="p">,</span>
        <span class="nt">&#34;yauzl&#34;</span><span class="p">:</span> <span class="s2">&#34;^2.10.0&#34;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&#34;fd-slicer&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;1.1.0&#34;</span><span class="p">,</span>
      <span class="nt">&#34;resolved&#34;</span><span class="p">:</span> <span class="s2">&#34;https://registry.npmjs.org/fd-slicer/-/fd-slicer-1.1.0.tgz&#34;</span><span class="p">,</span>
      <span class="nt">&#34;integrity&#34;</span><span class="p">:</span> <span class="s2">&#34;sha1-JcfInLH5B3+IkbvmHY85Dq4lbx4=&#34;</span><span class="p">,</span>
      <span class="nt">&#34;requires&#34;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&#34;pend&#34;</span><span class="p">:</span> <span class="s2">&#34;~1.2.0&#34;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&#34;fs.realpath&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;1.0.0&#34;</span><span class="p">,</span>
      <span class="nt">&#34;resolved&#34;</span><span class="p">:</span> <span class="s2">&#34;https://registry.npmjs.org/fs.realpath/-/fs.realpath-1.0.0.tgz&#34;</span><span class="p">,</span>
      <span class="nt">&#34;integrity&#34;</span><span class="p">:</span> <span class="s2">&#34;sha1-FQStJSMVjKpA20onh8sBQRmU6k8=&#34;</span>
    <span class="p">},</span>
    <span class="nt">&#34;get-stream&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;5.2.0&#34;</span><span class="p">,</span>
      <span class="nt">&#34;resolved&#34;</span><span class="p">:</span> <span class="s2">&#34;https://registry.npmjs.org/get-stream/-/get-stream-5.2.0.tgz&#34;</span><span class="p">,</span>
      <span class="nt">&#34;integrity&#34;</span><span class="p">:</span> <span class="s2">&#34;sha512-nBF+F1rAZVCu/p7rjzgA+Yb4lfYXrpl7a6VmJrU8wF9I1CKvP/QwPNZHnOlwbTkY6dvtFIzFMSyQXbLoTQPRpA==&#34;</span><span class="p">,</span>
      <span class="nt">&#34;requires&#34;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&#34;pump&#34;</span><span class="p">:</span> <span class="s2">&#34;^3.0.0&#34;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&#34;glob&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;7.1.6&#34;</span><span class="p">,</span>
      <span class="nt">&#34;resolved&#34;</span><span class="p">:</span> <span class="s2">&#34;https://registry.npmjs.org/glob/-/glob-7.1.6.tgz&#34;</span><span class="p">,</span>
      <span class="nt">&#34;integrity&#34;</span><span class="p">:</span> <span class="s2">&#34;sha512-LwaxwyZ72Lk7vZINtNNrywX0ZuLyStrdDtabefZKAY5ZGJhVtgdznluResxNmPitE0SAO+O26sWTHeKSI2wMBA==&#34;</span><span class="p">,</span>
      <span class="nt">&#34;requires&#34;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&#34;fs.realpath&#34;</span><span class="p">:</span> <span class="s2">&#34;^1.0.0&#34;</span><span class="p">,</span>
        <span class="nt">&#34;inflight&#34;</span><span class="p">:</span> <span class="s2">&#34;^1.0.4&#34;</span><span class="p">,</span>
        <span class="nt">&#34;inherits&#34;</span><span class="p">:</span> <span class="s2">&#34;2&#34;</span><span class="p">,</span>
        <span class="nt">&#34;minimatch&#34;</span><span class="p">:</span> <span class="s2">&#34;^3.0.4&#34;</span><span class="p">,</span>
        <span class="nt">&#34;once&#34;</span><span class="p">:</span> <span class="s2">&#34;^1.3.0&#34;</span><span class="p">,</span>
        <span class="nt">&#34;path-is-absolute&#34;</span><span class="p">:</span> <span class="s2">&#34;^1.0.0&#34;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&#34;graceful-fs&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;4.2.4&#34;</span><span class="p">,</span>
      <span class="nt">&#34;resolved&#34;</span><span class="p">:</span> <span class="s2">&#34;https://registry.npmjs.org/graceful-fs/-/graceful-fs-4.2.4.tgz&#34;</span><span class="p">,</span>
      <span class="nt">&#34;integrity&#34;</span><span class="p">:</span> <span class="s2">&#34;sha512-WjKPNJF79dtJAVniUlGGWHYGz2jWxT6VhN/4m1NdkbZ2nOsEF+cI1Edgql5zCRhs/VsQYRvrXctxktVXZUkixw==&#34;</span>
    <span class="p">},</span>
    <span class="nt">&#34;https-proxy-agent&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;5.0.0&#34;</span><span class="p">,</span>
      <span class="nt">&#34;resolved&#34;</span><span class="p">:</span> <span class="s2">&#34;https://registry.npmjs.org/https-proxy-agent/-/https-proxy-agent-5.0.0.tgz&#34;</span><span class="p">,</span>
      <span class="nt">&#34;integrity&#34;</span><span class="p">:</span> <span class="s2">&#34;sha512-EkYm5BcKUGiduxzSt3Eppko+PiNWNEpa4ySk9vTC6wDsQJW9rHSa+UhGNJoRYp7bz6Ht1eaRIa6QaJqO5rCFbA==&#34;</span><span class="p">,</span>
      <span class="nt">&#34;requires&#34;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&#34;agent-base&#34;</span><span class="p">:</span> <span class="s2">&#34;6&#34;</span><span class="p">,</span>
        <span class="nt">&#34;debug&#34;</span><span class="p">:</span> <span class="s2">&#34;4&#34;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&#34;inflight&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;1.0.6&#34;</span><span class="p">,</span>
      <span class="nt">&#34;resolved&#34;</span><span class="p">:</span> <span class="s2">&#34;https://registry.npmjs.org/inflight/-/inflight-1.0.6.tgz&#34;</span><span class="p">,</span>
      <span class="nt">&#34;integrity&#34;</span><span class="p">:</span> <span class="s2">&#34;sha1-Sb1jMdfQLQwJvJEKEHW6gWW1bfk=&#34;</span><span class="p">,</span>
      <span class="nt">&#34;requires&#34;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&#34;once&#34;</span><span class="p">:</span> <span class="s2">&#34;^1.3.0&#34;</span><span class="p">,</span>
        <span class="nt">&#34;wrappy&#34;</span><span class="p">:</span> <span class="s2">&#34;1&#34;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&#34;inherits&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;2.0.4&#34;</span><span class="p">,</span>
      <span class="nt">&#34;resolved&#34;</span><span class="p">:</span> <span class="s2">&#34;https://registry.npmjs.org/inherits/-/inherits-2.0.4.tgz&#34;</span><span class="p">,</span>
      <span class="nt">&#34;integrity&#34;</span><span class="p">:</span> <span class="s2">&#34;sha512-k/vGaX4/Yla3WzyMCvTQOXYeIHvqOKtnqBduzTHpzpQZzAskKMhZ2K+EnBiSM9zGSoIFeMpXKxa4dYeZIQqewQ==&#34;</span>
    <span class="p">},</span>
    <span class="nt">&#34;jpeg-js&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;0.4.3&#34;</span><span class="p">,</span>
      <span class="nt">&#34;resolved&#34;</span><span class="p">:</span> <span class="s2">&#34;https://registry.npmjs.org/jpeg-js/-/jpeg-js-0.4.3.tgz&#34;</span><span class="p">,</span>
      <span class="nt">&#34;integrity&#34;</span><span class="p">:</span> <span class="s2">&#34;sha512-ru1HWKek8octvUHFHvE5ZzQ1yAsJmIvRdGWvSoKV52XKyuyYA437QWDttXT8eZXDSbuMpHlLzPDZUPd6idIz+Q==&#34;</span>
    <span class="p">},</span>
    <span class="nt">&#34;make-error&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;1.3.6&#34;</span><span class="p">,</span>
      <span class="nt">&#34;resolved&#34;</span><span class="p">:</span> <span class="s2">&#34;https://registry.npmjs.org/make-error/-/make-error-1.3.6.tgz&#34;</span><span class="p">,</span>
      <span class="nt">&#34;integrity&#34;</span><span class="p">:</span> <span class="s2">&#34;sha512-s8UhlNe7vPKomQhC1qFelMokr/Sc3AgNbso3n74mVPA5LTZwkB9NlXf4XPamLxJE8h0gh73rM94xvwRT2CVInw==&#34;</span><span class="p">,</span>
      <span class="nt">&#34;dev&#34;</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">},</span>
    <span class="nt">&#34;mime&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;2.4.7&#34;</span><span class="p">,</span>
      <span class="nt">&#34;resolved&#34;</span><span class="p">:</span> <span class="s2">&#34;https://registry.npmjs.org/mime/-/mime-2.4.7.tgz&#34;</span><span class="p">,</span>
      <span class="nt">&#34;integrity&#34;</span><span class="p">:</span> <span class="s2">&#34;sha512-dhNd1uA2u397uQk3Nv5LM4lm93WYDUXFn3Fu291FJerns4jyTudqhIWe4W04YLy7Uk1tm1Ore04NpjRvQp/NPA==&#34;</span>
    <span class="p">},</span>
    <span class="nt">&#34;minimatch&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;3.0.4&#34;</span><span class="p">,</span>
      <span class="nt">&#34;resolved&#34;</span><span class="p">:</span> <span class="s2">&#34;https://registry.npmjs.org/minimatch/-/minimatch-3.0.4.tgz&#34;</span><span class="p">,</span>
      <span class="nt">&#34;integrity&#34;</span><span class="p">:</span> <span class="s2">&#34;sha512-yJHVQEhyqPLUTgt9B83PXu6W3rx4MvvHvSUvToogpwoGDOUQ+yDrR0HRot+yOCdCO7u4hX3pWft6kWBBcqh0UA==&#34;</span><span class="p">,</span>
      <span class="nt">&#34;requires&#34;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&#34;brace-expansion&#34;</span><span class="p">:</span> <span class="s2">&#34;^1.1.7&#34;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&#34;ms&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;2.1.2&#34;</span><span class="p">,</span>
      <span class="nt">&#34;resolved&#34;</span><span class="p">:</span> <span class="s2">&#34;https://registry.npmjs.org/ms/-/ms-2.1.2.tgz&#34;</span><span class="p">,</span>
      <span class="nt">&#34;integrity&#34;</span><span class="p">:</span> <span class="s2">&#34;sha512-sGkPx+VjMtmA6MX27oA4FBFELFCZZ4S4XqeGOXCv68tT+jb3vk/RyaKWP0PTKyWtmLSM0b+adUTEvbs1PEaH2w==&#34;</span>
    <span class="p">},</span>
    <span class="nt">&#34;once&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;1.4.0&#34;</span><span class="p">,</span>
      <span class="nt">&#34;resolved&#34;</span><span class="p">:</span> <span class="s2">&#34;https://registry.npmjs.org/once/-/once-1.4.0.tgz&#34;</span><span class="p">,</span>
      <span class="nt">&#34;integrity&#34;</span><span class="p">:</span> <span class="s2">&#34;sha1-WDsap3WWHUsROsF9nFC6753Xa9E=&#34;</span><span class="p">,</span>
      <span class="nt">&#34;requires&#34;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&#34;wrappy&#34;</span><span class="p">:</span> <span class="s2">&#34;1&#34;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&#34;path-is-absolute&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;1.0.1&#34;</span><span class="p">,</span>
      <span class="nt">&#34;resolved&#34;</span><span class="p">:</span> <span class="s2">&#34;https://registry.npmjs.org/path-is-absolute/-/path-is-absolute-1.0.1.tgz&#34;</span><span class="p">,</span>
      <span class="nt">&#34;integrity&#34;</span><span class="p">:</span> <span class="s2">&#34;sha1-F0uSaHNVNP+8es5r9TpanhtcX18=&#34;</span>
    <span class="p">},</span>
    <span class="nt">&#34;pend&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;1.2.0&#34;</span><span class="p">,</span>
      <span class="nt">&#34;resolved&#34;</span><span class="p">:</span> <span class="s2">&#34;https://registry.npmjs.org/pend/-/pend-1.2.0.tgz&#34;</span><span class="p">,</span>
      <span class="nt">&#34;integrity&#34;</span><span class="p">:</span> <span class="s2">&#34;sha1-elfrVQpng/kRUzH89GY9XI4AelA=&#34;</span>
    <span class="p">},</span>
    <span class="nt">&#34;playwright&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;1.7.1&#34;</span><span class="p">,</span>
      <span class="nt">&#34;resolved&#34;</span><span class="p">:</span> <span class="s2">&#34;https://registry.npmjs.org/playwright/-/playwright-1.7.1.tgz&#34;</span><span class="p">,</span>
      <span class="nt">&#34;integrity&#34;</span><span class="p">:</span> <span class="s2">&#34;sha512-dOSWME42wDedJ/PXv8k0zG0Kxd6d6R2OKA51/05++Z2ISdA4N58gHlWqlVKPDkBog1MI6lu/KNt7QDn19AybWQ==&#34;</span><span class="p">,</span>
      <span class="nt">&#34;requires&#34;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&#34;debug&#34;</span><span class="p">:</span> <span class="s2">&#34;^4.1.1&#34;</span><span class="p">,</span>
        <span class="nt">&#34;extract-zip&#34;</span><span class="p">:</span> <span class="s2">&#34;^2.0.1&#34;</span><span class="p">,</span>
        <span class="nt">&#34;https-proxy-agent&#34;</span><span class="p">:</span> <span class="s2">&#34;^5.0.0&#34;</span><span class="p">,</span>
        <span class="nt">&#34;jpeg-js&#34;</span><span class="p">:</span> <span class="s2">&#34;^0.4.2&#34;</span><span class="p">,</span>
        <span class="nt">&#34;mime&#34;</span><span class="p">:</span> <span class="s2">&#34;^2.4.6&#34;</span><span class="p">,</span>
        <span class="nt">&#34;pngjs&#34;</span><span class="p">:</span> <span class="s2">&#34;^5.0.0&#34;</span><span class="p">,</span>
        <span class="nt">&#34;progress&#34;</span><span class="p">:</span> <span class="s2">&#34;^2.0.3&#34;</span><span class="p">,</span>
        <span class="nt">&#34;proper-lockfile&#34;</span><span class="p">:</span> <span class="s2">&#34;^4.1.1&#34;</span><span class="p">,</span>
        <span class="nt">&#34;proxy-from-env&#34;</span><span class="p">:</span> <span class="s2">&#34;^1.1.0&#34;</span><span class="p">,</span>
        <span class="nt">&#34;rimraf&#34;</span><span class="p">:</span> <span class="s2">&#34;^3.0.2&#34;</span><span class="p">,</span>
        <span class="nt">&#34;ws&#34;</span><span class="p">:</span> <span class="s2">&#34;^7.3.1&#34;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&#34;pngjs&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;5.0.0&#34;</span><span class="p">,</span>
      <span class="nt">&#34;resolved&#34;</span><span class="p">:</span> <span class="s2">&#34;https://registry.npmjs.org/pngjs/-/pngjs-5.0.0.tgz&#34;</span><span class="p">,</span>
      <span class="nt">&#34;integrity&#34;</span><span class="p">:</span> <span class="s2">&#34;sha512-40QW5YalBNfQo5yRYmiw7Yz6TKKVr3h6970B2YE+3fQpsWcrbj1PzJgxeJ19DRQjhMbKPIuMY8rFaXc8moolVw==&#34;</span>
    <span class="p">},</span>
    <span class="nt">&#34;progress&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;2.0.3&#34;</span><span class="p">,</span>
      <span class="nt">&#34;resolved&#34;</span><span class="p">:</span> <span class="s2">&#34;https://registry.npmjs.org/progress/-/progress-2.0.3.tgz&#34;</span><span class="p">,</span>
      <span class="nt">&#34;integrity&#34;</span><span class="p">:</span> <span class="s2">&#34;sha512-7PiHtLll5LdnKIMw100I+8xJXR5gW2QwWYkT6iJva0bXitZKa/XMrSbdmg3r2Xnaidz9Qumd0VPaMrZlF9V9sA==&#34;</span>
    <span class="p">},</span>
    <span class="nt">&#34;proper-lockfile&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;4.1.1&#34;</span><span class="p">,</span>
      <span class="nt">&#34;resolved&#34;</span><span class="p">:</span> <span class="s2">&#34;https://registry.npmjs.org/proper-lockfile/-/proper-lockfile-4.1.1.tgz&#34;</span><span class="p">,</span>
      <span class="nt">&#34;integrity&#34;</span><span class="p">:</span> <span class="s2">&#34;sha512-1w6rxXodisVpn7QYvLk706mzprPTAPCYAqxMvctmPN3ekuRk/kuGkGc82pangZiAt4R3lwSuUzheTTn0/Yb7Zg==&#34;</span><span class="p">,</span>
      <span class="nt">&#34;requires&#34;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&#34;graceful-fs&#34;</span><span class="p">:</span> <span class="s2">&#34;^4.1.11&#34;</span><span class="p">,</span>
        <span class="nt">&#34;retry&#34;</span><span class="p">:</span> <span class="s2">&#34;^0.12.0&#34;</span><span class="p">,</span>
        <span class="nt">&#34;signal-exit&#34;</span><span class="p">:</span> <span class="s2">&#34;^3.0.2&#34;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&#34;proxy-from-env&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;1.1.0&#34;</span><span class="p">,</span>
      <span class="nt">&#34;resolved&#34;</span><span class="p">:</span> <span class="s2">&#34;https://registry.npmjs.org/proxy-from-env/-/proxy-from-env-1.1.0.tgz&#34;</span><span class="p">,</span>
      <span class="nt">&#34;integrity&#34;</span><span class="p">:</span> <span class="s2">&#34;sha512-D+zkORCbA9f1tdWRK0RaCR3GPv50cMxcrz4X8k5LTSUD1Dkw47mKJEZQNunItRTkWwgtaUSo1RVFRIG9ZXiFYg==&#34;</span>
    <span class="p">},</span>
    <span class="nt">&#34;pump&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;3.0.0&#34;</span><span class="p">,</span>
      <span class="nt">&#34;resolved&#34;</span><span class="p">:</span> <span class="s2">&#34;https://registry.npmjs.org/pump/-/pump-3.0.0.tgz&#34;</span><span class="p">,</span>
      <span class="nt">&#34;integrity&#34;</span><span class="p">:</span> <span class="s2">&#34;sha512-LwZy+p3SFs1Pytd/jYct4wpv49HiYCqd9Rlc5ZVdk0V+8Yzv6jR5Blk3TRmPL1ft69TxP0IMZGJ+WPFU2BFhww==&#34;</span><span class="p">,</span>
      <span class="nt">&#34;requires&#34;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&#34;end-of-stream&#34;</span><span class="p">:</span> <span class="s2">&#34;^1.1.0&#34;</span><span class="p">,</span>
        <span class="nt">&#34;once&#34;</span><span class="p">:</span> <span class="s2">&#34;^1.3.1&#34;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&#34;retry&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;0.12.0&#34;</span><span class="p">,</span>
      <span class="nt">&#34;resolved&#34;</span><span class="p">:</span> <span class="s2">&#34;https://registry.npmjs.org/retry/-/retry-0.12.0.tgz&#34;</span><span class="p">,</span>
      <span class="nt">&#34;integrity&#34;</span><span class="p">:</span> <span class="s2">&#34;sha1-G0KmJmoh8HQh0bC1S33BZ7AcATs=&#34;</span>
    <span class="p">},</span>
    <span class="nt">&#34;rimraf&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;3.0.2&#34;</span><span class="p">,</span>
      <span class="nt">&#34;resolved&#34;</span><span class="p">:</span> <span class="s2">&#34;https://registry.npmjs.org/rimraf/-/rimraf-3.0.2.tgz&#34;</span><span class="p">,</span>
      <span class="nt">&#34;integrity&#34;</span><span class="p">:</span> <span class="s2">&#34;sha512-JZkJMZkAGFFPP2YqXZXPbMlMBgsxzE8ILs4lMIX/2o0L9UBw9O/Y3o6wFw/i9YLapcUJWwqbi3kdxIPdC62TIA==&#34;</span><span class="p">,</span>
      <span class="nt">&#34;requires&#34;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&#34;glob&#34;</span><span class="p">:</span> <span class="s2">&#34;^7.1.3&#34;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&#34;signal-exit&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;3.0.3&#34;</span><span class="p">,</span>
      <span class="nt">&#34;resolved&#34;</span><span class="p">:</span> <span class="s2">&#34;https://registry.npmjs.org/signal-exit/-/signal-exit-3.0.3.tgz&#34;</span><span class="p">,</span>
      <span class="nt">&#34;integrity&#34;</span><span class="p">:</span> <span class="s2">&#34;sha512-VUJ49FC8U1OxwZLxIbTTrDvLnf/6TDgxZcK8wxR8zs13xpx7xbG60ndBlhNrFi2EMuFRoeDoJO7wthSLq42EjA==&#34;</span>
    <span class="p">},</span>
    <span class="nt">&#34;source-map&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;0.6.1&#34;</span><span class="p">,</span>
      <span class="nt">&#34;resolved&#34;</span><span class="p">:</span> <span class="s2">&#34;https://registry.npmjs.org/source-map/-/source-map-0.6.1.tgz&#34;</span><span class="p">,</span>
      <span class="nt">&#34;integrity&#34;</span><span class="p">:</span> <span class="s2">&#34;sha512-UjgapumWlbMhkBgzT7Ykc5YXUT46F0iKu8SGXq0bcwP5dz/h0Plj6enJqjz1Zbq2l5WaqYnrVbwWOWMyF3F47g==&#34;</span><span class="p">,</span>
      <span class="nt">&#34;dev&#34;</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">},</span>
    <span class="nt">&#34;source-map-support&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;0.5.19&#34;</span><span class="p">,</span>
      <span class="nt">&#34;resolved&#34;</span><span class="p">:</span> <span class="s2">&#34;https://registry.npmjs.org/source-map-support/-/source-map-support-0.5.19.tgz&#34;</span><span class="p">,</span>
      <span class="nt">&#34;integrity&#34;</span><span class="p">:</span> <span class="s2">&#34;sha512-Wonm7zOCIJzBGQdB+thsPar0kYuCIzYvxZwlBa87yi/Mdjv7Tip2cyVbLj5o0cFPN4EVkuTwb3GDDyUx2DGnGw==&#34;</span><span class="p">,</span>
      <span class="nt">&#34;dev&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nt">&#34;requires&#34;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&#34;buffer-from&#34;</span><span class="p">:</span> <span class="s2">&#34;^1.0.0&#34;</span><span class="p">,</span>
        <span class="nt">&#34;source-map&#34;</span><span class="p">:</span> <span class="s2">&#34;^0.6.0&#34;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&#34;ts-node&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;9.1.1&#34;</span><span class="p">,</span>
      <span class="nt">&#34;resolved&#34;</span><span class="p">:</span> <span class="s2">&#34;https://registry.npmjs.org/ts-node/-/ts-node-9.1.1.tgz&#34;</span><span class="p">,</span>
      <span class="nt">&#34;integrity&#34;</span><span class="p">:</span> <span class="s2">&#34;sha512-hPlt7ZACERQGf03M253ytLY3dHbGNGrAq9qIHWUY9XHYl1z7wYngSr3OQ5xmui8o2AaxsONxIzjafLUiWBo1Fg==&#34;</span><span class="p">,</span>
      <span class="nt">&#34;dev&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nt">&#34;requires&#34;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&#34;arg&#34;</span><span class="p">:</span> <span class="s2">&#34;^4.1.0&#34;</span><span class="p">,</span>
        <span class="nt">&#34;create-require&#34;</span><span class="p">:</span> <span class="s2">&#34;^1.1.0&#34;</span><span class="p">,</span>
        <span class="nt">&#34;diff&#34;</span><span class="p">:</span> <span class="s2">&#34;^4.0.1&#34;</span><span class="p">,</span>
        <span class="nt">&#34;make-error&#34;</span><span class="p">:</span> <span class="s2">&#34;^1.1.1&#34;</span><span class="p">,</span>
        <span class="nt">&#34;source-map-support&#34;</span><span class="p">:</span> <span class="s2">&#34;^0.5.17&#34;</span><span class="p">,</span>
        <span class="nt">&#34;yn&#34;</span><span class="p">:</span> <span class="s2">&#34;3.1.1&#34;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&#34;typescript&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;4.1.3&#34;</span><span class="p">,</span>
      <span class="nt">&#34;resolved&#34;</span><span class="p">:</span> <span class="s2">&#34;https://registry.npmjs.org/typescript/-/typescript-4.1.3.tgz&#34;</span><span class="p">,</span>
      <span class="nt">&#34;integrity&#34;</span><span class="p">:</span> <span class="s2">&#34;sha512-B3ZIOf1IKeH2ixgHhj6la6xdwR9QrLC5d1VKeCSY4tvkqhF2eqd9O7txNlS0PO3GrBAFIdr3L1ndNwteUbZLYg==&#34;</span><span class="p">,</span>
      <span class="nt">&#34;dev&#34;</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">},</span>
    <span class="nt">&#34;wrappy&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;1.0.2&#34;</span><span class="p">,</span>
      <span class="nt">&#34;resolved&#34;</span><span class="p">:</span> <span class="s2">&#34;https://registry.npmjs.org/wrappy/-/wrappy-1.0.2.tgz&#34;</span><span class="p">,</span>
      <span class="nt">&#34;integrity&#34;</span><span class="p">:</span> <span class="s2">&#34;sha1-tSQ9jz7BqjXxNkYFvA0QNuMKtp8=&#34;</span>
    <span class="p">},</span>
    <span class="nt">&#34;ws&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;7.4.2&#34;</span><span class="p">,</span>
      <span class="nt">&#34;resolved&#34;</span><span class="p">:</span> <span class="s2">&#34;https://registry.npmjs.org/ws/-/ws-7.4.2.tgz&#34;</span><span class="p">,</span>
      <span class="nt">&#34;integrity&#34;</span><span class="p">:</span> <span class="s2">&#34;sha512-T4tewALS3+qsrpGI/8dqNMLIVdq/g/85U98HPMa6F0m6xTbvhXU6RCQLqPH3+SlomNV/LdY6RXEbBpMH6EOJnA==&#34;</span>
    <span class="p">},</span>
    <span class="nt">&#34;yauzl&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;2.10.0&#34;</span><span class="p">,</span>
      <span class="nt">&#34;resolved&#34;</span><span class="p">:</span> <span class="s2">&#34;https://registry.npmjs.org/yauzl/-/yauzl-2.10.0.tgz&#34;</span><span class="p">,</span>
      <span class="nt">&#34;integrity&#34;</span><span class="p">:</span> <span class="s2">&#34;sha1-x+sXyT4RLLEIb6bY5R+wZnt5pfk=&#34;</span><span class="p">,</span>
      <span class="nt">&#34;requires&#34;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&#34;buffer-crc32&#34;</span><span class="p">:</span> <span class="s2">&#34;~0.2.3&#34;</span><span class="p">,</span>
        <span class="nt">&#34;fd-slicer&#34;</span><span class="p">:</span> <span class="s2">&#34;~1.1.0&#34;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&#34;yn&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;3.1.1&#34;</span><span class="p">,</span>
      <span class="nt">&#34;resolved&#34;</span><span class="p">:</span> <span class="s2">&#34;https://registry.npmjs.org/yn/-/yn-3.1.1.tgz&#34;</span><span class="p">,</span>
      <span class="nt">&#34;integrity&#34;</span><span class="p">:</span> <span class="s2">&#34;sha512-Ux4ygGWsu2c7isFWe8Yu1YluJmqVhxqK2cLXNQA5AcC3QfbGNpM7fu0Y8b/z16pXLnFxZYvWhd3fhBY9DLmC6Q==&#34;</span><span class="p">,</span>
      <span class="nt">&#34;dev&#34;</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>]]></content>
		</item>
		
		<item>
			<title>セキュリティを学ぶことでトラブルシューティング能力が向上する・・・気がする</title>
			<link>https://noid11.github.io/posts/learning-security-will-improve-troubleshooting-skills/</link>
			<pubDate>Sat, 09 Jan 2021 12:31:00 +0900</pubDate>
			
			<guid>https://noid11.github.io/posts/learning-security-will-improve-troubleshooting-skills/</guid>
			<description>&lt;p&gt;ポエム。&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>ポエム。</p>
<ul>
<li>セキュリティを学ぶということは、各種コンポーネントの役割や機能を把握しつつ、それらに関連してどのような問題が発生するのか把握することだと思う</li>
<li>何か問題が発生してトラブルシューティングをする際には、エスパー能力と言われたりする謎の原因推測能力によって仮説を立てて、検証を行うといった能力が重要になる場面がある
<ul>
<li>このエスパー能力はベテランエンジニア等が当たり前のように備えていたりするものの、具体的にどう取得すればよいのかは謎が多い</li>
<li>個人的には以下の2つがエスパー能力の下地になっていると思う
<ol>
<li>経験</li>
<li>引き出しの多さ</li>
</ol>
</li>
<li>経験については、どんな問題に遭遇して経験を積めるかは運だと思うので、あまり個人の努力によって得られるものではないと思う
<ul>
<li>色んな仕事や問題が体験出来そうな職場やチームに身を投じる・・・みたいなものはあるかもしれない</li>
</ul>
</li>
<li>引き出しの多さについては、わりかし個人の努力でカバーできる範囲のように思える
<ul>
<li>引き出しの多さというのは、ざっくばらんに言うと、関連する技術や機能の把握だと思う</li>
<li>セキュリティを学習する場合、同じように関連技術や機能把握といったことが必要になるため、セキュリティの学習とは効率の良い「引き出し増やし」になる</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>なので、もしトラブルシューティング能力を上げたいなぁと思う場面があったら、トラブルシューティングが必要になりそうな分野のセキュリティについて学ぶと良いかもしれない。</p>]]></content>
		</item>
		
		<item>
			<title>curl で外部 json ファイルを元に POST リクエストする方法</title>
			<link>https://noid11.github.io/posts/how-to-curl-with-json/</link>
			<pubDate>Thu, 07 Jan 2021 08:00:34 +0900</pubDate>
			
			<guid>https://noid11.github.io/posts/how-to-curl-with-json/</guid>
			<description>&lt;p&gt;&lt;code&gt;--data&lt;/code&gt;, &lt;code&gt;-d&lt;/code&gt; オプションで &lt;code&gt;@/file/to/path&lt;/code&gt; という感じで指定すれば良い。&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p><code>--data</code>, <code>-d</code> オプションで <code>@/file/to/path</code> という感じで指定すれば良い。</p>
<h2 id="実行例">実行例</h2>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh"><span class="nv">ENDPOINT</span><span class="o">=</span>https://www.example.com

<span class="c1"># ミニマムなリクエスト</span>
<span class="c1"># -d, --data オプションを使用する場合、自動で POST リクエストになるので -X POST は不要</span>
curl --data @./request.json <span class="nv">$ENDPOINT</span>

<span class="c1"># Content-Type として application/json を指定</span>
<span class="c1"># 明示的に Content-Type を指定しない場合、 Content-Type は application/x-www-form-urlencoded になる</span>
curl --data @./request.json -H <span class="s2">&#34;Content-Type: application/json&#34;</span> <span class="nv">$ENDPOINT</span>

<span class="c1"># 標準出力の json を受け取ってリクエスト</span>
<span class="nb">echo</span> <span class="s1">&#39;{ &#34;hoge&#34;: &#34;fuga&#34;}&#39;</span> <span class="p">|</span> curl --data @- <span class="nv">$ENDPOINT</span>
</code></pre></div><p>動作検証には <a href="http://httpdump.io/">http://httpdump.io/</a> が便利</p>
<h2 id="requestjson-サンプル">request.json サンプル</h2>
<p>JSON 形式であれば何でも良いが、以下の URL にサンプルがあるので試してみると良いかも</p>
<p>JSON Example<br>
<a href="https://json.org/example.html">https://json.org/example.html</a></p>
<h2 id="curl-の-manual-を読む">curl の manual を読む</h2>
<p>curl - How To Use<br>
<a href="https://curl.se/docs/manpage.html">https://curl.se/docs/manpage.html</a></p>
<blockquote>
<p>-d, &ndash;data <!-- raw HTML omitted --><br>
(HTTP MQTT) Sends the specified data in a POST request to the HTTP server, in the same way that a browser does when a user has filled in an HTML form and presses the submit button. This will cause curl to pass the data to the server using the content-type application/x-www-form-urlencoded. Compare to -F, &ndash;form.<br>
&ndash;data-raw is almost the same but does not have a special interpretation of the @ character. To post data purely binary, you should instead use the &ndash;data-binary option. To URL-encode the value of a form field you may use &ndash;data-urlencode.
If any of these options is used more than once on the same command line, the data pieces specified will be merged together with a separating &amp;-symbol. Thus, using &lsquo;-d name=daniel -d skill=lousy&rsquo; would generate a post chunk that looks like &lsquo;name=daniel&amp;skill=lousy&rsquo;.<br>
If you start the data with the letter @, the rest should be a file name to read the data from, or - if you want curl to read the data from stdin. Posting data from a file named &lsquo;foobar&rsquo; would thus be done with -d, &ndash;data @foobar. When -d, &ndash;data is told to read from a file like that, carriage returns and newlines will be stripped out. If you don&rsquo;t want the @ character to have a special interpretation use &ndash;data-raw instead.<br>
See also &ndash;data-binary, &ndash;data-urlencode and &ndash;data-raw. This option overrides -F, &ndash;form and -I, &ndash;head and -T, &ndash;upload-file.</p>
</blockquote>
<ul>
<li><code>-d</code>, <code>--data</code> オプションは POST リクエストで指定されたデータを HTTP サーバーに送信する
<ul>
<li><code>content-type</code> として <code>application/x-www-form-urlencoded</code> を使用する</li>
</ul>
</li>
<li><code>--data-raw</code> は殆ど同じだが、 <code>@</code> 文字の特別な解釈が無い
<ul>
<li>データを純粋にバイナリで送信する場合には <code>--data-binary</code> オプションを使用する必要がある</li>
<li>フォームフィールドの値を URL エンコードするには <code>--data-urlencode</code> を使用できる</li>
</ul>
</li>
<li>これらのオプションのいずれかが同じコマンドラインで複数回使用される場合、指定されたデータ部分は区切り文字と一緒にマージされる
<ul>
<li><code>-d name=daniel -d skill=lousy</code> と指定をすると <code>name=daniel&amp;skill=lousy</code> という post chunk が生成される</li>
</ul>
</li>
<li>データを <code>@</code> で始める場合、残りはデータを読み取るためのファイル名である必要がある
<ul>
<li>curl で stdin からデータを読み取る場合は <code>-</code></li>
<li>foobar というファイルからのデータ投稿をする場合 <code>-d, --data @foobar</code> のように指定する</li>
<li><code>-d</code>, <code>--data</code> がファイル読み取りを指示されると、キャリッジリターンと改行が削除される</li>
<li>純粋に <code>@</code> を文字として使用したい場合、 <code>--data-raw</code> を使用する</li>
</ul>
</li>
<li><code>--data-binary</code>, <code>--data-urlencode</code>, <code>--data-raw</code> も参照すると良い
<ul>
<li>これらのオプションは <code>-F</code>, <code>--form</code>, <code>-I</code>, <code>--head</code>, <code>-T</code>, <code>--upload-file</code> を上書きする</li>
</ul>
</li>
</ul>
<h2 id="この記事を試した環境">この記事を試した環境</h2>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh">% uname -v
Darwin Kernel Version 19.6.0: Tue Nov <span class="m">10</span> 00:10:30 PST 2020<span class="p">;</span> root:xnu-6153.141.10~1/RELEASE_X86_64
% sw_vers
ProductName:    Mac OS X
ProductVersion: 10.15.7
BuildVersion:   19H114
% curl --version
curl 7.64.1 <span class="o">(</span>x86_64-apple-darwin19.0<span class="o">)</span> libcurl/7.64.1 <span class="o">(</span>SecureTransport<span class="o">)</span> LibreSSL/2.8.3 zlib/1.2.11 nghttp2/1.39.2
Release-Date: 2019-03-27
Protocols: dict file ftp ftps gopher http https imap imaps ldap ldaps pop3 pop3s rtsp smb smbs smtp smtps telnet tftp 
Features: AsynchDNS GSS-API HTTP2 HTTPS-proxy IPv6 Kerberos Largefile libz MultiSSL NTLM NTLM_WB SPNEGO SSL UnixSockets
</code></pre></div>]]></content>
		</item>
		
		<item>
			<title>Cognito User Pool の CSV インポート機能</title>
			<link>https://noid11.github.io/posts/cognito-user-pool-csv-import-feature/</link>
			<pubDate>Tue, 05 Jan 2021 20:18:51 +0900</pubDate>
			
			<guid>https://noid11.github.io/posts/cognito-user-pool-csv-import-feature/</guid>
			<description>&lt;p&gt;Cognito User Pool における CSV インポート機能についてのメモ&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>Cognito User Pool における CSV インポート機能についてのメモ</p>
<h2 id="ユーザーインポート機能の概要">ユーザーインポート機能の概要</h2>
<ul>
<li>Cognito User Pool におけるユーザーインポート機能は2種類ある<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>
<ol>
<li>ユーザー移行 Lambda トリガーを用いたユーザーインポート
<ul>
<li>ユーザーが既存のパスワードを使用して移行可能</li>
<li>ユーザーのサインインアクションが行われたタイミングで移行が行われるため、移行のためにユーザーアクションが必要
<ul>
<li>つまり非アクティブなユーザーについては移行されない</li>
</ul>
</li>
</ul>
</li>
<li>CSV ファイルを用いたユーザーインポート
<ul>
<li>CSV ファイルを用意することでバルクでユーザー移行が可能
<ul>
<li>非アクティブなユーザーについても CSV ファイルに含めれば移行されるので、ある程度まとまった単位でユーザー移行したい場合に適している</li>
</ul>
</li>
<li>ユーザーのパスワードは CSV で指定できないため、インポート後各ユーザーのパスワードリセットが必要</li>
</ul>
</li>
</ol>
</li>
</ul>
<h2 id="csv-インポート機能とは">CSV インポート機能とは？</h2>
<ul>
<li>先述の Cognito User Pool にユーザーをインポートする機能の1つ</li>
<li>ユーザー情報を記述した CSV ファイルを元に、 Cognito User Pool にユーザーをインポートする機能<sup id="fnref:2"><a href="#fn:2" class="footnote-ref" role="doc-noteref">2</a></sup>
<ul>
<li>CSV ファイルでユーザーパスワードの設定はサポートされていないため、この方法でインポートされたユーザーは  RESET_REQUIRED ステータスとなり、パスワードリセットが必要となる<sup id="fnref:3"><a href="#fn:3" class="footnote-ref" role="doc-noteref">3</a></sup></li>
</ul>
</li>
</ul>
<p>Cognito User Pool におけるユーザーステータスの遷移図</p>
<blockquote>
<p><img src="/images/cognito-user-pool-import-feature/amazon-cognito-sign-in-confirm-user.png" alt="user-status"></p>
</blockquote>
<p><a href="https://docs.aws.amazon.com/cognito/latest/developerguide/signing-up-users-in-your-app.html">https://docs.aws.amazon.com/cognito/latest/developerguide/signing-up-users-in-your-app.html</a> より引用</p>
<h2 id="ユーザーインポートの流れ">ユーザーインポートの流れ</h2>
<ol>
<li>IAM ロールを作成する
<ul>
<li>これは Cognito User Pool が CSV インポートする際に CloudWatch Logs にログ出力を行うため必要となるもの</li>
</ul>
</li>
<li>CSV ファイルを作成
<ul>
<li>ユーザー情報を記述した CSV ファイルを作成する</li>
</ul>
</li>
<li>ユーザーインポートジョブを作成
<ul>
<li>CSV ファイルをインポートするためのジョブを作成</li>
<li>ジョブは非同期に実行されるようになっており、ジョブを作成するだけではインポートは行われず、明示的にジョブの開始を行う必要がある</li>
</ul>
</li>
<li>CSV ファイルをアップロード
<ul>
<li>ジョブを作成した際に、 CSV ファイルをアップロードするための URL が発行されるので <code>curl</code> コマンド等を用いて CSV ファイルのアップロードを行う</li>
</ul>
</li>
<li>ユーザーインポートジョブを開始</li>
<li>インポートジョブのログを確認
<ul>
<li>CloudWatch Logs に出力される</li>
</ul>
</li>
<li>インポートユーザーがパスワードをリセットするように要求
<ul>
<li>これはアプリケーション実装側のトピックとなるので、この記事では省略する</li>
</ul>
</li>
</ol>
<h2 id="aws-cli-を使ってインポートを試す">AWS CLI を使ってインポートを試す</h2>
<h3 id="iam-ロール">IAM ロール</h3>
<ul>
<li>IAM ロールについてはマネジメントコンソールからインポートを試した際に作成されるサービスロールを使用する<sup id="fnref:4"><a href="#fn:4" class="footnote-ref" role="doc-noteref">4</a></sup></li>
</ul>
<p><code>get-role</code> 結果</p>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh">% aws iam get-role --role-name Cognito-UserImport-Role   
<span class="o">{</span>
    <span class="s2">&#34;Role&#34;</span>: <span class="o">{</span>
        <span class="s2">&#34;Path&#34;</span>: <span class="s2">&#34;/service-role/&#34;</span>,
        <span class="s2">&#34;RoleName&#34;</span>: <span class="s2">&#34;Cognito-UserImport-Role&#34;</span>,
        <span class="s2">&#34;RoleId&#34;</span>: <span class="s2">&#34;AROAIQGN5YPP2UMLFTJVM&#34;</span>,
        <span class="s2">&#34;Arn&#34;</span>: <span class="s2">&#34;arn:aws:iam::123456789012:role/service-role/Cognito-UserImport-Role&#34;</span>,
        <span class="s2">&#34;CreateDate&#34;</span>: <span class="s2">&#34;2018-06-30T09:54:58+00:00&#34;</span>,
        <span class="s2">&#34;AssumeRolePolicyDocument&#34;</span>: <span class="o">{</span>
            <span class="s2">&#34;Version&#34;</span>: <span class="s2">&#34;2012-10-17&#34;</span>,
            <span class="s2">&#34;Statement&#34;</span>: <span class="o">[</span>
                <span class="o">{</span>
                    <span class="s2">&#34;Effect&#34;</span>: <span class="s2">&#34;Allow&#34;</span>,
                    <span class="s2">&#34;Principal&#34;</span>: <span class="o">{</span>
                        <span class="s2">&#34;Service&#34;</span>: <span class="s2">&#34;cognito-idp.amazonaws.com&#34;</span>
                    <span class="o">}</span>,
                    <span class="s2">&#34;Action&#34;</span>: <span class="s2">&#34;sts:AssumeRole&#34;</span>
                <span class="o">}</span>
            <span class="o">]</span>
        <span class="o">}</span>,
        <span class="s2">&#34;MaxSessionDuration&#34;</span>: 3600,
        <span class="s2">&#34;RoleLastUsed&#34;</span>: <span class="o">{</span>
            <span class="s2">&#34;LastUsedDate&#34;</span>: <span class="s2">&#34;2021-01-05T18:35:15+00:00&#34;</span>,
            <span class="s2">&#34;Region&#34;</span>: <span class="s2">&#34;ap-northeast-1&#34;</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><p>自分の環境では、以下のようなマネージドポリシー <code>Cognito-1530352497476</code> がアタッチされた</p>
<div class="highlight"><pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
    <span class="nt">&#34;Version&#34;</span><span class="p">:</span> <span class="s2">&#34;2012-10-17&#34;</span><span class="p">,</span>
    <span class="nt">&#34;Statement&#34;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&#34;Sid&#34;</span><span class="p">:</span> <span class="s2">&#34;Stmt1467314338000&#34;</span><span class="p">,</span>
            <span class="nt">&#34;Effect&#34;</span><span class="p">:</span> <span class="s2">&#34;Allow&#34;</span><span class="p">,</span>
            <span class="nt">&#34;Action&#34;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&#34;logs:CreateLogGroup&#34;</span><span class="p">,</span>
                <span class="s2">&#34;logs:CreateLogStream&#34;</span><span class="p">,</span>
                <span class="s2">&#34;logs:DescribeLogStreams&#34;</span><span class="p">,</span>
                <span class="s2">&#34;logs:PutLogEvents&#34;</span>
            <span class="p">],</span>
            <span class="nt">&#34;Resource&#34;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&#34;arn:aws:logs:ap-northeast-1:123456789012:log-group:/aws/cognito/*&#34;</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</code></pre></div><h3 id="csv-ファイルを用意">CSV ファイルを用意</h3>
<p>get-csv-header コマンドで CSV に必要となるヘッダーを取得できる<sup id="fnref:5"><a href="#fn:5" class="footnote-ref" role="doc-noteref">5</a></sup></p>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh"><span class="nv">USER_POOL_ID</span><span class="o">=</span>ap-northeast-1_xxx
aws cognito-idp get-csv-header --user-pool-id <span class="nv">$USER_POOL_ID</span>
aws cognito-idp get-csv-header --user-pool-id <span class="nv">$USER_POOL_ID</span> --query CSVHeader
</code></pre></div><p>実行例</p>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh">% aws cognito-idp get-csv-header --user-pool-id <span class="nv">$USER_POOL_ID</span> --query CSVHeader --output text
<span class="o">[</span>
    <span class="s2">&#34;name&#34;</span>,
    <span class="s2">&#34;given_name&#34;</span>,
    <span class="s2">&#34;family_name&#34;</span>,
    <span class="s2">&#34;middle_name&#34;</span>,
    <span class="s2">&#34;nickname&#34;</span>,
    <span class="s2">&#34;preferred_username&#34;</span>,
    <span class="s2">&#34;profile&#34;</span>,
    <span class="s2">&#34;picture&#34;</span>,
    <span class="s2">&#34;website&#34;</span>,
    <span class="s2">&#34;email&#34;</span>,
    <span class="s2">&#34;email_verified&#34;</span>,
    <span class="s2">&#34;gender&#34;</span>,
    <span class="s2">&#34;birthdate&#34;</span>,
    <span class="s2">&#34;zoneinfo&#34;</span>,
    <span class="s2">&#34;locale&#34;</span>,
    <span class="s2">&#34;phone_number&#34;</span>,
    <span class="s2">&#34;phone_number_verified&#34;</span>,
    <span class="s2">&#34;address&#34;</span>,
    <span class="s2">&#34;updated_at&#34;</span>,
    <span class="s2">&#34;cognito:mfa_enabled&#34;</span>,
    <span class="s2">&#34;cognito:username&#34;</span>
<span class="o">]</span>
</code></pre></div><p><code>--output</code> を <code>text</code> とするとコマンドを使って加工しやすいかもしれない</p>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh">% aws cognito-idp get-csv-header --user-pool-id <span class="nv">$USER_POOL_ID</span> --query CSVHeader --output text
name    given_name      family_name     middle_name     nickname        preferred_username      profile picture website email   email_verified  gender  birthdate       zoneinfo        locale  phone_number       phone_number_verified   address updated_at      cognito:mfa_enabled     cognito:username
</code></pre></div><p>これで取得したヘッダーを元に CSV ファイルを作成する</p>
<pre><code class="language-csv" data-lang="csv">name,given_name,family_name,middle_name,nickname,preferred_username,profile,picture,website,email,email_verified,gender,birthdate,zoneinfo,locale,phone_number,phone_number_verified,address,updated_at,cognito:mfa_enabled,cognito:username
</code></pre><p>サンプル CSV (User Pool 設定によって必要となる header や属性が異なるので注意)</p>
<pre><code class="language-csv" data-lang="csv">name,given_name,family_name,middle_name,nickname,preferred_username,profile,picture,website,email,email_verified,gender,birthdate,zoneinfo,locale,phone_number,phone_number_verified,address,updated_at,cognito:mfa_enabled,cognito:username
johndoe,,,,,,,,,johndoe@example.com,TRUE,,,,,,FALSE,,,FALSE,johndoe
janeroe,,,,,,,,,janeroe@example.com,TRUE,,,,,,FALSE,,,FALSE,janeroe
</code></pre><h3 id="ジョブを作成">ジョブを作成</h3>
<p><code>create-user-import-job</code> コマンドでインポートジョブを作成<sup id="fnref:6"><a href="#fn:6" class="footnote-ref" role="doc-noteref">6</a></sup></p>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh"><span class="nv">JOB_NAME</span><span class="o">=</span>myjob
<span class="nv">CLOUD_WATCH_LOGS_ROLE_ARN</span><span class="o">=</span>arn:aws:iam::123456789012:role/service-role/Cognito-UserImport-Role
aws cognito-idp create-user-import-job --job-name <span class="nv">$JOB_NAME</span> --user-pool-id <span class="nv">$USER_POOL_ID</span> --cloud-watch-logs-role-arn <span class="nv">$CLOUD_WATCH_LOGS_ROLE_ARN</span>
</code></pre></div><p>実行例</p>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh">% aws cognito-idp create-user-import-job --job-name <span class="nv">$JOB_NAME</span> --user-pool-id <span class="nv">$USER_POOL_ID</span> --cloud-watch-logs-role-arn <span class="nv">$CLOUD_WATCH_LOGS_ROLE_ARN</span>
<span class="o">{</span>
    <span class="s2">&#34;UserImportJob&#34;</span>: <span class="o">{</span>
        <span class="s2">&#34;JobName&#34;</span>: <span class="s2">&#34;myjob&#34;</span>,
        <span class="s2">&#34;JobId&#34;</span>: <span class="s2">&#34;import-xxx&#34;</span>,
        <span class="s2">&#34;UserPoolId&#34;</span>: <span class="s2">&#34;ap-northeast-1_xxx&#34;</span>,
        <span class="s2">&#34;PreSignedUrl&#34;</span>: <span class="s2">&#34;https://aws-cognito-idp-user-import-nrt.s3.ap-northeast-1.amazonaws.com/123456789012/ap-northeast-1_xxx/import-xxx?...&#34;</span>,
        <span class="s2">&#34;CreationDate&#34;</span>: <span class="s2">&#34;2021-01-05T21:06:37.381000+09:00&#34;</span>,
        <span class="s2">&#34;Status&#34;</span>: <span class="s2">&#34;Created&#34;</span>,
        <span class="s2">&#34;CloudWatchLogsRoleArn&#34;</span>: <span class="s2">&#34;arn:aws:iam::123456789012:role/service-role/Cognito-UserImport-Role&#34;</span>,
        <span class="s2">&#34;ImportedUsers&#34;</span>: 0,
        <span class="s2">&#34;SkippedUsers&#34;</span>: 0,
        <span class="s2">&#34;FailedUsers&#34;</span>: <span class="m">0</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><p>CSV ファイルのアップロード</p>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh"><span class="nv">PRE_SIGNED_URL</span><span class="o">=</span><span class="s2">&#34;https://aws-cognito-idp-user-import-nrt.s3.ap-northeast-1.amazonaws.com/123456789012/ap-northeast-1_xxx/import-xxx?...&#34;</span>
curl -v -T ./user-import-csv-template.csv -H <span class="s2">&#34;x-amz-server-side-encryption:aws:kms&#34;</span> <span class="nv">$PRE_SIGNED_URL</span>
</code></pre></div><h3 id="作成したジョブを開始">作成したジョブを開始</h3>
<p><code>start-user-import-job</code> でジョブを開始<sup id="fnref:7"><a href="#fn:7" class="footnote-ref" role="doc-noteref">7</a></sup></p>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh"><span class="nv">JOB_ID</span><span class="o">=</span>import-xxx
aws cognito-idp start-user-import-job --user-pool-id <span class="nv">$USER_POOL_ID</span> --job-id <span class="nv">$JOB_ID</span>
</code></pre></div><p>実行例</p>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh">% aws cognito-idp start-user-import-job --user-pool-id <span class="nv">$USER_POOL_ID</span> --job-id <span class="nv">$JOB_ID</span>
<span class="o">{</span>
    <span class="s2">&#34;UserImportJob&#34;</span>: <span class="o">{</span>
        <span class="s2">&#34;JobName&#34;</span>: <span class="s2">&#34;myjob&#34;</span>,
        <span class="s2">&#34;JobId&#34;</span>: <span class="s2">&#34;import-xxx&#34;</span>,
        <span class="s2">&#34;UserPoolId&#34;</span>: <span class="s2">&#34;ap-northeast-1_xxx&#34;</span>,
        <span class="s2">&#34;PreSignedUrl&#34;</span>: <span class="s2">&#34;https://aws-cognito-idp-user-import-nrt.s3.ap-northeast-1.amazonaws.com/123456789012/ap-northeast-1_xxx/import-xxx?...&#34;</span>,
        <span class="s2">&#34;CreationDate&#34;</span>: <span class="s2">&#34;2021-01-06T03:49:04.035000+09:00&#34;</span>,
        <span class="s2">&#34;StartDate&#34;</span>: <span class="s2">&#34;2021-01-06T03:50:45.478000+09:00&#34;</span>,
        <span class="s2">&#34;Status&#34;</span>: <span class="s2">&#34;Pending&#34;</span>,
        <span class="s2">&#34;CloudWatchLogsRoleArn&#34;</span>: <span class="s2">&#34;arn:aws:iam::123456789012:role/service-role/Cognito-UserImport-Role&#34;</span>,
        <span class="s2">&#34;ImportedUsers&#34;</span>: 0,
        <span class="s2">&#34;SkippedUsers&#34;</span>: 0,
        <span class="s2">&#34;FailedUsers&#34;</span>: <span class="m">0</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><h3 id="インポートジョブのステータス確認">インポートジョブのステータス確認</h3>
<p><code>describe-user-import-job</code> コマンドでインポートジョブのステータスを確認可能<sup id="fnref:8"><a href="#fn:8" class="footnote-ref" role="doc-noteref">8</a></sup></p>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh">aws cognito-idp describe-user-import-job --user-pool-id <span class="nv">$USER_POOL_ID</span> --job-id <span class="nv">$JOB_ID</span>
</code></pre></div><p>実行例</p>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh">% aws cognito-idp describe-user-import-job --user-pool-id <span class="nv">$USER_POOL_ID</span> --job-id <span class="nv">$JOB_ID</span>
<span class="o">{</span>
    <span class="s2">&#34;UserImportJob&#34;</span>: <span class="o">{</span>
        <span class="s2">&#34;JobName&#34;</span>: <span class="s2">&#34;myjob&#34;</span>,
        <span class="s2">&#34;JobId&#34;</span>: <span class="s2">&#34;import-xxx&#34;</span>,
        <span class="s2">&#34;UserPoolId&#34;</span>: <span class="s2">&#34;ap-northeast-1_xxx&#34;</span>,
        <span class="s2">&#34;PreSignedUrl&#34;</span>: <span class="s2">&#34;https://aws-cognito-idp-user-import-nrt.s3.ap-northeast-1.amazonaws.com/123456789012/ap-northeast-1_xxx/import-xxx?...&#34;</span>,
        <span class="s2">&#34;CreationDate&#34;</span>: <span class="s2">&#34;2021-01-06T03:49:04.035000+09:00&#34;</span>,
        <span class="s2">&#34;StartDate&#34;</span>: <span class="s2">&#34;2021-01-06T03:50:47.752000+09:00&#34;</span>,
        <span class="s2">&#34;CompletionDate&#34;</span>: <span class="s2">&#34;2021-01-06T03:50:48.531000+09:00&#34;</span>,
        <span class="s2">&#34;Status&#34;</span>: <span class="s2">&#34;Succeeded&#34;</span>,
        <span class="s2">&#34;CloudWatchLogsRoleArn&#34;</span>: <span class="s2">&#34;arn:aws:iam::123456789012:role/service-role/Cognito-UserImport-Role&#34;</span>,
        <span class="s2">&#34;ImportedUsers&#34;</span>: 2,
        <span class="s2">&#34;SkippedUsers&#34;</span>: 0,
        <span class="s2">&#34;FailedUsers&#34;</span>: 0,
        <span class="s2">&#34;CompletionMessage&#34;</span>: <span class="s2">&#34;Import Job Completed Successfully.&#34;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><h3 id="ユーザーが追加されたか確認">ユーザーが追加されたか確認</h3>
<p><code>list-users</code> コマンドで確認<sup id="fnref:9"><a href="#fn:9" class="footnote-ref" role="doc-noteref">9</a></sup></p>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh">aws cognito-idp list-users --user-pool-id <span class="nv">$USER_POOL_ID</span>
</code></pre></div><p>実行例</p>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh">% aws cognito-idp list-users --user-pool-id <span class="nv">$USER_POOL_ID</span>
<span class="o">{</span>
    <span class="s2">&#34;Users&#34;</span>: <span class="o">[</span>
        <span class="o">{</span>
            <span class="s2">&#34;Username&#34;</span>: <span class="s2">&#34;janeroe&#34;</span>,
            <span class="s2">&#34;Attributes&#34;</span>: <span class="o">[</span>
                <span class="o">{</span>
                    <span class="s2">&#34;Name&#34;</span>: <span class="s2">&#34;sub&#34;</span>,
                    <span class="s2">&#34;Value&#34;</span>: <span class="s2">&#34;c754c8af-55e4-413f-afdb-895bd17e8078&#34;</span>
                <span class="o">}</span>,
                <span class="o">{</span>
                    <span class="s2">&#34;Name&#34;</span>: <span class="s2">&#34;email_verified&#34;</span>,
                    <span class="s2">&#34;Value&#34;</span>: <span class="s2">&#34;true&#34;</span>
                <span class="o">}</span>,
                <span class="o">{</span>
                    <span class="s2">&#34;Name&#34;</span>: <span class="s2">&#34;name&#34;</span>,
                    <span class="s2">&#34;Value&#34;</span>: <span class="s2">&#34;janeroe&#34;</span>
                <span class="o">}</span>,
                <span class="o">{</span>
                    <span class="s2">&#34;Name&#34;</span>: <span class="s2">&#34;phone_number_verified&#34;</span>,
                    <span class="s2">&#34;Value&#34;</span>: <span class="s2">&#34;false&#34;</span>
                <span class="o">}</span>,
                <span class="o">{</span>
                    <span class="s2">&#34;Name&#34;</span>: <span class="s2">&#34;email&#34;</span>,
                    <span class="s2">&#34;Value&#34;</span>: <span class="s2">&#34;janeroe@example.com&#34;</span>
                <span class="o">}</span>
            <span class="o">]</span>,
            <span class="s2">&#34;UserCreateDate&#34;</span>: <span class="s2">&#34;2021-01-06T03:50:48.369000+09:00&#34;</span>,
            <span class="s2">&#34;UserLastModifiedDate&#34;</span>: <span class="s2">&#34;2021-01-06T03:50:48.369000+09:00&#34;</span>,
            <span class="s2">&#34;Enabled&#34;</span>: true,
            <span class="s2">&#34;UserStatus&#34;</span>: <span class="s2">&#34;RESET_REQUIRED&#34;</span>
        <span class="o">}</span>,
        <span class="o">{</span>
            <span class="s2">&#34;Username&#34;</span>: <span class="s2">&#34;johndoe&#34;</span>,
            <span class="s2">&#34;Attributes&#34;</span>: <span class="o">[</span>
                <span class="o">{</span>
                    <span class="s2">&#34;Name&#34;</span>: <span class="s2">&#34;sub&#34;</span>,
                    <span class="s2">&#34;Value&#34;</span>: <span class="s2">&#34;556cdeca-59af-49e2-903c-8d2452ff1cae&#34;</span>
                <span class="o">}</span>,
                <span class="o">{</span>
                    <span class="s2">&#34;Name&#34;</span>: <span class="s2">&#34;email_verified&#34;</span>,
                    <span class="s2">&#34;Value&#34;</span>: <span class="s2">&#34;true&#34;</span>
                <span class="o">}</span>,
                <span class="o">{</span>
                    <span class="s2">&#34;Name&#34;</span>: <span class="s2">&#34;name&#34;</span>,
                    <span class="s2">&#34;Value&#34;</span>: <span class="s2">&#34;johndoe&#34;</span>
                <span class="o">}</span>,
                <span class="o">{</span>
                    <span class="s2">&#34;Name&#34;</span>: <span class="s2">&#34;phone_number_verified&#34;</span>,
                    <span class="s2">&#34;Value&#34;</span>: <span class="s2">&#34;false&#34;</span>
                <span class="o">}</span>,
                <span class="o">{</span>
                    <span class="s2">&#34;Name&#34;</span>: <span class="s2">&#34;email&#34;</span>,
                    <span class="s2">&#34;Value&#34;</span>: <span class="s2">&#34;johndoe@example.com&#34;</span>
                <span class="o">}</span>
            <span class="o">]</span>,
            <span class="s2">&#34;UserCreateDate&#34;</span>: <span class="s2">&#34;2021-01-06T03:50:48.363000+09:00&#34;</span>,
            <span class="s2">&#34;UserLastModifiedDate&#34;</span>: <span class="s2">&#34;2021-01-06T03:50:48.363000+09:00&#34;</span>,
            <span class="s2">&#34;Enabled&#34;</span>: true,
            <span class="s2">&#34;UserStatus&#34;</span>: <span class="s2">&#34;RESET_REQUIRED&#34;</span>
        <span class="o">}</span>
    <span class="o">]</span>
<span class="o">}</span>
</code></pre></div><h2 id="ジョブのステータス">ジョブのステータス</h2>
<ul>
<li>API Reference の DataType に定義がある<sup id="fnref:10"><a href="#fn:10" class="footnote-ref" role="doc-noteref">10</a></sup>
<ul>
<li><code>Created</code>: ジョブが作成されたものの未開始</li>
<li><code>Pending</code>: ジョブが開始されたもののユーザーはインポートしていない遷移状態</li>
<li><code>InProgress</code>: ジョブが開始されユーザーをインポート中</li>
<li><code>Stopping</code>: ジョブの停止をリクエストしたが、ジョブがユーザーインポートを停止していない</li>
<li><code>Stopped</code>: ジョブがユーザーインポートを停止した</li>
<li><code>Succeeded</code>: ジョブが正常に完了した</li>
<li><code>Faild</code>: エラーのためジョブが失敗した</li>
<li><code>Expired</code>: ジョブを作成したが 24 - 48 時間の間にジョブを開始しなかった。ジョブに関連付けられているデータは全て削除され、ジョブは開始できない</li>
</ul>
</li>
</ul>
<h2 id="トラブルシュート-tips">トラブルシュート Tips</h2>
<ul>
<li>CSV のインポートが失敗する
<ul>
<li>CloudWatch Logs に出力されるログを見るとヒントがあるかも</li>
<li>以下のようなフォーマットで CloudWatch Logs に出力が行われる
<ul>
<li>Log Group: <code>/aws/cognito/userpools/ap-northeast-1_xxx/my-user-pool-name</code></li>
<li>Log Stream: <code>import-job-id/import-job-name</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="この記事を試した環境">この記事を試した環境</h2>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh">% uname -v
Darwin Kernel Version 19.6.0: Tue Nov <span class="m">10</span> 00:10:30 PST 2020<span class="p">;</span> root:xnu-6153.141.10~1/RELEASE_X86_64
% sw_vers
ProductName:    Mac OS X
ProductVersion: 10.15.7
BuildVersion:   19H114
% aws --version
aws-cli/2.1.6 Python/3.7.4 Darwin/19.6.0 exe/x86_64 prompt/off
</code></pre></div><section class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1" role="doc-endnote">
<p>Importing Users into a User Pool - Amazon Cognito<br>
<a href="https://docs.aws.amazon.com/cognito/latest/developerguide/cognito-user-pools-import-users.html">https://docs.aws.amazon.com/cognito/latest/developerguide/cognito-user-pools-import-users.html</a> <a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:2" role="doc-endnote">
<p>Importing Users into User Pools From a CSV File - Amazon Cognito<br>
<a href="https://docs.aws.amazon.com/cognito/latest/developerguide/cognito-user-pools-using-import-tool.html">https://docs.aws.amazon.com/cognito/latest/developerguide/cognito-user-pools-using-import-tool.html</a> <a href="#fnref:2" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:3" role="doc-endnote">
<p>UserType - Amazon Cognito Identity Provider<br>
<a href="https://docs.aws.amazon.com/cognito-user-identity-pools/latest/APIReference/API_UserType.html">https://docs.aws.amazon.com/cognito-user-identity-pools/latest/APIReference/API_UserType.html</a> <a href="#fnref:3" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:4" role="doc-endnote">
<p>Creating the CloudWatch Logs IAM Role (AWS CLI, API) - Amazon Cognito<br>
<a href="https://docs.aws.amazon.com/cognito/latest/developerguide/cognito-user-pools-using-import-tool-cli-cloudwatch-iam-role.html">https://docs.aws.amazon.com/cognito/latest/developerguide/cognito-user-pools-using-import-tool-cli-cloudwatch-iam-role.html</a> <a href="#fnref:4" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:5" role="doc-endnote">
<p><a href="https://awscli.amazonaws.com/v2/documentation/api/latest/reference/cognito-idp/get-csv-header.html">https://awscli.amazonaws.com/v2/documentation/api/latest/reference/cognito-idp/get-csv-header.html</a> <a href="#fnref:5" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:6" role="doc-endnote">
<p><a href="https://awscli.amazonaws.com/v2/documentation/api/latest/reference/cognito-idp/create-user-import-job.html">https://awscli.amazonaws.com/v2/documentation/api/latest/reference/cognito-idp/create-user-import-job.html</a> <a href="#fnref:6" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:7" role="doc-endnote">
<p><a href="https://awscli.amazonaws.com/v2/documentation/api/latest/reference/cognito-idp/start-user-import-job.html">https://awscli.amazonaws.com/v2/documentation/api/latest/reference/cognito-idp/start-user-import-job.html</a> <a href="#fnref:7" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:8" role="doc-endnote">
<p><a href="https://awscli.amazonaws.com/v2/documentation/api/latest/reference/cognito-idp/describe-user-import-job.html">https://awscli.amazonaws.com/v2/documentation/api/latest/reference/cognito-idp/describe-user-import-job.html</a> <a href="#fnref:8" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:9" role="doc-endnote">
<p><a href="https://awscli.amazonaws.com/v2/documentation/api/latest/reference/cognito-idp/list-users.html">https://awscli.amazonaws.com/v2/documentation/api/latest/reference/cognito-idp/list-users.html</a> <a href="#fnref:9" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:10" role="doc-endnote">
<p>UserImportJobType - Amazon Cognito Identity Provider
<a href="https://docs.aws.amazon.com/cognito-user-identity-pools/latest/APIReference/API_UserImportJobType.html">https://docs.aws.amazon.com/cognito-user-identity-pools/latest/APIReference/API_UserImportJobType.html</a> <a href="#fnref:10" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</section>]]></content>
		</item>
		
		<item>
			<title>AWS Lambda で Go ランタイムを使うのが良いと思っている理由</title>
			<link>https://noid11.github.io/posts/aws-lambda-love-golang/</link>
			<pubDate>Fri, 01 Jan 2021 15:05:18 +0900</pubDate>
			
			<guid>https://noid11.github.io/posts/aws-lambda-love-golang/</guid>
			<description>&lt;p&gt;個人的に AWS Lambda では zip 形式で golang ランタイム使うのがコスパ最強な気がしているので、根拠をまとめておくメモ&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>個人的に AWS Lambda では zip 形式で golang ランタイム使うのがコスパ最強な気がしているので、根拠をまとめておくメモ</p>
<h2 id="パフォーマンス">パフォーマンス</h2>
<ul>
<li>コールドスタートの影響が少ない
<ul>
<li>JVM 相当のコンポーネントが存在しないためコールドスタートの影響が少ない</li>
</ul>
</li>
<li>マルチコアを活かしやすい
<ul>
<li>AWS Lambda では Lambda 関数に設定したメモリサイズに応じて割り当てられる CPU パワーが変化する<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>
<ul>
<li>今後変化する可能性もあるものの、現状メモリサイズを最低値である 128 MB としても利用コア数は 2 となる<sup id="fnref:2"><a href="#fn:2" class="footnote-ref" role="doc-noteref">2</a></sup></li>
<li>1,769 MB のメモリ割り当てで 1vCPU 相当になるらしい</li>
<li>2020/12/01 にメモリ 10GB vCPU 6 コアまでサポートされるようになった<sup id="fnref:3"><a href="#fn:3" class="footnote-ref" role="doc-noteref">3</a></sup></li>
</ul>
</li>
<li>goroutine との相性が良い</li>
</ul>
</li>
</ul>
<h2 id="開発体験">開発体験</h2>
<ul>
<li>公式の型定義が使える
<ul>
<li>AWS 公式から Lambda 関数が受け取る event の型が定義されている<sup id="fnref:4"><a href="#fn:4" class="footnote-ref" role="doc-noteref">4</a></sup></li>
<li>TypeScript でもあったりするものの、良くも悪くも DefinitelyTyped による型定義なので公式ではなくコミュニティによるもの<sup id="fnref:5"><a href="#fn:5" class="footnote-ref" role="doc-noteref">5</a></sup></li>
</ul>
</li>
</ul>
<h2 id="料金">料金</h2>
<ul>
<li>goroutine を使って concurrent な処理を実装しやすいため Lambda 関数の実行時間短縮が期待できる
<ul>
<li>AWS Lambda の料金はリクエスト数と実行時間を元に算出される<sup id="fnref:6"><a href="#fn:6" class="footnote-ref" role="doc-noteref">6</a></sup>
<ul>
<li>さらに 2020/12/01 に AWS Lambda の課金単位が 1ms になった<sup id="fnref:7"><a href="#fn:7" class="footnote-ref" role="doc-noteref">7</a></sup></li>
</ul>
</li>
<li>そのため基本的に短い時間で処理を完了できるほうがお得</li>
</ul>
</li>
<li>基本的にコンテナイメージより zip 形式の方が安く使える
<ul>
<li>従来の zip 形式ではなく、コンテナイメージ形式でコードをデプロイすることが可能になった<sup id="fnref:8"><a href="#fn:8" class="footnote-ref" role="doc-noteref">8</a></sup>
<ul>
<li>コンテナイメージとカスタムランタイムは Lambda 関数の初期化時にも課金が発生するため、 zip 形式では実現できない要件がある場合にコンテナイメージを検討するのが良さそう<sup id="fnref:9"><a href="#fn:9" class="footnote-ref" role="doc-noteref">9</a></sup></li>
<li>数 GB に渡るような巨大なライブラリやコードを動かしたい場合とか</li>
</ul>
</li>
</ul>
</li>
</ul>
<section class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1" role="doc-endnote">
<p>Configuring Lambda function memory - AWS Lambda<br>
<a href="https://docs.aws.amazon.com/lambda/latest/dg/configuration-memory.html">https://docs.aws.amazon.com/lambda/latest/dg/configuration-memory.html</a> <a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:2" role="doc-endnote">
<p>Serverless連載2: AWS Lambda×Goの開発Tips | フューチャー技術ブログ<br>
<a href="https://future-architect.github.io/articles/20200326/">https://future-architect.github.io/articles/20200326/</a> <a href="#fnref:2" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:3" role="doc-endnote">
<p>AWS Lambda now supports up to 10 GB of memory and 6 vCPU cores for Lambda Functions<br>
<a href="https://aws.amazon.com/jp/about-aws/whats-new/2020/12/aws-lambda-supports-10gb-memory-6-vcpu-cores-lambda-functions/">https://aws.amazon.com/jp/about-aws/whats-new/2020/12/aws-lambda-supports-10gb-memory-6-vcpu-cores-lambda-functions/</a> <a href="#fnref:3" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:4" role="doc-endnote">
<p>aws-lambda-go/events at master · aws/aws-lambda-go<br>
<a href="https://github.com/aws/aws-lambda-go/tree/master/events">https://github.com/aws/aws-lambda-go/tree/master/events</a> <a href="#fnref:4" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:5" role="doc-endnote">
<p>DefinitelyTyped/types/aws-lambda at master · DefinitelyTyped/DefinitelyTyped<br>
<a href="https://github.com/DefinitelyTyped/DefinitelyTyped/tree/master/types/aws-lambda">https://github.com/DefinitelyTyped/DefinitelyTyped/tree/master/types/aws-lambda</a> <a href="#fnref:5" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:6" role="doc-endnote">
<p>料金 - AWS Lambda ｜AWS<br>
<a href="https://aws.amazon.com/jp/lambda/pricing/">https://aws.amazon.com/jp/lambda/pricing/</a> <a href="#fnref:6" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:7" role="doc-endnote">
<p>AWS Lambda changes duration billing granularity from 100ms down to 1ms<br>
<a href="https://aws.amazon.com/jp/about-aws/whats-new/2020/12/aws-lambda-changes-duration-billing-granularity-from-100ms-to-1ms/">https://aws.amazon.com/jp/about-aws/whats-new/2020/12/aws-lambda-changes-duration-billing-granularity-from-100ms-to-1ms/</a> <a href="#fnref:7" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:8" role="doc-endnote">
<p>AWS Lambda の新機能 – コンテナイメージのサポート | Amazon Web Services ブログ<br>
<a href="https://aws.amazon.com/jp/blogs/news/new-for-aws-lambda-container-image-support/">https://aws.amazon.com/jp/blogs/news/new-for-aws-lambda-container-image-support/</a> <a href="#fnref:8" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:9" role="doc-endnote">
<p>AWS Lambda のカスタムランタイム - AWS Lambda<br>
<a href="https://docs.aws.amazon.com/ja_jp/lambda/latest/dg/runtimes-custom.html#runtimes-custom-build">https://docs.aws.amazon.com/ja_jp/lambda/latest/dg/runtimes-custom.html#runtimes-custom-build</a> <a href="#fnref:9" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</section>]]></content>
		</item>
		
		<item>
			<title>2021 年の目標</title>
			<link>https://noid11.github.io/posts/2021-goals/</link>
			<pubDate>Thu, 31 Dec 2020 22:49:26 +0900</pubDate>
			
			<guid>https://noid11.github.io/posts/2021-goals/</guid>
			<description></description>
			<content type="html"><![CDATA[<h1 id="技術">技術</h1>
<ul>
<li>コーディングスキルにコンプレックスがあるので、もっと書けるようになりたい &amp; 自信をつけたい
<ul>
<li>プログラミング言語としては <a href="https://golang.org/">Golang</a>, <a href="https://www.typescriptlang.org/">TypeScript</a>, <a href="https://developer.mozilla.org/ja/docs/Web/JavaScript">JavaScript</a>, <a href="https://www.python.org/">Python</a> あたりにモチベがある</li>
<li>何か OSS にコントリビュートしてみたい</li>
<li>RFC 等の仕様を読んで実装してみる・・・みたいなやつもやってみたい</li>
</ul>
</li>
</ul>
<h1 id="英語">英語</h1>
<ul>
<li>コツコツやる
<ul>
<li><a href="https://ja.duolingo.com/">Duolingo</a> と <a href="https://ankiweb.net/decks/">Anki Web</a> が良い感じに継続できているので大丈夫そうではある</li>
<li>スピーキングがお仕事上必要になるようであれば英会話教室とか検討した方が良いかもしれない</li>
</ul>
</li>
</ul>
<h1 id="仕事">仕事</h1>
<ul>
<li>常にキャパシティに余裕を持てるように働きたい
<ul>
<li>1日の仕事を7時間程度で終わらせて、1時間は自分への投資に使いたい</li>
</ul>
</li>
</ul>
<h1 id="健康">健康</h1>
<ul>
<li>有酸素運動を習慣化したい
<ul>
<li>エアロバイクを腐らせているので毎日やっていきたい</li>
<li>エアロバイクを漕ぐだけだと継続できない実績があるので、並行してできる良さげなものを探したい</li>
</ul>
</li>
</ul>
<h1 id="趣味">趣味</h1>
<ul>
<li>やりたいことは色々あるけど、目標は無しで自由にやっていきたい</li>
</ul>]]></content>
		</item>
		
	</channel>
</rss>
